const T=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,H=globalThis,Et="9.46.0";function pt(){return Qn(H),H}function Qn(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||Et,t[Et]=t[Et]||{}}function er(e,t,n=H){const r=n.__SENTRY__=n.__SENTRY__||{},s=r[Et]=r[Et]||{};return s[e]||(s[e]=t())}const ci=["debug","info","warn","error","log","assert","trace"],xf="Sentry Logger ",es={};function Ct(e){if(!("console"in H))return e();const t=H.console,n={},r=Object.keys(es);r.forEach(s=>{const o=es[s];n[s]=t[s],t[s]=o});try{return e()}finally{r.forEach(s=>{t[s]=n[s]})}}function Mf(){li().enabled=!0}function Af(){li().enabled=!1}function Su(){return li().enabled}function Of(...e){ui("log",...e)}function Nf(...e){ui("warn",...e)}function Lf(...e){ui("error",...e)}function ui(e,...t){T&&Su()&&Ct(()=>{H.console[e](`${xf}[${e}]:`,...t)})}function li(){return T?er("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const _={enable:Mf,disable:Af,isEnabled:Su,log:Of,warn:Nf,error:Lf},bu=50,Ze="?",la=/\(error: (.*)\)/,da=/captureMessage|captureException/;function Eu(...e){const t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,s=0)=>{const o=[],i=n.split(`
`);for(let a=r;a<i.length;a++){const c=i[a];if(c.length>1024)continue;const u=la.test(c)?c.replace(la,"$1"):c;if(!u.match(/\S*Error: /)){for(const d of t){const l=d(u);if(l){o.push(l);break}}if(o.length>=bu+s)break}}return Pf(o.slice(s))}}function Df(e){return Array.isArray(e)?Eu(...e):e}function Pf(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(gr(t).function||"")&&t.pop(),t.reverse(),da.test(gr(t).function||"")&&(t.pop(),da.test(gr(t).function||"")&&t.pop()),t.slice(0,bu).map(n=>({...n,filename:n.filename||gr(t).filename,function:n.function||Ze}))}function gr(e){return e[e.length-1]||{}}const Ks="<anonymous>";function st(e){try{return!e||typeof e!="function"?Ks:e.name||Ks}catch{return Ks}}function Io(e){const t=e.exception;if(t){const n=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}const Fr={},fa={};function Rt(e,t){Fr[e]=Fr[e]||[],Fr[e].push(t)}function xt(e,t){if(!fa[e]){fa[e]=!0;try{t()}catch(n){T&&_.error(`Error while instrumenting ${e}`,n)}}}function $e(e,t){const n=e&&Fr[e];if(n)for(const r of n)try{r(t)}catch(s){T&&_.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${st(r)}
Error:`,s)}}let Js=null;function vu(e){const t="error";Rt(t,e),xt(t,Ff)}function Ff(){Js=H.onerror,H.onerror=function(e,t,n,r,s){return $e("error",{column:r,error:s,line:n,msg:e,url:t}),Js?Js.apply(this,arguments):!1},H.onerror.__SENTRY_INSTRUMENTED__=!0}let Zs=null;function wu(e){const t="unhandledrejection";Rt(t,e),xt(t,$f)}function $f(){Zs=H.onunhandledrejection,H.onunhandledrejection=function(e){return $e("unhandledrejection",e),Zs?Zs.apply(this,arguments):!0},H.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Tu=Object.prototype.toString;function vt(e){switch(Tu.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return it(e,Error)}}function Mn(e,t){return Tu.call(e)===`[object ${t}]`}function Iu(e){return Mn(e,"ErrorEvent")}function pa(e){return Mn(e,"DOMError")}function Bf(e){return Mn(e,"DOMException")}function je(e){return Mn(e,"String")}function Cs(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function fn(e){return e===null||Cs(e)||typeof e!="object"&&typeof e!="function"}function ot(e){return Mn(e,"Object")}function Rs(e){return typeof Event<"u"&&it(e,Event)}function Hf(e){return typeof Element<"u"&&it(e,Element)}function Uf(e){return Mn(e,"RegExp")}function tr(e){return!!(e?.then&&typeof e.then=="function")}function Wf(e){return ot(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function it(e,t){try{return e instanceof t}catch{return!1}}function ku(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function Cu(e){return typeof Request<"u"&&it(e,Request)}const di=H,zf=80;function Be(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,s=[];let o=0,i=0;const a=" > ",c=a.length;let u;const d=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||zf;for(;n&&o++<r&&(u=jf(n,d),!(u==="html"||o>1&&i+s.length*c+u.length>=l));)s.push(u),i+=u.length,n=n.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}function jf(e,t){const n=e,r=[];if(!n?.tagName)return"";if(di.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const s=t?.length?t.filter(i=>n.getAttribute(i)).map(i=>[i,n.getAttribute(i)]):null;if(s?.length)s.forEach(i=>{r.push(`[${i[0]}="${i[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const i=n.className;if(i&&je(i)){const a=i.split(/\s+/);for(const c of a)r.push(`.${c}`)}}const o=["aria-label","type","name","title","alt"];for(const i of o){const a=n.getAttribute(i);a&&r.push(`[${i}="${a}"]`)}return r.join("")}function qt(){try{return di.document.location.href}catch{return""}}function Ru(e){if(!di.HTMLElement)return null;let t=e;const n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function pn(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function Qs(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let s=Math.max(t-60,0);s<5&&(s=0);let o=Math.min(s+140,r);return o>r-5&&(o=r),o===r&&(s=Math.max(o-140,0)),n=n.slice(s,o),s>0&&(n=`'{snip} ${n}`),o<r&&(n+=" {snip}"),n}function ts(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const s=e[r];try{ku(s)?n.push("[VueViewModel]"):n.push(String(s))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function qf(e,t,n=!1){return je(e)?Uf(t)?t.test(e):je(t)?n?e===t:e.includes(t):!1:!1}function qe(e,t=[],n=!1){return t.some(r=>qf(e,r,n))}function Re(e,t,n){if(!(t in e))return;const r=e[t];if(typeof r!="function")return;const s=n(r);typeof s=="function"&&xu(s,r);try{e[t]=s}catch{T&&_.log(`Failed to replace method "${t}" in object`,e)}}function Ae(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{T&&_.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function xu(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,Ae(e,"__sentry_original__",t)}catch{}}function fi(e){return e.__sentry_original__}function Mu(e){if(vt(e))return{message:e.message,name:e.name,stack:e.stack,...ma(e)};if(Rs(e)){const t={type:e.type,target:ha(e.target),currentTarget:ha(e.currentTarget),...ma(e)};return typeof CustomEvent<"u"&&it(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function ha(e){try{return Hf(e)?Be(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function ma(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function Gf(e,t=40){const n=Object.keys(Mu(e));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return pn(r,t);for(let s=n.length;s>0;s--){const o=n.slice(0,s).join(", ");if(!(o.length>t))return s===n.length?o:pn(o,t)}return""}function Vf(){const e=H;return e.crypto||e.msCrypto}function xe(e=Vf()){let t=()=>Math.random()*16;try{if(e?.randomUUID)return e.randomUUID().replace(/-/g,"");e?.getRandomValues&&(t=()=>{const n=new Uint8Array(1);return e.getRandomValues(n),n[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,n=>(n^(t()&15)>>n/4).toString(16))}function Au(e){return e.exception?.values?.[0]}function Nt(e){const{message:t,event_id:n}=e;if(t)return t;const r=Au(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function ko(e,t,n){const r=e.exception=e.exception||{},s=r.values=r.values||[],o=s[0]=s[0]||{};o.value||(o.value=t||""),o.type||(o.type="Error")}function Tt(e,t){const n=Au(e);if(!n)return;const r={type:"generic",handled:!0},s=n.mechanism;if(n.mechanism={...r,...s,...t},t&&"data"in t){const o={...s?.data,...t.data};n.mechanism.data=o}}function Yf(e,t,n=5){if(t.lineno===void 0)return;const r=e.length,s=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,s-n),s).map(i=>Qs(i,0));const o=Math.min(r-1,s);t.context_line=Qs(e[o],t.colno||0),t.post_context=e.slice(Math.min(s+1,r),s+1+n).map(i=>Qs(i,0))}function ga(e){if(Xf(e))return!0;try{Ae(e,"__sentry_captured__",!0)}catch{}return!1}function Xf(e){try{return e.__sentry_captured__}catch{}}const Ou=1e3;function Gt(){return Date.now()/Ou}function Kf(){const{performance:e}=H;if(!e?.now||!e.timeOrigin)return Gt;const t=e.timeOrigin;return()=>(t+e.now())/Ou}let _a;function he(){return(_a??(_a=Kf()))()}let eo;function Jf(){const{performance:e}=H;if(!e?.now)return[void 0,"none"];const t=3600*1e3,n=e.now(),r=Date.now(),s=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,o=s<t,i=e.timing?.navigationStart,c=typeof i=="number"?Math.abs(i+n-r):t,u=c<t;return o||u?s<=c?[e.timeOrigin,"timeOrigin"]:[i,"navigationStart"]:[r,"dateNow"]}function Te(){return eo||(eo=Jf()),eo[0]}function Zf(e){const t=he(),n={sid:xe(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>ep(n)};return e&&hn(n,e),n}function hn(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||he(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:xe()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Qf(e,t){let n={};e.status==="ok"&&(n={status:"exited"}),hn(e,n)}function ep(e){return{sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}function nr(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;const r={...e};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=nr(r[s],t[s],n-1));return r}function at(){return xe()}function rr(){return xe().substring(16)}const Co="_sentrySpan";function Ut(e,t){t?Ae(e,Co,t):delete e[Co]}function Gn(e){return e[Co]}const tp=100;class Qe{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:at(),sampleRand:Math.random()}}clone(){const t=new Qe;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,Ut(t,Gn(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&hn(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,r=n instanceof Qe?n.getScopeData():ot(n)?t:void 0,{tags:s,extra:o,user:i,contexts:a,level:c,fingerprint:u=[],propagationContext:d}=r||{};return this._tags={...this._tags,...s},this._extra={...this._extra,...o},this._contexts={...this._contexts,...a},i&&Object.keys(i).length&&(this._user=i),c&&(this._level=c),u.length&&(this._fingerprint=u),d&&(this._propagationContext=d),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,Ut(this,void 0),this._attachments=[],this.setPropagationContext({traceId:at(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){const r=typeof n=="number"?n:tp;if(r<=0)return this;const s={timestamp:Gt(),...t,message:t.message?pn(t.message,2048):t.message};return this._breadcrumbs.push(s),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:Gn(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=nr(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=n?.event_id||xe();if(!this._client)return T&&_.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:s,...n,event_id:r},this),r}captureMessage(t,n,r){const s=r?.event_id||xe();if(!this._client)return T&&_.warn("No client configured on scope - will not capture message!"),s;const o=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:o,...r,event_id:s},this),s}captureEvent(t,n){const r=n?.event_id||xe();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(T&&_.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function np(){return er("defaultCurrentScope",()=>new Qe)}function rp(){return er("defaultIsolationScope",()=>new Qe)}class sp{constructor(t,n){let r;t?r=t:r=new Qe;let s;n?s=n:s=new Qe,this._stack=[{scope:r}],this._isolationScope=s}withScope(t){const n=this._pushScope();let r;try{r=t(n)}catch(s){throw this._popScope(),s}return tr(r)?r.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function mn(){const e=pt(),t=Qn(e);return t.stack=t.stack||new sp(np(),rp())}function op(e){return mn().withScope(e)}function ip(e,t){const n=mn();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function ya(e){return mn().withScope(()=>e(mn().getIsolationScope()))}function ap(){return{withIsolationScope:ya,withScope:op,withSetScope:ip,withSetIsolationScope:(e,t)=>ya(t),getCurrentScope:()=>mn().getScope(),getIsolationScope:()=>mn().getIsolationScope()}}function Mt(e){const t=Qn(e);return t.acs?t.acs:ap()}function X(){const e=pt();return Mt(e).getCurrentScope()}function be(){const e=pt();return Mt(e).getIsolationScope()}function pi(){return er("globalScope",()=>new Qe)}function Ve(...e){const t=pt(),n=Mt(t);if(e.length===2){const[r,s]=e;return r?n.withSetScope(r,s):n.withScope(s)}return n.withScope(e[0])}function yI(...e){const t=pt(),n=Mt(t);if(e.length===2){const[r,s]=e;return r?n.withSetIsolationScope(r,s):n.withIsolationScope(s)}return n.withIsolationScope(e[0])}function A(){return X().getClient()}function Nu(e){const t=e.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:s}=t,o={trace_id:n,span_id:s||rr()};return r&&(o.parent_span_id=r),o}const Fe="sentry.source",hi="sentry.sample_rate",Lu="sentry.previous_trace_sample_rate",He="sentry.op",le="sentry.origin",ns="sentry.idle_span_finish_reason",sr="sentry.measurement_unit",or="sentry.measurement_value",Ro="sentry.custom_span_name",mi="sentry.profile_id",An="sentry.exclusive_time",cp="http.request.method",up="url.full",lp="sentry.link.type",dp=0,gi=1,fe=2;function fp(e){if(e<400&&e>=100)return{code:gi};if(e>=400&&e<500)switch(e){case 401:return{code:fe,message:"unauthenticated"};case 403:return{code:fe,message:"permission_denied"};case 404:return{code:fe,message:"not_found"};case 409:return{code:fe,message:"already_exists"};case 413:return{code:fe,message:"failed_precondition"};case 429:return{code:fe,message:"resource_exhausted"};case 499:return{code:fe,message:"cancelled"};default:return{code:fe,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:fe,message:"unimplemented"};case 503:return{code:fe,message:"unavailable"};case 504:return{code:fe,message:"deadline_exceeded"};default:return{code:fe,message:"internal_error"}}return{code:fe,message:"unknown_error"}}function rs(e,t){e.setAttribute("http.response.status_code",t);const n=fp(t);n.message!=="unknown_error"&&e.setStatus(n)}const Du="_sentryScope",Pu="_sentryIsolationScope";function pp(e,t,n){e&&(Ae(e,Pu,n),Ae(e,Du,t))}function ss(e){return{scope:e[Du],isolationScope:e[Pu]}}const _i="sentry-",hp=/^sentry-/,mp=8192;function Fu(e){const t=gp(e);if(!t)return;const n=Object.entries(t).reduce((r,[s,o])=>{if(s.match(hp)){const i=s.slice(_i.length);r[i]=o}return r},{});if(Object.keys(n).length>0)return n}function $u(e){if(!e)return;const t=Object.entries(e).reduce((n,[r,s])=>(s&&(n[`${_i}${r}`]=s),n),{});return _p(t)}function gp(e){if(!(!e||!je(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{const r=Sa(n);return Object.entries(r).forEach(([s,o])=>{t[s]=o}),t},{}):Sa(e)}function Sa(e){return e.split(",").map(t=>t.split("=").map(n=>{try{return decodeURIComponent(n.trim())}catch{return}})).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}function _p(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],s)=>{const o=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,i=s===0?o:`${t},${o}`;return i.length>mp?(T&&_.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):i},"")}function Wt(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const Bu=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function yp(e){if(!e)return;const t=e.match(Bu);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function Hu(e,t){const n=yp(e),r=Fu(t);if(!n?.traceId)return{traceId:at(),sampleRand:Math.random()};const s=Sp(n,r);r&&(r.sample_rand=s.toString());const{traceId:o,parentSpanId:i,parentSampled:a}=n;return{traceId:o,parentSpanId:i,sampled:a,dsc:r||{},sampleRand:s}}function Uu(e=at(),t=rr(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function Sp(e,t){const n=Wt(t?.sample_rand);if(n!==void 0)return n;const r=Wt(t?.sample_rate);return r&&e?.parentSampled!==void 0?e.parentSampled?Math.random()*r:r+Math.random()*(1-r):Math.random()}const Wu=0,yi=1;let ba=!1;function bp(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:s,parent_span_id:o,status:i,origin:a,links:c}=q(e);return{parent_span_id:o,span_id:t,trace_id:n,data:r,op:s,status:i,origin:a,links:c}}function zu(e){const{spanId:t,traceId:n,isRemote:r}=e.spanContext(),s=r?t:q(e).parent_span_id,o=ss(e).scope,i=r?o?.getPropagationContext().propagationSpanId||rr():t;return{parent_span_id:s,span_id:i,trace_id:n}}function Ep(e){const{traceId:t,spanId:n}=e.spanContext(),r=Vt(e);return Uu(t,n,r)}function ju(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:n,traceFlags:r,...s},attributes:o})=>({span_id:t,trace_id:n,sampled:r===yi,attributes:o,...s}))}function $t(e){return typeof e=="number"?Ea(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Ea(e.getTime()):he()}function Ea(e){return e>9999999999?e/1e3:e}function q(e){if(wp(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(vp(e)){const{attributes:r,startTime:s,name:o,endTime:i,status:a,links:c}=e,u="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0;return{span_id:t,trace_id:n,data:r,description:o,parent_span_id:u,start_timestamp:$t(s),timestamp:$t(i)||void 0,status:qu(a),op:r[He],origin:r[le],links:ju(c)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function vp(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function wp(e){return typeof e.getSpanJSON=="function"}function Vt(e){const{traceFlags:t}=e.spanContext();return t===yi}function qu(e){if(!(!e||e.code===dp))return e.code===gi?"ok":e.message||"unknown_error"}const Bt="_sentryChildSpans",xo="_sentryRootSpan";function Gu(e,t){const n=e[xo]||e;Ae(t,xo,n),e[Bt]?e[Bt].add(t):Ae(e,Bt,new Set([t]))}function Tp(e,t){e[Bt]&&e[Bt].delete(t)}function $r(e){const t=new Set;function n(r){if(!t.has(r)&&Vt(r)){t.add(r);const s=r[Bt]?Array.from(r[Bt]):[];for(const o of s)n(o)}}return n(e),Array.from(t)}function Se(e){return e[xo]||e}function Ee(){const e=pt(),t=Mt(e);return t.getActiveSpan?t.getActiveSpan():Gn(X())}function Mo(){ba||(Ct(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),ba=!0)}function SI(e,t){e.updateName(t),e.setAttributes({[Fe]:"custom",[Ro]:t})}let va=!1;function Ip(){if(va)return;function e(){const t=Ee(),n=t&&Se(t);if(n){const r="internal_error";T&&_.log(`[Tracing] Root span: ${r} -> Global error occurred`),n.setStatus({code:fe,message:r})}}e.tag="sentry_tracingErrorCallback",va=!0,vu(e),wu(e)}function It(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=e||A()?.getOptions();return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}const xs="production",kp=/^o(\d+)\./,Cp=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Rp(e){return e==="http"||e==="https"}function Yt(e,t=!1){const{host:n,path:r,pass:s,port:o,projectId:i,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&s?`:${s}`:""}@${n}${o?`:${o}`:""}/${r&&`${r}/`}${i}`}function Vu(e){const t=Cp.exec(e);if(!t){Ct(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,r,s="",o="",i="",a=""]=t.slice(1);let c="",u=a;const d=u.split("/");if(d.length>1&&(c=d.slice(0,-1).join("/"),u=d.pop()),u){const l=u.match(/^\d+/);l&&(u=l[0])}return Yu({host:o,pass:s,path:c,projectId:u,port:i,protocol:n,publicKey:r})}function Yu(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function xp(e){if(!T)return!0;const{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(i=>e[i]?!1:(_.error(`Invalid Sentry Dsn: ${i} missing`),!0))?!1:n.match(/^\d+$/)?Rp(r)?t&&isNaN(parseInt(t,10))?(_.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(_.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(_.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function Mp(e){return e.match(kp)?.[1]}function Xu(e){const t=typeof e=="string"?Vu(e):Yu(e);if(!(!t||!xp(t)))return t}const Ku="_frozenDsc";function Br(e,t){Ae(e,Ku,t)}function Ju(e,t){const n=t.getOptions(),{publicKey:r,host:s}=t.getDsn()||{};let o;n.orgId?o=String(n.orgId):s&&(o=Mp(s));const i={environment:n.environment||xs,release:n.release,public_key:r,trace_id:e,org_id:o};return t.emit("createDsc",i),i}function Si(e,t){const n=t.getPropagationContext();return n.dsc||Ju(n.traceId,e)}function Ge(e){const t=A();if(!t)return{};const n=Se(e),r=q(n),s=r.data,o=n.spanContext().traceState,i=o?.get("sentry.sample_rate")??s[hi]??s[Lu];function a(h){return(typeof i=="number"||typeof i=="string")&&(h.sample_rate=`${i}`),h}const c=n[Ku];if(c)return a(c);const u=o?.get("sentry.dsc"),d=u&&Fu(u);if(d)return a(d);const l=Ju(e.spanContext().traceId,t),f=s[Fe],p=r.description;return f!=="url"&&p&&(l.transaction=p),It()&&(l.sampled=String(Vt(n)),l.sample_rand=o?.get("sentry.sample_rand")??ss(n).scope?.getPropagationContext().sampleRand.toString()),a(l),t.emit("createDsc",l,n),l}function bI(e){const t=Ge(e);return $u(t)}class ct{constructor(t={}){this._traceId=t.traceId||at(),this._spanId=t.spanId||rr()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:Wu}}end(t){}setAttribute(t,n){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,n,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,n){}}function Ne(e,t=100,n=1/0){try{return Ao("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Zu(e,t=3,n=100*1024){const r=Ne(e,t);return Lp(r)>n?Zu(e,t-1,n):r}function Ao(e,t,n=1/0,r=1/0,s=Dp()){const[o,i]=s;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const a=Ap(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(o(t))return"[Circular ~]";const u=t;if(u&&typeof u.toJSON=="function")try{const p=u.toJSON();return Ao("",p,c-1,r,s)}catch{}const d=Array.isArray(t)?[]:{};let l=0;const f=Mu(t);for(const p in f){if(!Object.prototype.hasOwnProperty.call(f,p))continue;if(l>=r){d[p]="[MaxProperties ~]";break}const h=f[p];d[p]=Ao(p,h,c-1,r,s),l++}return i(t),d}function Ap(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(ku(t))return"[VueViewModel]";if(Wf(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${st(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=Op(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function Op(e){const t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}function Np(e){return~-encodeURI(e).split(/%..|./).length}function Lp(e){return Np(JSON.stringify(e))}function Dp(){const e=new WeakSet;function t(r){return e.has(r)?!0:(e.add(r),!1)}function n(r){e.delete(r)}return[t,n]}function ht(e,t=[]){return[e,t]}function Pp(e,t){const[n,r]=e;return[n,[...r,t]]}function zt(e,t){const n=e[1];for(const r of n){const s=r[0].type;if(t(r,s))return!0}return!1}function wa(e,t){return zt(e,(n,r)=>t.includes(r))}function os(e){const t=Qn(H);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function Fp(e){const t=Qn(H);return t.decodePolyfill?t.decodePolyfill(e):new TextDecoder().decode(e)}function is(e){const[t,n]=e;let r=JSON.stringify(t);function s(o){typeof r=="string"?r=typeof o=="string"?r+o:[os(r),o]:r.push(typeof o=="string"?os(o):o)}for(const o of n){const[i,a]=o;if(s(`
${JSON.stringify(i)}
`),typeof a=="string"||a instanceof Uint8Array)s(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(Ne(a))}s(c)}}return typeof r=="string"?r:$p(r)}function $p(e){const t=e.reduce((s,o)=>s+o.length,0),n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}function Bp(e){let t=typeof e=="string"?os(e):e;function n(i){const a=t.subarray(0,i);return t=t.subarray(i+1),a}function r(){let i=t.indexOf(10);return i<0&&(i=t.length),JSON.parse(Fp(n(i)))}const s=r(),o=[];for(;t.length;){const i=r(),a=typeof i.length=="number"?i.length:void 0;o.push([i,a?n(a):r()])}return[s,o]}function Hp(e){return[{type:"span"},e]}function Up(e){const t=typeof e.data=="string"?os(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const Wp={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item"};function Ta(e){return Wp[e]}function bi(e){if(!e?.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function Qu(e,t,n,r){const s=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Yt(r)},...s&&{trace:s}}}function zp(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function jp(e,t,n,r){const s=bi(n),o={sent_at:new Date().toISOString(),...s&&{sdk:s},...!!r&&t&&{dsn:Yt(t)}},i="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return ht(o,[i])}function qp(e,t,n,r){const s=bi(n),o=e.type&&e.type!=="replay_event"?e.type:"event";zp(e,n?.sdk);const i=Qu(e,s,r,t);return delete e.sdkProcessingMetadata,ht(i,[[{type:o},e]])}function Gp(e,t){function n(d){return!!d.trace_id&&!!d.public_key}const r=Ge(e[0]),s=t?.getDsn(),o=t?.getOptions().tunnel,i={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!o&&s&&{dsn:Yt(s)}},a=t?.getOptions().beforeSendSpan,c=a?d=>{const l=q(d),f=a(l);return f||(Mo(),l)}:q,u=[];for(const d of e){const l=c(d);l&&u.push(Hp(l))}return ht(i,u)}function Vp(e){if(!T)return;const{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=q(e),{spanId:s}=e.spanContext(),o=Vt(e),i=Se(e),a=i===e,c=`[Tracing] Starting ${o?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${t}`,`ID: ${s}`];if(r&&u.push(`parent ID: ${r}`),!a){const{op:d,description:l}=q(i);u.push(`root ID: ${i.spanContext().spanId}`),d&&u.push(`root op: ${d}`),l&&u.push(`root description: ${l}`)}_.log(`${c}
  ${u.join(`
  `)}`)}function Yp(e){if(!T)return;const{description:t="< unknown name >",op:n="< unknown op >"}=q(e),{spanId:r}=e.spanContext(),o=Se(e)===e,i=`[Tracing] Finishing "${n}" ${o?"root ":""}span "${t}" with ID ${r}`;_.log(i)}function Xp(e,t,n,r=Ee()){const s=r&&Se(r);s&&(T&&_.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),s.addEvent(e,{[or]:t,[sr]:n}))}function Ia(e){if(!e||e.length===0)return;const t={};return e.forEach(n=>{const r=n.attributes||{},s=r[sr],o=r[or];typeof s=="string"&&typeof o=="number"&&(t[n.name]={value:o,unit:s})}),t}const ka=1e3;class Ms{constructor(t={}){this._traceId=t.traceId||at(),this._spanId=t.spanId||rr(),this._startTime=t.startTimestamp||he(),this._links=t.links,this._attributes={},this.setAttributes({[le]:"manual",[He]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this._links?this._links.push(t):this._links=[t],this}addLinks(t){return this._links?this._links.push(...t):this._links=t,this}recordException(t,n){}spanContext(){const{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?yi:Wu}}setAttribute(t,n){return n===void 0?delete this._attributes[t]:this._attributes[t]=n,this}setAttributes(t){return Object.keys(t).forEach(n=>this.setAttribute(n,t[n])),this}updateStartTime(t){this._startTime=$t(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(Fe,"custom"),this}end(t){this._endTime||(this._endTime=$t(t),Yp(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[He],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:qu(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[le],profile_id:this._attributes[mi],exclusive_time:this._attributes[An],measurements:Ia(this._events),is_segment:this._isStandaloneSpan&&Se(this)===this||void 0,segment_id:this._isStandaloneSpan?Se(this).spanContext().spanId:void 0,links:ju(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,n,r){T&&_.log("[Tracing] Adding an event to span:",t);const s=Ca(n)?n:r||he(),o=Ca(n)?{}:n||{},i={name:t,time:$t(s),attributes:o};return this._events.push(i),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const t=A();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===Se(this)))return;if(this._isStandaloneSpan){this._sampled?Jp(Gp([this],t)):(T&&_.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(ss(this).scope||X()).captureEvent(r)}_convertSpanToTransaction(){if(!Ra(q(this)))return;this._name||(T&&_.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:t,isolationScope:n}=ss(this),r=t?.getScopeData().sdkProcessingMetadata?.normalizedRequest;if(this._sampled!==!0)return;const o=$r(this).filter(d=>d!==this&&!Kp(d)).map(d=>q(d)).filter(Ra),i=this._attributes[Fe];delete this._attributes[Ro],o.forEach(d=>{delete d.data[Ro]});const a={contexts:{trace:bp(this)},spans:o.length>ka?o.sort((d,l)=>d.start_timestamp-l.start_timestamp).slice(0,ka):o,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,dynamicSamplingContext:Ge(this)},request:r,...i&&{transaction_info:{source:i}}},c=Ia(this._events);return c&&Object.keys(c).length&&(T&&_.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),a.measurements=c),a}}function Ca(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function Ra(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function Kp(e){return e instanceof Ms&&e.isStandaloneSpan()}function Jp(e){const t=A();if(!t)return;const n=e[1];if(!n||n.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}function el(e,t,n=()=>{}){let r;try{r=e()}catch(s){throw t(s),n(),s}return Zp(r,t,n)}function Zp(e,t,n){return tr(e)?e.then(r=>(n(),r),r=>{throw t(r),n(),r}):(n(),e)}function Qp(e,t,n){if(!It(e))return[!1];let r,s;typeof e.tracesSampler=="function"?(s=e.tracesSampler({...t,inheritOrSampleWith:a=>typeof t.parentSampleRate=="number"?t.parentSampleRate:typeof t.parentSampled=="boolean"?Number(t.parentSampled):a}),r=!0):t.parentSampled!==void 0?s=t.parentSampled:typeof e.tracesSampleRate<"u"&&(s=e.tracesSampleRate,r=!0);const o=Wt(s);if(o===void 0)return T&&_.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(s)} of type ${JSON.stringify(typeof s)}.`),[!1];if(!o)return T&&_.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,o,r];const i=n<o;return i||T&&_.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(s)})`),[i,o,r]}const as="__SENTRY_SUPPRESS_TRACING__";function Ei(e,t){const n=ir();if(n.startSpan)return n.startSpan(e,t);const r=wi(e),{forceTransaction:s,parentSpan:o,scope:i}=e,a=i?.clone();return Ve(a,()=>tl(o)(()=>{const u=X(),d=Ti(u,o),f=e.onlyIfParent&&!d?new ct:vi({parentSpan:d,spanArguments:r,forceTransaction:s,scope:u});return Ut(u,f),el(()=>t(f),()=>{const{status:p}=q(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:fe,message:"internal_error"})},()=>{f.end()})}))}function EI(e,t){const n=ir();if(n.startSpanManual)return n.startSpanManual(e,t);const r=wi(e),{forceTransaction:s,parentSpan:o,scope:i}=e,a=i?.clone();return Ve(a,()=>tl(o)(()=>{const u=X(),d=Ti(u,o),f=e.onlyIfParent&&!d?new ct:vi({parentSpan:d,spanArguments:r,forceTransaction:s,scope:u});return Ut(u,f),el(()=>t(f,()=>f.end()),()=>{const{status:p}=q(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:fe,message:"internal_error"})})}))}function On(e){const t=ir();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=wi(e),{forceTransaction:r,parentSpan:s}=e;return(e.scope?i=>Ve(e.scope,i):s!==void 0?i=>As(s,i):i=>i())(()=>{const i=X(),a=Ti(i,s);return e.onlyIfParent&&!a?new ct:vi({parentSpan:a,spanArguments:n,forceTransaction:r,scope:i})})}const vI=(e,t)=>{const n=pt(),r=Mt(n);if(r.continueTrace)return r.continueTrace(e,t);const{sentryTrace:s,baggage:o}=e;return Ve(i=>{const a=Hu(s,o);return i.setPropagationContext(a),t()})};function As(e,t){const n=ir();return n.withActiveSpan?n.withActiveSpan(e,t):Ve(r=>(Ut(r,e||void 0),t(r)))}function wI(e){const t=ir();return t.suppressTracing?t.suppressTracing(e):Ve(n=>{n.setSDKProcessingMetadata({[as]:!0});const r=e();return n.setSDKProcessingMetadata({[as]:void 0}),r})}function TI(e){return Ve(t=>(t.setPropagationContext({traceId:at(),sampleRand:Math.random()}),T&&_.log(`Starting a new trace with id ${t.getPropagationContext().traceId}`),As(null,e)))}function vi({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!It()){const i=new ct;if(n||!e){const a={sampled:"false",sample_rate:"0",transaction:t.name,...Ge(i)};Br(i,a)}return i}const s=be();let o;if(e&&!n)o=eh(e,r,t),Gu(e,o);else if(e){const i=Ge(e),{traceId:a,spanId:c}=e.spanContext(),u=Vt(e);o=xa({traceId:a,parentSpanId:c,...t},r,u),Br(o,i)}else{const{traceId:i,dsc:a,parentSpanId:c,sampled:u}={...s.getPropagationContext(),...r.getPropagationContext()};o=xa({traceId:i,parentSpanId:c,...t},r,u),a&&Br(o,a)}return Vp(o),pp(o,r,s),o}function wi(e){const n={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const r={...n};return r.startTimestamp=$t(e.startTime),delete r.startTime,r}return n}function ir(){const e=pt();return Mt(e)}function xa(e,t,n){const r=A(),s=r?.getOptions()||{},{name:o=""}=e,i={spanAttributes:{...e.attributes},spanName:o,parentSampled:n};r?.emit("beforeSampling",i,{decision:!1});const a=i.parentSampled??n,c=i.spanAttributes,u=t.getPropagationContext(),[d,l,f]=t.getScopeData().sdkProcessingMetadata[as]?[!1]:Qp(s,{name:o,parentSampled:a,attributes:c,parentSampleRate:Wt(u.dsc?.sample_rate)},u.sampleRand),p=new Ms({...e,attributes:{[Fe]:"custom",[hi]:l!==void 0&&f?l:void 0,...c},sampled:d});return!d&&r&&(T&&_.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",p),p}function eh(e,t,n){const{spanId:r,traceId:s}=e.spanContext(),o=t.getScopeData().sdkProcessingMetadata[as]?!1:Vt(e),i=o?new Ms({...n,parentSpanId:r,traceId:s,sampled:o}):new ct({traceId:s});Gu(e,i);const a=A();return a&&(a.emit("spanStart",i),n.endTimestamp&&a.emit("spanEnd",i)),i}function Ti(e,t){if(t)return t;if(t===null)return;const n=Gn(e);if(!n)return;const r=A();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?Se(n):n}function tl(e){return e!==void 0?t=>As(e,t):t=>t()}const Hr={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},th="heartbeatFailed",nh="idleTimeout",rh="finalTimeout",sh="externalFinish";function nl(e,t={}){const n=new Map;let r=!1,s,o=sh,i=!t.disableAutoFinish;const a=[],{idleTimeout:c=Hr.idleTimeout,finalTimeout:u=Hr.finalTimeout,childSpanTimeout:d=Hr.childSpanTimeout,beforeSpanEnd:l}=t,f=A();if(!f||!It()){const S=new ct,w={sample_rate:"0",sampled:"false",...Ge(S)};return Br(S,w),S}const p=X(),h=Ee(),m=oh(e);m.end=new Proxy(m.end,{apply(S,w,x){if(l&&l(m),w instanceof ct)return;const[E,...I]=x,P=E||he(),v=$t(P),M=$r(m).filter(O=>O!==m);if(!M.length)return C(v),Reflect.apply(S,w,[v,...I]);const U=M.map(O=>q(O).timestamp).filter(O=>!!O),N=U.length?Math.max(...U):void 0,R=q(m).start_timestamp,F=Math.min(R?R+u/1e3:1/0,Math.max(R||-1/0,Math.min(v,N||1/0)));return C(F),Reflect.apply(S,w,[F,...I])}});function g(){s&&(clearTimeout(s),s=void 0)}function y(S){g(),s=setTimeout(()=>{!r&&n.size===0&&i&&(o=nh,m.end(S))},c)}function b(S){s=setTimeout(()=>{!r&&i&&(o=th,m.end(S))},d)}function L(S){g(),n.set(S,!0);const w=he();b(w+d/1e3)}function k(S){if(n.has(S)&&n.delete(S),n.size===0){const w=he();y(w+c/1e3)}}function C(S){r=!0,n.clear(),a.forEach(v=>v()),Ut(p,h);const w=q(m),{start_timestamp:x}=w;if(!x)return;w.data[ns]||m.setAttribute(ns,o),_.log(`[Tracing] Idle span "${w.op}" finished`);const I=$r(m).filter(v=>v!==m);let P=0;I.forEach(v=>{v.isRecording()&&(v.setStatus({code:fe,message:"cancelled"}),v.end(S),T&&_.log("[Tracing] Cancelling span since span ended early",JSON.stringify(v,void 0,2)));const M=q(v),{timestamp:U=0,start_timestamp:N=0}=M,R=N<=S,F=(u+c)/1e3,O=U-N<=F;if(T){const z=JSON.stringify(v,void 0,2);R?O||_.log("[Tracing] Discarding span since it finished after idle span final timeout",z):_.log("[Tracing] Discarding span since it happened after idle span was finished",z)}(!O||!R)&&(Tp(m,v),P++)}),P>0&&m.setAttribute("sentry.idle_span_discarded_spans",P)}return a.push(f.on("spanStart",S=>{if(r||S===m||q(S).timestamp||S instanceof Ms&&S.isStandaloneSpan())return;$r(m).includes(S)&&L(S.spanContext().spanId)})),a.push(f.on("spanEnd",S=>{r||k(S.spanContext().spanId)})),a.push(f.on("idleSpanEnableAutoFinish",S=>{S===m&&(i=!0,y(),n.size&&b())})),t.disableAutoFinish||y(),setTimeout(()=>{r||(m.setStatus({code:fe,message:"deadline_exceeded"}),o=rh,m.end())},u),m}function oh(e){const t=On(e);return Ut(X(),t),T&&_.log("[Tracing] Started span is an idle span"),t}const to=0,Ma=1,Aa=2;function ut(e){return new kt(t=>{t(e)})}function cs(e){return new kt((t,n)=>{n(e)})}class kt{constructor(t){this._state=to,this._handlers=[],this._runExecutor(t)}then(t,n){return new kt((r,s)=>{this._handlers.push([!1,o=>{if(!t)r(o);else try{r(t(o))}catch(i){s(i)}},o=>{if(!n)s(o);else try{r(n(o))}catch(i){s(i)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new kt((n,r)=>{let s,o;return this.then(i=>{o=!1,s=i,t&&t()},i=>{o=!0,s=i,t&&t()}).then(()=>{if(o){r(s);return}n(s)})})}_executeHandlers(){if(this._state===to)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===Ma&&n[1](this._value),this._state===Aa&&n[2](this._value),n[0]=!0)})}_runExecutor(t){const n=(o,i)=>{if(this._state===to){if(tr(i)){i.then(r,s);return}this._state=o,this._value=i,this._executeHandlers()}},r=o=>{n(Ma,o)},s=o=>{n(Aa,o)};try{t(r,s)}catch(o){s(o)}}}function Oo(e,t,n,r=0){return new kt((s,o)=>{const i=e[r];if(t===null||typeof i!="function")s(t);else{const a=i({...t},n);T&&i.id&&a===null&&_.log(`Event processor "${i.id}" dropped event`),tr(a)?a.then(c=>Oo(e,c,n,r+1).then(s)).then(null,o):Oo(e,a,n,r+1).then(s).then(null,o)}})}function ih(e,t){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:o}=t;ah(e,t),r&&lh(e,r),dh(e,n),ch(e,s),uh(e,o)}function us(e,t){const{extra:n,tags:r,user:s,contexts:o,level:i,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:d,attachments:l,propagationContext:f,transactionName:p,span:h}=t;_r(e,"extra",n),_r(e,"tags",r),_r(e,"user",s),_r(e,"contexts",o),e.sdkProcessingMetadata=nr(e.sdkProcessingMetadata,a,2),i&&(e.level=i),p&&(e.transactionName=p),h&&(e.span=h),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),d.length&&(e.eventProcessors=[...e.eventProcessors,...d]),l.length&&(e.attachments=[...e.attachments,...l]),e.propagationContext={...e.propagationContext,...f}}function _r(e,t,n){e[t]=nr(e[t],n,1)}function ah(e,t){const{extra:n,tags:r,user:s,contexts:o,level:i,transactionName:a}=t;Object.keys(n).length&&(e.extra={...n,...e.extra}),Object.keys(r).length&&(e.tags={...r,...e.tags}),Object.keys(s).length&&(e.user={...s,...e.user}),Object.keys(o).length&&(e.contexts={...o,...e.contexts}),i&&(e.level=i),a&&e.type!=="transaction"&&(e.transaction=a)}function ch(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function uh(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function lh(e,t){e.contexts={trace:zu(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:Ge(t),...e.sdkProcessingMetadata};const n=Se(t),r=q(n).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function dh(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}let yr,Oa,Sr;function rl(e){const t=H._sentryDebugIds;if(!t)return{};const n=Object.keys(t);return Sr&&n.length===Oa||(Oa=n.length,Sr=n.reduce((r,s)=>{yr||(yr={});const o=yr[s];if(o)r[o[0]]=o[1];else{const i=e(s);for(let a=i.length-1;a>=0;a--){const u=i[a]?.filename,d=t[s];if(u&&d){r[u]=d,yr[s]=[u,d];break}}}return r},{})),Sr}function fh(e,t){const n=rl(e);if(!n)return[];const r=[];for(const s of t)s&&n[s]&&r.push({type:"sourcemap",code_file:s,debug_id:n[s]});return r}function sl(e,t,n,r,s,o){const{normalizeDepth:i=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||xe(),timestamp:t.timestamp||Gt()},u=n.integrations||e.integrations.map(g=>g.name);ph(c,e),gh(c,u),s&&s.emit("applyFrameMetadata",t),t.type===void 0&&hh(c,e.stackParser);const d=yh(r,n.captureContext);n.mechanism&&Tt(c,n.mechanism);const l=s?s.getEventProcessors():[],f=pi().getScopeData();if(o){const g=o.getScopeData();us(f,g)}if(d){const g=d.getScopeData();us(f,g)}const p=[...n.attachments||[],...f.attachments];p.length&&(n.attachments=p),ih(c,f);const h=[...l,...f.eventProcessors];return Oo(h,c,n).then(g=>(g&&mh(g),typeof i=="number"&&i>0?_h(g,i,a):g))}function ph(e,t){const{environment:n,release:r,dist:s,maxValueLength:o=250}=t;e.environment=e.environment||n||xs,!e.release&&r&&(e.release=r),!e.dist&&s&&(e.dist=s);const i=e.request;i?.url&&(i.url=pn(i.url,o))}function hh(e,t){const n=rl(t);e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(s=>{s.filename&&(s.debug_id=n[s.filename])})})}function mh(e){const t={};if(e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(s=>{s.debug_id&&(s.abs_path?t[s.abs_path]=s.debug_id:s.filename&&(t[s.filename]=s.debug_id),delete s.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach(([r,s])=>{n.push({type:"sourcemap",code_file:r,debug_id:s})})}function gh(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function _h(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(s=>({...s,...s.data&&{data:Ne(s.data,t,n)}}))},...e.user&&{user:Ne(e.user,t,n)},...e.contexts&&{contexts:Ne(e.contexts,t,n)},...e.extra&&{extra:Ne(e.extra,t,n)}};return e.contexts?.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Ne(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(s=>({...s,...s.data&&{data:Ne(s.data,t,n)}}))),e.contexts?.flags&&r.contexts&&(r.contexts.flags=Ne(e.contexts.flags,3,n)),r}function yh(e,t){if(!t)return e;const n=e?e.clone():new Qe;return n.update(t),n}function Sh(e){if(e)return bh(e)?{captureContext:e}:vh(e)?{captureContext:e}:e}function bh(e){return e instanceof Qe||typeof e=="function"}const Eh=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function vh(e){return Object.keys(e).some(t=>Eh.includes(t))}function gn(e,t){return X().captureException(e,Sh(t))}function No(e,t){const n=typeof t=="string"?t:void 0,r=typeof t!="string"?{captureContext:t}:void 0;return X().captureMessage(e,n,r)}function Os(e,t){return X().captureEvent(e,t)}function wh(e,t){be().setContext(e,t)}function II(e){be().setExtras(e)}function kI(e,t){be().setExtra(e,t)}function CI(e){be().setTags(e)}function RI(e,t){be().setTag(e,t)}function xI(e){be().setUser(e)}function Th(){return be().lastEventId()}async function MI(e){const t=A();return t?t.flush(e):(T&&_.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function AI(e){const t=A();return t?t.close(e):(T&&_.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function OI(){return!!A()}function Ih(){const e=A();return e?.getOptions().enabled!==!1&&!!e?.getTransport()}function kh(e){be().addEventProcessor(e)}function Na(e){const t=be(),n=X(),{userAgent:r}=H.navigator||{},s=Zf({user:n.getUser()||t.getUser(),...r&&{userAgent:r},...e}),o=t.getSession();return o?.status==="ok"&&hn(o,{status:"exited"}),ol(),t.setSession(s),s}function ol(){const e=be(),n=X().getSession()||e.getSession();n&&Qf(n),il(),e.setSession()}function il(){const e=be(),t=A(),n=e.getSession();n&&t&&t.captureSession(n)}function La(e=!1){if(e){ol();return}il()}const Ch="7";function al(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function Rh(e){return`${al(e)}${e.projectId}/envelope/`}function xh(e,t){const n={sentry_version:Ch};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function cl(e,t,n){return t||`${Rh(e)}?${xh(e,n)}`}function Mh(e,t){const n=Xu(e);if(!n)return"";const r=`${al(n)}embed/error-page/`;let s=`dsn=${Yt(n)}`;for(const o in t)if(o!=="dsn"&&o!=="onClose")if(o==="user"){const i=t.user;if(!i)continue;i.name&&(s+=`&name=${encodeURIComponent(i.name)}`),i.email&&(s+=`&email=${encodeURIComponent(i.email)}`)}else s+=`&${encodeURIComponent(o)}=${encodeURIComponent(t[o])}`;return`${r}?${s}`}const Da=[];function Ah(e){const t={};return e.forEach(n=>{const{name:r}=n,s=t[r];s&&!s.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.values(t)}function Oh(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(s=>{s.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...t,...n];else if(typeof n=="function"){const s=n(t);r=Array.isArray(s)?s:[s]}else r=t;return Ah(r)}function Nh(e,t){const n={};return t.forEach(r=>{r&&ul(e,r,n)}),n}function Pa(e,t){for(const n of t)n?.afterAllSetup&&n.afterAllSetup(e)}function ul(e,t,n){if(n[t.name]){T&&_.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,Da.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),Da.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(s,o)=>r(s,o,e))}if(typeof t.processEvent=="function"){const r=t.processEvent.bind(t),s=Object.assign((o,i)=>r(o,i,e),{id:t.name});e.addEventProcessor(s)}T&&_.log(`Integration installed: ${t.name}`)}function Fa(e){const t=A();if(!t){T&&_.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`);return}t.addIntegration(e)}function Lh(e,t,n){const r=[{type:"client_report"},{timestamp:Gt(),discarded_events:e}];return ht(t?{dsn:t}:{},[r])}function ll(e){const t=[];e.message&&t.push(e.message);try{const n=e.exception.values[e.exception.values.length-1];n?.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function Dh(e){const{trace_id:t,parent_span_id:n,span_id:r,status:s,origin:o,data:i,op:a}=e.contexts?.trace??{};return{data:i??{},description:e.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:e.start_timestamp??0,status:s,timestamp:e.timestamp,trace_id:t??"",origin:o,profile_id:i?.[mi],exclusive_time:i?.[An],measurements:e.measurements,is_segment:!0}}function Ph(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[mi]:e.profile_id},...e.exclusive_time&&{[An]:e.exclusive_time}}}},measurements:e.measurements}}const $a="Not capturing exception because it's already been captured.",Ba="Discarded session because of missing or non-string release",dl=Symbol.for("SentryInternalError"),fl=Symbol.for("SentryDoNotSendEventError");function Ur(e){return{message:e,[dl]:!0}}function no(e){return{message:e,[fl]:!0}}function Ha(e){return!!e&&typeof e=="object"&&dl in e}function Ua(e){return!!e&&typeof e=="object"&&fl in e}class Fh{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=Xu(t.dsn):T&&_.warn("No DSN provided, client will not send events."),this._dsn){const n=cl(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,r){const s=xe();if(ga(t))return T&&_.log($a),s;const o={event_id:s,...n};return this._process(this.eventFromException(t,o).then(i=>this._captureEvent(i,o,r))),o.event_id}captureMessage(t,n,r,s){const o={event_id:xe(),...r},i=Cs(t)?t:String(t),a=fn(t)?this.eventFromMessage(i,n,o):this.eventFromException(t,o);return this._process(a.then(c=>this._captureEvent(c,o,s))),o.event_id}captureEvent(t,n,r){const s=xe();if(n?.originalException&&ga(n.originalException))return T&&_.log($a),s;const o={event_id:s,...n},i=t.sdkProcessingMetadata||{},a=i.capturedSpanScope,c=i.capturedSpanIsolationScope;return this._process(this._captureEvent(t,o,a||r,c)),o.event_id}captureSession(t){this.sendSession(t),hn(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(t).then(r=>n.flush(t).then(s=>r&&s))):ut(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const n=this._integrations[t.name];ul(this,t,this._integrations),n||Pa(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=qp(t,this._dsn,this._options._metadata,this._options.tunnel);for(const o of n.attachments||[])r=Pp(r,Up(o));const s=this.sendEnvelope(r);s&&s.then(o=>this.emit("afterSendEvent",t,o),null)}sendSession(t){const{release:n,environment:r=xs}=this._options;if("aggregates"in t){const o=t.attrs||{};if(!o.release&&!n){T&&_.warn(Ba);return}o.release=o.release||n,o.environment=o.environment||r,t.attrs=o}else{if(!t.release&&!n){T&&_.warn(Ba);return}t.release=t.release||n,t.environment=t.environment||r}this.emit("beforeSendSession",t);const s=jp(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(s)}recordDroppedEvent(t,n,r=1){if(this._options.sendClientReports){const s=`${t}:${n}`;T&&_.log(`Recording outcome: "${s}"${r>1?` (${r} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+r}}on(t,n){const r=this._hooks[t]=this._hooks[t]||[];return r.push(n),()=>{const s=r.indexOf(n);s>-1&&r.splice(s,1)}}emit(t,...n){const r=this._hooks[t];r&&r.forEach(s=>s(...n))}sendEnvelope(t){return this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport?this._transport.send(t).then(null,n=>(T&&_.error("Error while sending envelope:",n),n)):(T&&_.error("Transport disabled"),ut({}))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=Nh(this,t),Pa(this,t)}_updateSessionFromEvent(t,n){let r=n.level==="fatal",s=!1;const o=n.exception?.values;if(o){s=!0;for(const c of o)if(c.mechanism?.handled===!1){r=!0;break}}const i=t.status==="ok";(i&&t.errors===0||i&&r)&&(hn(t,{...r&&{status:"crashed"},errors:t.errors||Number(s||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new kt(n=>{let r=0;const s=1,o=setInterval(()=>{this._numProcessing==0?(clearInterval(o),n(!0)):(r+=s,t&&r>=t&&(clearInterval(o),n(!1)))},s)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,s){const o=this.getOptions(),i=Object.keys(this._integrations);return!n.integrations&&i?.length&&(n.integrations=i),this.emit("preprocessEvent",t,n),t.type||s.setLastEventId(t.event_id||n.event_id),sl(o,t,n,r,this,s).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:Nu(r),...a.contexts};const c=Si(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:c,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},r=X(),s=be()){return T&&Lo(t)&&_.log(`Captured error event \`${ll(t)[0]||"<unknown>"}\``),this._processEvent(t,n,r,s).then(o=>o.event_id,o=>{T&&(Ua(o)?_.log(o.message):Ha(o)?_.warn(o.message):_.warn(o))})}_processEvent(t,n,r,s){const o=this.getOptions(),{sampleRate:i}=o,a=pl(t),c=Lo(t),u=t.type||"error",d=`before send for type \`${u}\``,l=typeof i>"u"?void 0:Wt(i);if(c&&typeof l=="number"&&Math.random()>l)return this.recordDroppedEvent("sample_rate","error"),cs(no(`Discarding event because it's not included in the random sample (sampling rate = ${i})`));const f=u==="replay_event"?"replay":u;return this._prepareEvent(t,n,r,s).then(p=>{if(p===null)throw this.recordDroppedEvent("event_processor",f),no("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return p;const m=Bh(this,o,p,n);return $h(m,d)}).then(p=>{if(p===null){if(this.recordDroppedEvent("before_send",f),a){const y=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",y)}throw no(`${d} returned \`null\`, will not send event.`)}const h=r.getSession()||s.getSession();if(c&&h&&this._updateSessionFromEvent(h,p),a){const g=p.sdkProcessingMetadata?.spanCountBeforeProcessing||0,y=p.spans?p.spans.length:0,b=g-y;b>0&&this.recordDroppedEvent("before_send","span",b)}const m=p.transaction_info;if(a&&m&&p.transaction!==t.transaction){const g="custom";p.transaction_info={...m,source:g}}return this.sendEvent(p,n),p}).then(null,p=>{throw Ua(p)||Ha(p)?p:(this.captureException(p,{data:{__sentry__:!0},originalException:p}),Ur(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${p}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,r])=>{const[s,o]=n.split(":");return{reason:s,category:o,quantity:r}})}_flushOutcomes(){T&&_.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){T&&_.log("No outcomes to send");return}if(!this._dsn){T&&_.log("No dsn provided, will not send outcomes");return}T&&_.log("Sending outcomes:",t);const n=Lh(t,this._options.tunnel&&Yt(this._dsn));this.sendEnvelope(n)}}function $h(e,t){const n=`${t} must return \`null\` or a valid event.`;if(tr(e))return e.then(r=>{if(!ot(r)&&r!==null)throw Ur(n);return r},r=>{throw Ur(`${t} rejected with ${r}`)});if(!ot(e)&&e!==null)throw Ur(n);return e}function Bh(e,t,n,r){const{beforeSend:s,beforeSendTransaction:o,beforeSendSpan:i}=t;let a=n;if(Lo(a)&&s)return s(a,r);if(pl(a)){if(i){const c=i(Dh(a));if(c?a=nr(n,Ph(c)):Mo(),a.spans){const u=[];for(const d of a.spans){const l=i(d);l?u.push(l):(Mo(),u.push(d))}a.spans=u}}if(o){if(a.spans){const c=a.spans.length;a.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:c}}return o(a,r)}}return a}function Lo(e){return e.type===void 0}function pl(e){return e.type==="transaction"}function Hh(e,t){return t?Ve(t,()=>{const n=Ee(),r=n?zu(n):Nu(t);return[n?Ge(n):Si(e,t),r]}):[void 0,void 0]}const Uh={trace:1,debug:5,info:9,warn:13,error:17,fatal:21};function Wh(e){return[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]}function zh(e,t,n,r){const s={};return t?.sdk&&(s.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(s.dsn=Yt(r)),ht(s,[Wh(e)])}const jh=100;function qh(e){switch(typeof e){case"number":return Number.isInteger(e)?{value:e,type:"integer"}:{value:e,type:"double"};case"boolean":return{value:e,type:"boolean"};case"string":return{value:e,type:"string"};default:{let t="";try{t=JSON.stringify(e)??""}catch{}return{value:t,type:"string"}}}}function gt(e,t,n,r=!0){n&&(!e[t]||r)&&(e[t]=n)}function Gh(e,t){const n=Ii(),r=hl(e);r===void 0?n.set(e,[t]):(n.set(e,[...r,t]),r.length>=jh&&Wr(e,r))}function Do(e,t=A(),n=X(),r=Gh){if(!t){T&&_.warn("No client available to capture log.");return}const{release:s,environment:o,enableLogs:i,beforeSendLog:a,_experiments:c}=t.getOptions();if(!(i??c?.enableLogs)){T&&_.warn("logging option not enabled, log will not be captured.");return}const d=a??c?.beforeSendLog,[,l]=Hh(t,n),f={...e.attributes},{user:{id:p,email:h,username:m}}=Vh(n);gt(f,"user.id",p,!1),gt(f,"user.email",h,!1),gt(f,"user.name",m,!1),gt(f,"sentry.release",s),gt(f,"sentry.environment",o);const{name:g,version:y}=t.getSdkMetadata()?.sdk??{};gt(f,"sentry.sdk.name",g),gt(f,"sentry.sdk.version",y);const b=e.message;if(Cs(b)){const{__sentry_template_string__:P,__sentry_template_values__:v=[]}=b;f["sentry.message.template"]=P,v.forEach((M,U)=>{f[`sentry.message.parameter.${U}`]=M})}const L=Gn(n);gt(f,"sentry.trace.parent_span_id",L?.spanContext().spanId);const k={...e,attributes:f};t.emit("beforeCaptureLog",k);const C=d?Ct(()=>d(k)):k;if(!C){t.recordDroppedEvent("before_send","log_item",1),T&&_.warn("beforeSendLog returned null, log will not be captured.");return}const{level:S,message:w,attributes:x={},severityNumber:E}=C,I={timestamp:he(),level:S,body:w,trace_id:l?.trace_id,severity_number:E??Uh[S],attributes:Object.keys(x).reduce((P,v)=>(P[v]=qh(x[v]),P),{})};r(t,I),t.emit("afterCaptureLog",C)}function Wr(e,t){const n=t??hl(e)??[];if(n.length===0)return;const r=e.getOptions(),s=zh(n,r._metadata,r.tunnel,e.getDsn());Ii().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(s)}function hl(e){return Ii().get(e)}function Vh(e){const t=pi().getScopeData();return us(t,be().getScopeData()),us(t,e.getScopeData()),t}function Ii(){return er("clientToLogBufferMap",()=>new WeakMap)}function Yh(e,t){t.debug===!0&&(T?_.enable():Ct(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),X().update(t.initialScope);const r=new e(t);return Xh(r),r.init(),r}function Xh(e){X().setClient(e)}const ml=Symbol.for("SentryBufferFullError");function Kh(e){const t=[];function n(){return e===void 0||t.length<e}function r(i){return t.splice(t.indexOf(i),1)[0]||Promise.resolve(void 0)}function s(i){if(!n())return cs(ml);const a=i();return t.indexOf(a)===-1&&t.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function o(i){return new kt((a,c)=>{let u=t.length;if(!u)return a(!0);const d=setTimeout(()=>{i&&i>0&&a(!1)},i);t.forEach(l=>{ut(l).then(()=>{--u||(clearTimeout(d),a(!0))},c)})})}return{$:t,add:s,drain:o}}const Jh=60*1e3;function gl(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${e}`);return isNaN(r)?Jh:r-t}function Zh(e,t){return e[t]||e.all||0}function _l(e,t,n=Date.now()){return Zh(e,t)>n}function yl(e,{statusCode:t,headers:n},r=Date.now()){const s={...e},o=n?.["x-sentry-rate-limits"],i=n?.["retry-after"];if(o)for(const a of o.trim().split(",")){const[c,u,,,d]=a.split(":",5),l=parseInt(c,10),f=(isNaN(l)?60:l)*1e3;if(!u)s.all=r+f;else for(const p of u.split(";"))p==="metric_bucket"?(!d||d.split(";").includes("custom"))&&(s[p]=r+f):s[p]=r+f}else i?s.all=r+gl(i,r):t===429&&(s.all=r+60*1e3);return s}const Qh=64;function em(e,t,n=Kh(e.bufferSize||Qh)){let r={};const s=i=>n.drain(i);function o(i){const a=[];if(zt(i,(l,f)=>{const p=Ta(f);_l(r,p)?e.recordDroppedEvent("ratelimit_backoff",p):a.push(l)}),a.length===0)return ut({});const c=ht(i[0],a),u=l=>{zt(c,(f,p)=>{e.recordDroppedEvent(l,Ta(p))})},d=()=>t({body:is(c)}).then(l=>(l.statusCode!==void 0&&(l.statusCode<200||l.statusCode>=300)&&T&&_.warn(`Sentry responded with status code ${l.statusCode} to sent event.`),r=yl(r,l),l),l=>{throw u("network_error"),T&&_.error("Encountered error running transport request:",l),l});return n.add(d).then(l=>l,l=>{if(l===ml)return T&&_.error("Skipped sending event because buffer is full."),u("queue_overflow"),ut({});throw l})}return{send:o,flush:s}}const ro=100,so=5e3,tm=36e5;function nm(e){function t(...n){T&&_.log("[Offline]:",...n)}return n=>{const r=e(n);if(!n.createStore)throw new Error("No `createStore` function was provided");const s=n.createStore(n);let o=so,i;function a(l,f,p){return wa(l,["client_report"])?!1:n.shouldStore?n.shouldStore(l,f,p):!0}function c(l){i&&clearTimeout(i),i=setTimeout(async()=>{i=void 0;const f=await s.shift();f&&(t("Attempting to send previously queued event"),f[0].sent_at=new Date().toISOString(),d(f,!0).catch(p=>{t("Failed to retry sending",p)}))},l),typeof i!="number"&&i.unref&&i.unref()}function u(){i||(c(o),o=Math.min(o*2,tm))}async function d(l,f=!1){if(!f&&wa(l,["replay_event","replay_recording"]))return await s.push(l),c(ro),{};try{if(n.shouldSend&&await n.shouldSend(l)===!1)throw new Error("Envelope not sent because `shouldSend` callback returned false");const p=await r.send(l);let h=ro;if(p){if(p.headers?.["retry-after"])h=gl(p.headers["retry-after"]);else if(p.headers?.["x-sentry-rate-limits"])h=6e4;else if((p.statusCode||0)>=400)return p}return c(h),o=so,p}catch(p){if(await a(l,p,o))return f?await s.unshift(l):await s.push(l),u(),t("Error sending. Event queued.",p),{};throw p}}return n.flushAtStartup&&u(),{send:d,flush:l=>(l===void 0&&(o=so,c(ro)),r.flush(l))}}}function Sl(e,t){let n;return zt(e,(r,s)=>(t.includes(s)&&(n=Array.isArray(r)?r[1]:void 0),!!n)),n}function rm(e,t){return n=>{const r=e(n);return{...r,send:async s=>{const o=Sl(s,["event","transaction","profile","replay_event"]);return o&&(o.release=t),r.send(s)}}}}function sm(e,t){return ht(t?{...e[0],dsn:t}:e[0],e[1])}function NI(e,t){return n=>{const r=e(n),s=new Map;function o(c,u){const d=u?`${c}:${u}`:c;let l=s.get(d);if(!l){const f=Vu(c);if(!f)return;const p=cl(f,n.tunnel);l=u?rm(e,u)({...n,url:p}):e({...n,url:p}),s.set(d,l)}return[c,l]}async function i(c){function u(p){const h=p?.length?p:["event"];return Sl(c,h)}const d=t({envelope:c,getEvent:u}).map(p=>typeof p=="string"?o(p,void 0):o(p.dsn,p.release)).filter(p=>!!p),l=d.length?d:[["",r]];return(await Promise.all(l.map(([p,h])=>h.send(sm(c,p)))))[0]}async function a(c){const u=[...s.values(),r];return(await Promise.all(u.map(l=>l.flush(c)))).every(l=>l)}return{send:i,flush:a}}}function bl(e,t){const n=t?.getDsn(),r=t?.getOptions().tunnel;return im(e,n)||om(e,r)}function om(e,t){return t?Wa(e)===Wa(t):!1}function im(e,t){return t?e.includes(t.host):!1}function Wa(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function am(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n}const cm=am;function um(e){e.user?.ip_address===void 0&&(e.user={...e.user,ip_address:"{{auto}}"})}function lm(e){"aggregates"in e?e.attrs?.ip_address===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function dm(e,t,n=[t],r="npm"){const s=e._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${t}`,packages:n.map(o=>({name:`${r}:@sentry/${o}`,version:Et})),version:Et}),e._metadata=s}function El(e={}){const t=e.client||A();if(!Ih()||!t)return{};const n=pt(),r=Mt(n);if(r.getTraceData)return r.getTraceData(e);const s=e.scope||X(),o=e.span||Ee(),i=o?Ep(o):fm(s),a=o?Ge(o):Si(t,s),c=$u(a);return Bu.test(i)?{"sentry-trace":i,baggage:c}:(_.warn("Invalid sentry-trace data. Cannot generate trace data"),{})}function fm(e){const{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return Uu(t,r,n)}function pm(e,t,n){let r,s,o;const i=n?.maxWait?Math.max(n.maxWait,t):0,a=n?.setTimeoutImpl||setTimeout;function c(){return u(),r=e(),r}function u(){s!==void 0&&clearTimeout(s),o!==void 0&&clearTimeout(o),s=o=void 0}function d(){return s!==void 0||o!==void 0?c():r}function l(){return s&&clearTimeout(s),s=a(c,t),i&&o===void 0&&(o=a(c,i)),r}return l.cancel=u,l.flush=d,l}const hm=100;function lt(e,t){const n=A(),r=be();if(!n)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:o=hm}=n.getOptions();if(o<=0)return;const a={timestamp:Gt(),...e},c=s?Ct(()=>s(a,t)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,t),r.addBreadcrumb(c,o))}let za;const mm="FunctionToString",ja=new WeakMap,gm=(()=>({name:mm,setupOnce(){za=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=fi(this),n=ja.has(A())&&t!==void 0?t:this;return za.apply(n,e)}}catch{}},setup(e){ja.set(e,!0)}})),_m=gm,ym=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],Sm="EventFilters",bm=(e={})=>{let t;return{name:Sm,setup(n){const r=n.getOptions();t=qa(e,r)},processEvent(n,r,s){if(!t){const o=s.getOptions();t=qa(e,o)}return vm(n,t)?null:n}}},Em=((e={})=>({...bm(e),name:"InboundFilters"}));function qa(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:ym],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function vm(e,t){if(e.type){if(e.type==="transaction"&&Tm(e,t.ignoreTransactions))return T&&_.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Nt(e)}`),!0}else{if(wm(e,t.ignoreErrors))return T&&_.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Nt(e)}`),!0;if(Rm(e))return T&&_.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Nt(e)}`),!0;if(Im(e,t.denyUrls))return T&&_.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Nt(e)}.
Url: ${ls(e)}`),!0;if(!km(e,t.allowUrls))return T&&_.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Nt(e)}.
Url: ${ls(e)}`),!0}return!1}function wm(e,t){return t?.length?ll(e).some(n=>qe(n,t)):!1}function Tm(e,t){if(!t?.length)return!1;const n=e.transaction;return n?qe(n,t):!1}function Im(e,t){if(!t?.length)return!1;const n=ls(e);return n?qe(n,t):!1}function km(e,t){if(!t?.length)return!0;const n=ls(e);return n?qe(n,t):!0}function Cm(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function ls(e){try{const n=[...e.exception?.values??[]].reverse().find(r=>r.mechanism?.parent_id===void 0&&r.stacktrace?.frames?.length)?.stacktrace?.frames;return n?Cm(n):null}catch{return T&&_.error(`Cannot extract url for event ${Nt(e)}`),null}}function Rm(e){return e.exception?.values?.length?!e.message&&!e.exception.values.some(t=>t.stacktrace||t.type&&t.type!=="Error"||t.value):!1}function xm(e,t,n,r,s,o){if(!s.exception?.values||!o||!it(o.originalException,Error))return;const i=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;i&&(s.exception.values=Po(e,t,r,o.originalException,n,s.exception.values,i,0))}function Po(e,t,n,r,s,o,i,a){if(o.length>=n+1)return o;let c=[...o];if(it(r[s],Error)){Ga(i,a);const u=e(t,r[s]),d=c.length;Va(u,s,d,a),c=Po(e,t,n,r[s],s,[u,...c],u,d)}return Array.isArray(r.errors)&&r.errors.forEach((u,d)=>{if(it(u,Error)){Ga(i,a);const l=e(t,u),f=c.length;Va(l,`errors[${d}]`,f,a),c=Po(e,t,n,u,s,[l,...c],l,f)}}),c}function Ga(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function Va(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}const vl=new Map,Ya=new Set;function Mm(e){if(H._sentryModuleMetadata)for(const t of Object.keys(H._sentryModuleMetadata)){const n=H._sentryModuleMetadata[t];if(Ya.has(t))continue;Ya.add(t);const r=e(t);for(const s of r.reverse())if(s.filename){vl.set(s.filename,n);break}}}function Am(e,t){return Mm(e),vl.get(t)}function wl(e,t){try{t.exception.values.forEach(n=>{if(n.stacktrace)for(const r of n.stacktrace.frames||[]){if(!r.filename||r.module_metadata)continue;const s=Am(e,r.filename);s&&(r.module_metadata=s)}})}catch{}}function Tl(e){try{e.exception.values.forEach(t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[])delete n.module_metadata})}catch{}}const LI=()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",t=>{zt(t,(n,r)=>{if(r==="event"){const s=Array.isArray(n)?n[1]:void 0;s&&(Tl(s),n[1]=s)}})}),e.on("applyFrameMetadata",t=>{if(t.type)return;const n=e.getOptions().stackParser;wl(n,t)})}});function ki(e){const t="console";Rt(t,e),xt(t,Om)}function Om(){"console"in H&&ci.forEach(function(e){e in H.console&&Re(H.console,e,function(t){return es[e]=t,function(...n){$e("console",{args:n,level:e}),es[e]?.apply(H.console,n)}})})}function Ci(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const Nm="CaptureConsole",Lm=((e={})=>{const t=e.levels||ci,n=e.handled??!0;return{name:Nm,setup(r){"console"in H&&ki(({args:s,level:o})=>{A()!==r||!t.includes(o)||Dm(s,o,n)})}}}),DI=Lm;function Dm(e,t,n){const r={level:Ci(t),extra:{arguments:e}};Ve(s=>{if(s.addEventProcessor(a=>(a.logger="console",Tt(a,{handled:n,type:"console"}),a)),t==="assert"){if(!e[0]){const a=`Assertion failed: ${ts(e.slice(1)," ")||"console.assert"}`;s.setExtra("arguments",e.slice(1)),No(a,r)}return}const o=e.find(a=>a instanceof Error);if(o){gn(o,r);return}const i=ts(e," ");No(i,r)})}const Pm="Dedupe",Fm=(()=>{let e;return{name:Pm,processEvent(t){if(t.type)return t;try{if(Bm(t,e))return T&&_.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}}),$m=Fm;function Bm(e,t){return t?!!(Hm(e,t)||Um(e,t)):!1}function Hm(e,t){const n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!kl(e,t)||!Il(e,t))}function Um(e,t){const n=Xa(t),r=Xa(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!kl(e,t)||!Il(e,t))}function Il(e,t){let n=Io(e),r=Io(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let s=0;s<r.length;s++){const o=r[s],i=n[s];if(o.filename!==i.filename||o.lineno!==i.lineno||o.colno!==i.colno||o.function!==i.function)return!1}return!0}function kl(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function Xa(e){return e.exception?.values?.[0]}const Wm="ExtraErrorData",zm=((e={})=>{const{depth:t=3,captureErrorCause:n=!0}=e;return{name:Wm,processEvent(r,s,o){const{maxValueLength:i=250}=o.getOptions();return jm(r,s,t,n,i)}}}),PI=zm;function jm(e,t={},n,r,s){if(!t.originalException||!vt(t.originalException))return e;const o=t.originalException.name||t.originalException.constructor.name,i=qm(t.originalException,r,s);if(i){const a={...e.contexts},c=Ne(i,n);return ot(c)&&(Ae(c,"__sentry_skip_normalization__",!0),a[o]=c),{...e,contexts:a}}return e}function qm(e,t,n){try{const r=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],s={};for(const o of Object.keys(e)){if(r.indexOf(o)!==-1)continue;const i=e[o];s[o]=vt(i)||typeof i=="string"?pn(`${i}`,n):i}if(t&&e.cause!==void 0&&(s.cause=vt(e.cause)?e.cause.toString():e.cause),typeof e.toJSON=="function"){const o=e.toJSON();for(const i of Object.keys(o)){const a=o[i];s[i]=vt(a)?a.toString():a}}return s}catch(r){T&&_.error("Unable to extract extra data from the Error object:",r)}return null}function Gm(e,t){let n=0;for(let r=e.length-1;r>=0;r--){const s=e[r];s==="."?e.splice(r,1):s===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}const Vm=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function Ym(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=Vm.exec(t);return n?n.slice(1):[]}function Ka(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const s=r>=0?e[r]:"/";s&&(t=`${s}/${t}`,n=s.charAt(0)==="/")}return t=Gm(t.split("/").filter(r=>!!r),!n).join("/"),(n?"/":"")+t||"."}function Ja(e){let t=0;for(;t<e.length&&e[t]==="";t++);let n=e.length-1;for(;n>=0&&e[n]==="";n--);return t>n?[]:e.slice(t,n-t+1)}function Xm(e,t){e=Ka(e).slice(1),t=Ka(t).slice(1);const n=Ja(e.split("/")),r=Ja(t.split("/")),s=Math.min(n.length,r.length);let o=s;for(let a=0;a<s;a++)if(n[a]!==r[a]){o=a;break}let i=[];for(let a=o;a<n.length;a++)i.push("..");return i=i.concat(r.slice(o)),i.join("/")}function Km(e,t){return Ym(e)[2]||""}const Jm="RewriteFrames",FI=(e={})=>{const t=e.root,n=e.prefix||"app:///",r="window"in H&&!!H.window,s=e.iteratee||Zm({isBrowser:r,root:t,prefix:n});function o(a){try{return{...a,exception:{...a.exception,values:a.exception.values.map(c=>({...c,...c.stacktrace&&{stacktrace:i(c.stacktrace)}}))}}}catch{return a}}function i(a){return{...a,frames:a?.frames?.map(c=>s(c))}}return{name:Jm,processEvent(a){let c=a;return a.exception&&Array.isArray(a.exception.values)&&(c=o(c)),c}}};function Zm({isBrowser:e,root:t,prefix:n}){return r=>{if(!r.filename)return r;const s=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),o=/^\//.test(r.filename);if(e){if(t){const i=r.filename;i.indexOf(t)===0&&(r.filename=i.replace(t,n))}}else if(s||o){const i=s?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,a=t?Xm(t,i):Km(i);r.filename=`${n}${a}`}return r}}const Qm=["reauthenticate","signInAnonymously","signInWithOAuth","signInWithIdToken","signInWithOtp","signInWithPassword","signInWithSSO","signOut","signUp","verifyOtp"],eg=["createUser","deleteUser","listUsers","getUserById","updateUserById","inviteUserByEmail"],tg={eq:"eq",neq:"neq",gt:"gt",gte:"gte",lt:"lt",lte:"lte",like:"like","like(all)":"likeAllOf","like(any)":"likeAnyOf",ilike:"ilike","ilike(all)":"ilikeAllOf","ilike(any)":"ilikeAnyOf",is:"is",in:"in",cs:"contains",cd:"containedBy",sr:"rangeGt",nxl:"rangeGte",sl:"rangeLt",nxr:"rangeLte",adj:"rangeAdjacent",ov:"overlaps",fts:"",plfts:"plain",phfts:"phrase",wfts:"websearch",not:"not"},Cl=["select","insert","upsert","update","delete"];function Ns(e){try{e.__SENTRY_INSTRUMENTED__=!0}catch{}}function Ls(e){try{return e.__SENTRY_INSTRUMENTED__}catch{return!1}}function ng(e,t={}){switch(e){case"GET":return"select";case"POST":return t.Prefer?.includes("resolution=")?"upsert":"insert";case"PATCH":return"update";case"DELETE":return"delete";default:return"<unknown-op>"}}function rg(e,t){if(t===""||t==="*")return"select(*)";if(e==="select")return`select(${t})`;if(e==="or"||e.endsWith(".or"))return`${e}${t}`;const[n,...r]=t.split(".");let s;return n?.startsWith("fts")?s="textSearch":n?.startsWith("plfts")?s="textSearch[plain]":n?.startsWith("phfts")?s="textSearch[phrase]":n?.startsWith("wfts")?s="textSearch[websearch]":s=n&&tg[n]||"filter",`${s}(${e}, ${r.join(".")})`}function Za(e,t=!1){return new Proxy(e,{apply(n,r,s){return Ei({name:`auth ${t?"(admin) ":""}${e.name}`,attributes:{[le]:"auto.db.supabase",[He]:"db","db.system":"postgresql","db.operation":`auth.${t?"admin.":""}${e.name}`}},o=>Reflect.apply(n,r,s).then(i=>(i&&typeof i=="object"&&"error"in i&&i.error?(o.setStatus({code:fe}),gn(i.error,{mechanism:{handled:!1}})):o.setStatus({code:gi}),o.end(),i)).catch(i=>{throw o.setStatus({code:fe}),o.end(),gn(i,{mechanism:{handled:!1}}),i}).then(...s))}})}function sg(e){const t=e.auth;if(!(!t||Ls(e.auth))){for(const n of Qm){const r=t[n];r&&typeof e.auth[n]=="function"&&(e.auth[n]=Za(r))}for(const n of eg){const r=t.admin[n];r&&typeof e.auth.admin[n]=="function"&&(e.auth.admin[n]=Za(r,!0))}Ns(e.auth)}}function og(e){Ls(e.prototype.from)||(e.prototype.from=new Proxy(e.prototype.from,{apply(t,n,r){const s=Reflect.apply(t,n,r),o=s.constructor;return ag(o),s}}),Ns(e.prototype.from))}function ig(e){Ls(e.prototype.then)||(e.prototype.then=new Proxy(e.prototype.then,{apply(t,n,r){const s=Cl,o=n,i=ng(o.method,o.headers);if(!s.includes(i)||!o?.url?.pathname||typeof o.url.pathname!="string")return Reflect.apply(t,n,r);const a=o.url.pathname.split("/"),c=a.length>0?a[a.length-1]:"",u=[];for(const[p,h]of o.url.searchParams.entries())u.push(rg(p,h));const d=Object.create(null);if(ot(o.body))for(const[p,h]of Object.entries(o.body))d[p]=h;const l=`${i==="select"?"":`${i}${d?"(...) ":""}`}${u.join(" ")} from(${c})`,f={"db.table":c,"db.schema":o.schema,"db.url":o.url.origin,"db.sdk":o.headers["X-Client-Info"],"db.system":"postgresql","db.operation":i,[le]:"auto.db.supabase",[He]:"db"};return u.length&&(f["db.query"]=u),Object.keys(d).length&&(f["db.body"]=d),Ei({name:l,attributes:f},p=>Reflect.apply(t,n,[]).then(h=>{if(p&&(h&&typeof h=="object"&&"status"in h&&rs(p,h.status||500),p.end()),h.error){const y=new Error(h.error.message);h.error.code&&(y.code=h.error.code),h.error.details&&(y.details=h.error.details);const b={};u.length&&(b.query=u),Object.keys(d).length&&(b.body=d),gn(y,{contexts:{supabase:b}})}const m={type:"supabase",category:`db.${i}`,message:l},g={};return u.length&&(g.query=u),Object.keys(d).length&&(g.body=d),Object.keys(g).length&&(m.data=g),lt(m),h},h=>{throw p&&(rs(p,500),p.end()),h}).then(...r))}}),Ns(e.prototype.then))}function ag(e){for(const t of Cl)Ls(e.prototype[t])||(e.prototype[t]=new Proxy(e.prototype[t],{apply(n,r,s){const o=Reflect.apply(n,r,s),i=o.constructor;return T&&_.log(`Instrumenting ${t} operation's PostgRESTFilterBuilder`),ig(i),o}}),Ns(e.prototype[t]))}const cg=e=>{if(!e){T&&_.warn("Supabase integration was not installed because no Supabase client was provided.");return}const t=e.constructor===Function?e:e.constructor;og(t),sg(e)},ug="Supabase",lg=(e=>({setupOnce(){cg(e)},name:ug})),$I=e=>lg(e.supabaseClient),dg=10,fg="ZodErrors";function pg(e){return vt(e)&&e.name==="ZodError"&&Array.isArray(e.issues)}function hg(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function mg(e){return e.map(t=>typeof t=="number"?"<array>":t).join(".")}function gg(e){const t=new Set;for(const r of e.issues){const s=mg(r.path);s.length>0&&t.add(s)}const n=Array.from(t);if(n.length===0){let r="variable";if(e.issues.length>0){const s=e.issues[0];s!==void 0&&"expected"in s&&typeof s.expected=="string"&&(r=s.expected)}return`Failed to validate ${r}`}return`Failed to validate keys: ${pn(n.join(", "),100)}`}function _g(e,t=!1,n,r){if(!n.exception?.values||!r.originalException||!pg(r.originalException)||r.originalException.issues.length===0)return n;try{const o=(t?r.originalException.issues:r.originalException.issues.slice(0,e)).map(hg);return t&&(Array.isArray(r.attachments)||(r.attachments=[]),r.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:o})})),{...n,exception:{...n.exception,values:[{...n.exception.values[0],value:gg(r.originalException)},...n.exception.values.slice(1)]},extra:{...n.extra,"zoderror.issues":o.slice(0,e)}}}catch(s){return{...n,extra:{...n.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:s instanceof Error?`${s.name}: ${s.message}
${s.stack}`:"unknown"}}}}}const yg=((e={})=>{const t=e.limit??dg;return{name:fg,processEvent(n,r){return _g(t,e.saveZodIssuesAsAttachment,n,r)}}}),BI=yg,HI=e=>({name:"ThirdPartyErrorsFilter",setup(t){t.on("beforeEnvelope",n=>{zt(n,(r,s)=>{if(s==="event"){const o=Array.isArray(r)?r[1]:void 0;o&&(Tl(o),r[1]=o)}})}),t.on("applyFrameMetadata",n=>{if(n.type)return;const r=t.getOptions().stackParser;wl(r,n)})},processEvent(t){const n=Sg(t);if(n){const r=e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="apply-tag-if-contains-third-party-frames"?"some":"every";if(n[r](o=>!o.some(i=>e.filterKeys.includes(i)))){if(e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="drop-error-if-exclusively-contains-third-party-frames")return null;t.tags={...t.tags,third_party_code:!0}}}return t}});function Sg(e){const t=Io(e);if(t)return t.filter(n=>!!n.filename).map(n=>n.module_metadata?Object.keys(n.module_metadata).filter(r=>r.startsWith(Qa)).map(r=>r.slice(Qa.length)):[])}const Qa="_sentryBundlerPluginAppKey:",bg=100,Eg=10,br="flag.evaluation.";function ar(e){const n=X().getScopeData().contexts.flags,r=n?n.values:[];return r.length&&(e.contexts===void 0&&(e.contexts={}),e.contexts.flags={values:[...r]}),e}function _n(e,t,n=bg){const r=X().getScopeData().contexts;r.flags||(r.flags={values:[]});const s=r.flags.values;vg(s,e,t,n)}function vg(e,t,n,r){if(typeof n!="boolean")return;if(e.length>r){T&&_.error(`[Feature Flags] insertToFlagBuffer called on a buffer larger than maxSize=${r}`);return}const s=e.findIndex(o=>o.flag===t);s!==-1&&e.splice(s,1),e.length===r&&e.shift(),e.push({flag:t,result:n})}function yn(e,t,n=Eg){if(typeof t!="boolean")return;const r=Ee();if(!r)return;const s=q(r).data;if(`${br}${e}`in s){r.setAttribute(`${br}${e}`,t);return}Object.keys(s).filter(i=>i.startsWith(br)).length<n&&r.setAttribute(`${br}${e}`,t)}const UI=()=>({name:"FeatureFlags",processEvent(e,t,n){return ar(e)},addFeatureFlag(e,t){_n(e,t),yn(e,t)}}),wg="thismessage:/";function Rl(e){return"isRelative"in e}function xl(e,t){const n=e.indexOf("://")<=0&&e.indexOf("//")!==0,r=n?wg:void 0;try{if("canParse"in URL&&!URL.canParse(e,r))return;const s=new URL(e,r);return n?{isRelative:n,pathname:s.pathname,search:s.search,hash:s.hash}:s}catch{}}function Tg(e){if(Rl(e))return e.pathname;const t=new URL(e);return t.search="",t.hash="",["80","443"].includes(t.port)&&(t.port=""),t.password&&(t.password="%filtered%"),t.username&&(t.username="%filtered%"),t.toString()}function Ht(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function Ml(e){return e.split(/[?#]/,1)[0]}function Ig(e,t,n,r,s="auto.http.browser"){if(!e.fetchData)return;const{method:o,url:i}=e.fetchData,a=It()&&t(i);if(e.endTimestamp&&a){const l=e.fetchData.__span;if(!l)return;const f=r[l];f&&(Cg(f,e),delete r[l]);return}const c=!!Ee(),u=a&&c?On(xg(i,o,s)):new ct;if(e.fetchData.__span=u.spanContext().spanId,r[u.spanContext().spanId]=u,n(e.fetchData.url)){const l=e.args[0],f=e.args[1]||{},p=kg(l,f,It()&&c?u:void 0);p&&(e.args[1]=f,f.headers=p)}const d=A();if(d){const l={input:e.args,response:e.response,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp};d.emit("beforeOutgoingRequestSpan",u,l)}return u}function kg(e,t,n){const r=El({span:n}),s=r["sentry-trace"],o=r.baggage;if(!s)return;const i=t.headers||(Cu(e)?e.headers:void 0);if(i)if(Rg(i)){const a=new Headers(i);if(a.get("sentry-trace")||a.set("sentry-trace",s),o){const c=a.get("baggage");c?Er(c)||a.set("baggage",`${c},${o}`):a.set("baggage",o)}return a}else if(Array.isArray(i)){const a=[...i];i.find(u=>u[0]==="sentry-trace")||a.push(["sentry-trace",s]);const c=i.find(u=>u[0]==="baggage"&&Er(u[1]));return o&&!c&&a.push(["baggage",o]),a}else{const a="sentry-trace"in i?i["sentry-trace"]:void 0,c="baggage"in i?i.baggage:void 0,u=c?Array.isArray(c)?[...c]:[c]:[],d=c&&(Array.isArray(c)?c.find(l=>Er(l)):Er(c));return o&&!d&&u.push(o),{...i,"sentry-trace":a??s,baggage:u.length>0?u.join(","):void 0}}else return{...r}}function Cg(e,t){if(t.response){rs(e,t.response.status);const n=t.response?.headers?.get("content-length");if(n){const r=parseInt(n);r>0&&e.setAttribute("http.response_content_length",r)}}else t.error&&e.setStatus({code:fe,message:"internal_error"});e.end()}function Er(e){return e.split(",").some(t=>t.trim().startsWith(_i))}function Rg(e){return typeof Headers<"u"&&it(e,Headers)}function xg(e,t,n){const r=xl(e);return{name:r?`${t} ${Tg(r)}`:t,attributes:Mg(e,r,t,n)}}function Mg(e,t,n,r){const s={url:e,type:"fetch","http.method":n,[le]:r,[He]:"http.client"};return t&&(Rl(t)||(s["http.url"]=t.href,s["server.address"]=t.host),t.search&&(s["http.query"]=t.search),t.hash&&(s["http.fragment"]=t.hash)),s}function Ag(e,t={},n=X()){const{message:r,name:s,email:o,url:i,source:a,associatedEventId:c,tags:u}=e,d={contexts:{feedback:{contact_email:o,name:s,message:r,url:i,source:a,associated_event_id:c}},type:"feedback",level:"info",tags:u},l=n?.getClient()||A();return l&&l.emit("beforeSendFeedback",d,t),n.captureEvent(d,t)}const Og="ConsoleLogs",ec={[le]:"auto.console.logging"},Ng=((e={})=>{const t=e.levels||ci;return{name:Og,setup(n){const{enableLogs:r,_experiments:s,normalizeDepth:o=3,normalizeMaxBreadth:i=1e3}=n.getOptions();if(!(r??s?.enableLogs)){T&&_.warn("`enableLogs` is not enabled, ConsoleLogs integration disabled");return}ki(({args:c,level:u})=>{if(A()!==n||!t.includes(u))return;if(u==="assert"){if(!c[0]){const l=c.slice(1),f=l.length>0?`Assertion failed: ${tc(l,o,i)}`:"Assertion failed";Do({level:"error",message:f,attributes:ec})}return}const d=u==="log";Do({level:d?"info":u,message:tc(c,o,i),severityNumber:d?10:void 0,attributes:ec})})}}}),WI=Ng;function tc(e,t,n){return"util"in H&&typeof H.util.format=="function"?H.util.format(...e):Lg(e,t,n)}function Lg(e,t,n){return e.map(r=>fn(r)?String(r):JSON.stringify(Ne(r,t,n))).join(" ")}function Al(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const Sn=H;function Dg(){return"history"in Sn&&!!Sn.history}function Pg(){if(!("fetch"in Sn))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function Fo(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Ol(){if(typeof EdgeRuntime=="string")return!0;if(!Pg())return!1;if(Fo(Sn.fetch))return!0;let e=!1;const t=Sn.document;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow?.fetch&&(e=Fo(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){T&&_.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function Fg(){return"ReportingObserver"in Sn}function Ri(e,t){const n="fetch";Rt(n,e),xt(n,()=>Nl(void 0,t))}function $g(e){const t="fetch-body-resolved";Rt(t,e),xt(t,()=>Nl(Hg))}function Nl(e,t=!1){t&&!Ol()||Re(H,"fetch",function(n){return function(...r){const s=new Error,{method:o,url:i}=Ug(r),a={args:r,fetchData:{method:o,url:i},startTimestamp:he()*1e3,virtualError:s,headers:Wg(r)};return e||$e("fetch",{...a}),n.apply(H,r).then(async c=>(e?e(c):$e("fetch",{...a,endTimestamp:he()*1e3,response:c}),c),c=>{if($e("fetch",{...a,endTimestamp:he()*1e3,error:c}),vt(c)&&c.stack===void 0&&(c.stack=s.stack,Ae(c,"framesToPop",1)),c instanceof TypeError&&(c.message==="Failed to fetch"||c.message==="Load failed"||c.message==="NetworkError when attempting to fetch resource."))try{const u=new URL(a.fetchData.url);c.message=`${c.message} (${u.host})`}catch{}throw c})}})}async function Bg(e,t){if(e?.body){const n=e.body,r=n.getReader(),s=setTimeout(()=>{n.cancel().then(null,()=>{})},90*1e3);let o=!0;for(;o;){let i;try{i=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);const{done:a}=await r.read();clearTimeout(i),a&&(t(),o=!1)}catch{o=!1}finally{clearTimeout(i)}}clearTimeout(s),r.releaseLock(),n.cancel().then(null,()=>{})}}function Hg(e){let t;try{t=e.clone()}catch{return}Bg(t,()=>{$e("fetch-body-resolved",{endTimestamp:he()*1e3,response:e})})}function $o(e,t){return!!e&&typeof e=="object"&&!!e[t]}function nc(e){return typeof e=="string"?e:e?$o(e,"url")?e.url:e.toString?e.toString():"":""}function Ug(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,r]=e;return{url:nc(n),method:$o(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:nc(t),method:$o(t,"method")?String(t.method).toUpperCase():"GET"}}function Wg(e){const[t,n]=e;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(Cu(t))return new Headers(t.headers)}catch{}}function zg(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function jg(){return"npm"}function qg(){return!zg()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function Bo(){return typeof window<"u"&&(!qg()||Gg())}function Gg(){return H.process?.type==="renderer"}const ze=H,te=ze.document,Hn=ze.navigator,Ll="Report a Bug",Vg="Cancel",Yg="Send Bug Report",Xg="Confirm",Kg="Report a Bug",Jg="your.email@example.org",Zg="Email",Qg="What's the bug? What did you expect?",e_="Description",t_="Your Name",n_="Name",r_="Thank you for your report!",s_="(required)",o_="Add a screenshot",i_="Remove screenshot",a_="widget",c_="api",u_=5e3,l_=(e,t={includeReplay:!0})=>{if(!e.message)throw new Error("Unable to submit feedback with empty message");const n=A();if(!n)throw new Error("No client setup, cannot send feedback.");e.tags&&Object.keys(e.tags).length&&X().setTags(e.tags);const r=Ag({source:c_,url:qt(),...e},t);return new Promise((s,o)=>{const i=setTimeout(()=>o("Unable to determine if Feedback was correctly sent."),3e4),a=n.on("afterSendEvent",(c,u)=>{if(c.event_id===r)return clearTimeout(i),a(),u&&typeof u.statusCode=="number"&&u.statusCode>=200&&u.statusCode<300?s(r):u&&typeof u.statusCode=="number"&&u.statusCode===0?o("Unable to send Feedback. This is because of network issues, or because you are using an ad-blocker."):u&&typeof u.statusCode=="number"&&u.statusCode===403?o("Unable to send Feedback. This could be because this domain is not in your list of allowed domains."):o("Unable to send Feedback. This could be because of network issues, or because you are using an ad-blocker")})})},zr=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function d_(){return!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(Hn.userAgent)||/Macintosh/i.test(Hn.userAgent)&&Hn.maxTouchPoints&&Hn.maxTouchPoints>1||!isSecureContext)}function vr(e,t){return{...e,...t,tags:{...e.tags,...t.tags},onFormOpen:()=>{t.onFormOpen?.(),e.onFormOpen?.()},onFormClose:()=>{t.onFormClose?.(),e.onFormClose?.()},onSubmitSuccess:(n,r)=>{t.onSubmitSuccess?.(n,r),e.onSubmitSuccess?.(n,r)},onSubmitError:n=>{t.onSubmitError?.(n),e.onSubmitError?.(n)},onFormSubmitted:()=>{t.onFormSubmitted?.(),e.onFormSubmitted?.()},themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function f_(e){const t=te.createElement("style");return t.textContent=`
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`,e&&t.setAttribute("nonce",e),t}function De(e,t){return Object.entries(t).forEach(([n,r])=>{e.setAttributeNS(null,n,r)}),e}const en=20,p_="http://www.w3.org/2000/svg";function h_(){const e=a=>ze.document.createElementNS(p_,a),t=De(e("svg"),{width:`${en}`,height:`${en}`,viewBox:`0 0 ${en} ${en}`,fill:"var(--actor-color, var(--foreground))"}),n=De(e("g"),{clipPath:"url(#clip0_57_80)"}),r=De(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const s=e("defs"),o=De(e("clipPath"),{id:"clip0_57_80"}),i=De(e("rect"),{width:`${en}`,height:`${en}`,fill:"white"});return o.appendChild(i),s.appendChild(o),t.appendChild(s).appendChild(o).appendChild(i),t}function m_({triggerLabel:e,triggerAriaLabel:t,shadow:n,styleNonce:r}){const s=te.createElement("button");if(s.type="button",s.className="widget__actor",s.ariaHidden="false",s.ariaLabel=t||e||Ll,s.appendChild(h_()),e){const i=te.createElement("span");i.appendChild(te.createTextNode(e)),s.appendChild(i)}const o=f_(r);return{el:s,appendToDom(){n.appendChild(o),n.appendChild(s)},removeFromDom(){s.remove(),o.remove()},show(){s.ariaHidden="false"},hide(){s.ariaHidden="true"}}}const Dl="rgba(88, 74, 192, 1)",g_={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:Dl,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},rc={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:Dl,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function sc(e){return`
  --foreground: ${e.foreground};
  --background: ${e.background};
  --accent-foreground: ${e.accentForeground};
  --accent-background: ${e.accentBackground};
  --success-color: ${e.successColor};
  --error-color: ${e.errorColor};
  --border: ${e.border};
  --box-shadow: ${e.boxShadow};
  --outline: ${e.outline};
  --interactive-filter: ${e.interactiveFilter};
  `}function __({colorScheme:e,themeDark:t,themeLight:n,styleNonce:r}){const s=te.createElement("style");return s.textContent=`
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${e!=="system"?"color-scheme: only light;":""}

  ${sc(e==="dark"?{...rc,...t}:{...g_,...n})}
}

${e==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    ${sc({...rc,...t})}
  }
}`:""}
}
`,r&&s.setAttribute("nonce",r),s}const Pl=({lazyLoadIntegration:e,getModalIntegration:t,getScreenshotIntegration:n})=>(({id:s="sentry-feedback",autoInject:o=!0,showBranding:i=!0,isEmailRequired:a=!1,isNameRequired:c=!1,showEmail:u=!0,showName:d=!0,enableScreenshot:l=!0,useSentryUser:f={email:"email",name:"username"},tags:p,styleNonce:h,scriptNonce:m,colorScheme:g="system",themeLight:y={},themeDark:b={},addScreenshotButtonLabel:L=o_,cancelButtonLabel:k=Vg,confirmButtonLabel:C=Xg,emailLabel:S=Zg,emailPlaceholder:w=Jg,formTitle:x=Kg,isRequiredLabel:E=s_,messageLabel:I=e_,messagePlaceholder:P=Qg,nameLabel:v=n_,namePlaceholder:M=t_,removeScreenshotButtonLabel:U=i_,submitButtonLabel:N=Yg,successMessageText:R=r_,triggerLabel:F=Ll,triggerAriaLabel:O="",onFormOpen:z,onFormClose:K,onSubmitSuccess:ae,onSubmitError:Pe,onFormSubmitted:ge}={})=>{const me={id:s,autoInject:o,showBranding:i,isEmailRequired:a,isNameRequired:c,showEmail:u,showName:d,enableScreenshot:l,useSentryUser:f,tags:p,styleNonce:h,scriptNonce:m,colorScheme:g,themeDark:b,themeLight:y,triggerLabel:F,triggerAriaLabel:O,cancelButtonLabel:k,submitButtonLabel:N,confirmButtonLabel:C,formTitle:x,emailLabel:S,emailPlaceholder:w,messageLabel:I,messagePlaceholder:P,nameLabel:v,namePlaceholder:M,successMessageText:R,isRequiredLabel:E,addScreenshotButtonLabel:L,removeScreenshotButtonLabel:U,onFormClose:K,onFormOpen:z,onSubmitError:Pe,onSubmitSuccess:ae,onFormSubmitted:ge};let Oe=null,et=[];const Jt=ce=>{if(!Oe){const ve=te.createElement("div");ve.id=String(ce.id),te.body.appendChild(ve),Oe=ve.attachShadow({mode:"open"}),Oe.appendChild(__(ce))}return Oe},Zt=async ce=>{const ve=ce.enableScreenshot&&d_();let Ye,pe;try{Ye=(t?t():await e("feedbackModalIntegration",m))(),Fa(Ye)}catch{throw zr&&_.error("[Feedback] Error when trying to load feedback integrations. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!")}try{const Xe=ve?n?n():await e("feedbackScreenshotIntegration",m):void 0;Xe&&(pe=Xe(),Fa(pe))}catch{zr&&_.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.")}const _e=Ye.createDialog({options:{...ce,onFormClose:()=>{_e?.close(),ce.onFormClose?.()},onFormSubmitted:()=>{_e?.close(),ce.onFormSubmitted?.()}},screenshotIntegration:pe,sendFeedback:l_,shadow:Jt(ce)});return _e},$n=(ce,ve={})=>{const Ye=vr(me,ve),pe=typeof ce=="string"?te.querySelector(ce):typeof ce.addEventListener=="function"?ce:null;if(!pe)throw zr&&_.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let _e=null;const Xe=async()=>{_e||(_e=await Zt({...Ye,onFormSubmitted:()=>{_e?.removeFromDom(),Ye.onFormSubmitted?.()}})),_e.appendToDom(),_e.open()};pe.addEventListener("click",Xe);const At=()=>{et=et.filter(Qt=>Qt!==At),_e?.removeFromDom(),_e=null,pe.removeEventListener("click",Xe)};return et.push(At),At},mt=(ce={})=>{const ve=vr(me,ce),Ye=Jt(ve),pe=m_({triggerLabel:ve.triggerLabel,triggerAriaLabel:ve.triggerAriaLabel,shadow:Ye,styleNonce:h});return $n(pe.el,{...ve,onFormOpen(){pe.hide()},onFormClose(){pe.show()},onFormSubmitted(){pe.show()}}),pe};return{name:"Feedback",setupOnce(){!Bo()||!me.autoInject||(te.readyState==="loading"?te.addEventListener("DOMContentLoaded",()=>mt().appendToDom()):mt().appendToDom())},attachTo:$n,createWidget(ce={}){const ve=mt(vr(me,ce));return ve.appendToDom(),ve},async createForm(ce={}){return Zt(vr(me,ce))},remove(){Oe&&(Oe.parentElement?.remove(),Oe=null),et.forEach(ce=>ce()),et=[]}}});function zI(){return A()?.getIntegrationByName("Feedback")}var Ds,re,Fl,Lt,oc,$l,Ho,Vn={},xi=[],y_=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Mi=Array.isArray;function bt(e,t){for(var n in t)e[n]=t[n];return e}function Bl(e){var t=e.parentNode;t&&t.removeChild(e)}function V(e,t,n){var r,s,o,i={};for(o in t)o=="key"?r=t[o]:o=="ref"?s=t[o]:i[o]=t[o];if(arguments.length>2&&(i.children=arguments.length>3?Ds.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)i[o]===void 0&&(i[o]=e.defaultProps[o]);return jr(e,i,r,s,null)}function jr(e,t,n,r,s){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:s??++Fl,__i:-1,__u:0};return s==null&&re.vnode!=null&&re.vnode(o),o}function cr(e){return e.children}function qr(e,t){this.props=e,this.context=t}function bn(e,t){if(t==null)return e.__?bn(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?bn(e):null}function S_(e,t,n){var r,s=e.__v,o=s.__e,i=e.__P;if(i)return(r=bt({},s)).__v=s.__v+1,re.vnode&&re.vnode(r),Ai(i,r,s,e.__n,i.ownerSVGElement!==void 0,32&s.__u?[o]:null,t,o??bn(s),!!(32&s.__u),n),r.__.__k[r.__i]=r,r.__d=void 0,r.__e!=o&&Hl(r),r}function Hl(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Hl(e)}}function ic(e){(!e.__d&&(e.__d=!0)&&Lt.push(e)&&!ds.__r++||oc!==re.debounceRendering)&&((oc=re.debounceRendering)||$l)(ds)}function ds(){var e,t,n,r=[],s=[];for(Lt.sort(Ho);e=Lt.shift();)e.__d&&(n=Lt.length,t=S_(e,r,s)||t,n===0||Lt.length>n?(Uo(r,t,s),s.length=r.length=0,t=void 0,Lt.sort(Ho)):t&&re.__c&&re.__c(t,xi));t&&Uo(r,t,s),ds.__r=0}function Ul(e,t,n,r,s,o,i,a,c,u,d){var l,f,p,h,m,g=r&&r.__k||xi,y=t.length;for(n.__d=c,b_(n,t,g),c=n.__d,l=0;l<y;l++)(p=n.__k[l])!=null&&typeof p!="boolean"&&typeof p!="function"&&(f=p.__i===-1?Vn:g[p.__i]||Vn,p.__i=l,Ai(e,p,f,s,o,i,a,c,u,d),h=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&Oi(f.ref,null,p),d.push(p.ref,p.__c||h,p)),m==null&&h!=null&&(m=h),65536&p.__u||f.__k===p.__k?c=Wl(p,c,e):typeof p.type=="function"&&p.__d!==void 0?c=p.__d:h&&(c=h.nextSibling),p.__d=void 0,p.__u&=-196609);n.__d=c,n.__e=m}function b_(e,t,n){var r,s,o,i,a,c=t.length,u=n.length,d=u,l=0;for(e.__k=[],r=0;r<c;r++)(s=e.__k[r]=(s=t[r])==null||typeof s=="boolean"||typeof s=="function"?null:typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?jr(null,s,null,null,s):Mi(s)?jr(cr,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?jr(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s)!=null?(s.__=e,s.__b=e.__b+1,a=E_(s,n,i=r+l,d),s.__i=a,o=null,a!==-1&&(d--,(o=n[a])&&(o.__u|=131072)),o==null||o.__v===null?(a==-1&&l--,typeof s.type!="function"&&(s.__u|=65536)):a!==i&&(a===i+1?l++:a>i?d>c-i?l+=a-i:l--:l=a<i&&a==i-1?a-i:0,a!==r+l&&(s.__u|=65536))):(o=n[r])&&o.key==null&&o.__e&&(o.__e==e.__d&&(e.__d=bn(o)),Wo(o,o,!1),n[r]=null,d--);if(d)for(r=0;r<u;r++)(o=n[r])!=null&&(131072&o.__u)==0&&(o.__e==e.__d&&(e.__d=bn(o)),Wo(o,o))}function Wl(e,t,n){var r,s;if(typeof e.type=="function"){for(r=e.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=e,t=Wl(r[s],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function E_(e,t,n,r){var s=e.key,o=e.type,i=n-1,a=n+1,c=t[n];if(c===null||c&&s==c.key&&o===c.type)return n;if(r>(c!=null&&(131072&c.__u)==0?1:0))for(;i>=0||a<t.length;){if(i>=0){if((c=t[i])&&(131072&c.__u)==0&&s==c.key&&o===c.type)return i;i--}if(a<t.length){if((c=t[a])&&(131072&c.__u)==0&&s==c.key&&o===c.type)return a;a++}}return-1}function ac(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||y_.test(t)?n:n+"px"}function wr(e,t,n,r,s){var o;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||ac(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||ac(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")o=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,o?uc:cc,o)):e.removeEventListener(t,o?uc:cc,o);else{if(s)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function cc(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(re.event?re.event(e):e)}}function uc(e){if(this.l)return this.l[e.type+!0](re.event?re.event(e):e)}function Ai(e,t,n,r,s,o,i,a,c,u){var d,l,f,p,h,m,g,y,b,L,k,C,S,w,x,E=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),o=[a=t.__e=n.__e]),(d=re.__b)&&d(t);e:if(typeof E=="function")try{if(y=t.props,b=(d=E.contextType)&&r[d.__c],L=d?b?b.props.value:d.__:r,n.__c?g=(l=t.__c=n.__c).__=l.__E:("prototype"in E&&E.prototype.render?t.__c=l=new E(y,L):(t.__c=l=new qr(y,L),l.constructor=E,l.render=w_),b&&b.sub(l),l.props=y,l.state||(l.state={}),l.context=L,l.__n=r,f=l.__d=!0,l.__h=[],l._sb=[]),l.__s==null&&(l.__s=l.state),E.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=bt({},l.__s)),bt(l.__s,E.getDerivedStateFromProps(y,l.__s))),p=l.props,h=l.state,l.__v=t,f)E.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(E.getDerivedStateFromProps==null&&y!==p&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(y,L),!l.__e&&(l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(y,l.__s,L)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(l.props=y,l.state=l.__s,l.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(I){I&&(I.__=t)}),k=0;k<l._sb.length;k++)l.__h.push(l._sb[k]);l._sb=[],l.__h.length&&i.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(y,l.__s,L),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(p,h,m)})}if(l.context=L,l.props=y,l.__P=e,l.__e=!1,C=re.__r,S=0,"prototype"in E&&E.prototype.render){for(l.state=l.__s,l.__d=!1,C&&C(t),d=l.render(l.props,l.state,l.context),w=0;w<l._sb.length;w++)l.__h.push(l._sb[w]);l._sb=[]}else do l.__d=!1,C&&C(t),d=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++S<25);l.state=l.__s,l.getChildContext!=null&&(r=bt(bt({},r),l.getChildContext())),f||l.getSnapshotBeforeUpdate==null||(m=l.getSnapshotBeforeUpdate(p,h)),Ul(e,Mi(x=d!=null&&d.type===cr&&d.key==null?d.props.children:d)?x:[x],t,n,r,s,o,i,a,c,u),l.base=t.__e,t.__u&=-161,l.__h.length&&i.push(l),g&&(l.__E=l.__=null)}catch(I){t.__v=null,c||o!=null?(t.__e=a,t.__u|=c?160:32,o[o.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),re.__e(I,t,n)}else o==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=v_(n.__e,t,n,r,s,o,i,c,u);(d=re.diffed)&&d(t)}function Uo(e,t,n){for(var r=0;r<n.length;r++)Oi(n[r],n[++r],n[++r]);re.__c&&re.__c(t,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(o){o.call(s)})}catch(o){re.__e(o,s.__v)}})}function v_(e,t,n,r,s,o,i,a,c){var u,d,l,f,p,h,m,g=n.props,y=t.props,b=t.type;if(b==="svg"&&(s=!0),o!=null){for(u=0;u<o.length;u++)if((p=o[u])&&"setAttribute"in p==!!b&&(b?p.localName===b:p.nodeType===3)){e=p,o[u]=null;break}}if(e==null){if(b===null)return document.createTextNode(y);e=s?document.createElementNS("http://www.w3.org/2000/svg",b):document.createElement(b,y.is&&y),o=null,a=!1}if(b===null)g===y||a&&e.data===y||(e.data=y);else{if(o=o&&Ds.call(e.childNodes),g=n.props||Vn,!a&&o!=null)for(g={},u=0;u<e.attributes.length;u++)g[(p=e.attributes[u]).name]=p.value;for(u in g)p=g[u],u=="children"||(u=="dangerouslySetInnerHTML"?l=p:u==="key"||u in y||wr(e,u,null,p,s));for(u in y)p=y[u],u=="children"?f=p:u=="dangerouslySetInnerHTML"?d=p:u=="value"?h=p:u=="checked"?m=p:u==="key"||a&&typeof p!="function"||g[u]===p||wr(e,u,p,g[u],s);if(d)a||l&&(d.__html===l.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(l&&(e.innerHTML=""),Ul(e,Mi(f)?f:[f],t,n,r,s&&b!=="foreignObject",o,i,o?o[0]:n.__k&&bn(n,0),a,c),o!=null)for(u=o.length;u--;)o[u]!=null&&Bl(o[u]);a||(u="value",h!==void 0&&(h!==e[u]||b==="progress"&&!h||b==="option"&&h!==g[u])&&wr(e,u,h,g[u],!1),u="checked",m!==void 0&&m!==e[u]&&wr(e,u,m,g[u],!1))}return e}function Oi(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){re.__e(r,n)}}function Wo(e,t,n){var r,s;if(re.unmount&&re.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Oi(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){re.__e(o,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(s=0;s<r.length;s++)r[s]&&Wo(r[s],t,n||typeof e.type!="function");n||e.__e==null||Bl(e.__e),e.__=e.__e=e.__d=void 0}function w_(e,t,n){return this.constructor(e,n)}function T_(e,t,n){var r,s,o,i;re.__&&re.__(e,t),s=(r=!1)?null:t.__k,o=[],i=[],Ai(t,e=t.__k=V(cr,null,[e]),s||Vn,Vn,t.ownerSVGElement!==void 0,s?null:t.firstChild?Ds.call(t.childNodes):null,o,s?s.__e:t.firstChild,r,i),e.__d=void 0,Uo(o,e,i)}Ds=xi.slice,re={__e:function(e,t,n,r){for(var s,o,i;t=t.__;)if((s=t.__c)&&!s.__)try{if((o=s.constructor)&&o.getDerivedStateFromError!=null&&(s.setState(o.getDerivedStateFromError(e)),i=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,r||{}),i=s.__d),i)return s.__E=s}catch(a){e=a}throw e}},Fl=0,qr.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=bt({},this.state),typeof e=="function"&&(e=e(bt({},n),this.props)),e&&bt(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),ic(this))},qr.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ic(this))},qr.prototype.render=cr,Lt=[],$l=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ho=function(e,t){return e.__v.__b-t.__v.__b},ds.__r=0;var dt,ne,oo,lc,En=0,zl=[],Gr=[],ue=re,dc=ue.__b,fc=ue.__r,pc=ue.diffed,hc=ue.__c,mc=ue.unmount,gc=ue.__;function Xt(e,t){ue.__h&&ue.__h(ne,e,En||t),En=0;var n=ne.__H||(ne.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:Gr}),n.__[e]}function Dt(e){return En=1,jl(Gl,e)}function jl(e,t,n){var r=Xt(dt++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):Gl(void 0,t),function(a){var c=r.__N?r.__N[0]:r.__[0],u=r.t(c,a);c!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=ne,!ne.u)){var s=function(a,c,u){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(f){return!!f.__c});if(d.every(function(f){return!f.__N}))return!o||o.call(this,a,c,u);var l=!1;return d.forEach(function(f){if(f.__N){var p=f.__[0];f.__=f.__N,f.__N=void 0,p!==f.__[0]&&(l=!0)}}),!(!l&&r.__c.props===a)&&(!o||o.call(this,a,c,u))};ne.u=!0;var o=ne.shouldComponentUpdate,i=ne.componentWillUpdate;ne.componentWillUpdate=function(a,c,u){if(this.__e){var d=o;o=void 0,s(a,c,u),o=d}i&&i.call(this,a,c,u)},ne.shouldComponentUpdate=s}return r.__N||r.__}function I_(e,t){var n=Xt(dt++,3);!ue.__s&&Ni(n.__H,t)&&(n.__=e,n.i=t,ne.__H.__h.push(n))}function ql(e,t){var n=Xt(dt++,4);!ue.__s&&Ni(n.__H,t)&&(n.__=e,n.i=t,ne.__h.push(n))}function k_(e){return En=5,ur(function(){return{current:e}},[])}function C_(e,t,n){En=6,ql(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},n==null?n:n.concat(e))}function ur(e,t){var n=Xt(dt++,7);return Ni(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function dn(e,t){return En=8,ur(function(){return e},t)}function R_(e){var t=ne.context[e.__c],n=Xt(dt++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(ne)),t.props.value):e.__}function x_(e,t){ue.useDebugValue&&ue.useDebugValue(t?t(e):e)}function M_(e){var t=Xt(dt++,10),n=Dt();return t.__=e,ne.componentDidCatch||(ne.componentDidCatch=function(r,s){t.__&&t.__(r,s),n[1](r)}),[n[0],function(){n[1](void 0)}]}function A_(){var e=Xt(dt++,11);if(!e.__){for(var t=ne.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function O_(){for(var e;e=zl.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Vr),e.__H.__h.forEach(zo),e.__H.__h=[]}catch(t){e.__H.__h=[],ue.__e(t,e.__v)}}ue.__b=function(e){ne=null,dc&&dc(e)},ue.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),gc&&gc(e,t)},ue.__r=function(e){fc&&fc(e),dt=0;var t=(ne=e.__c).__H;t&&(oo===ne?(t.__h=[],ne.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=Gr,n.__N=n.i=void 0})):(t.__h.forEach(Vr),t.__h.forEach(zo),t.__h=[],dt=0)),oo=ne},ue.diffed=function(e){pc&&pc(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(zl.push(t)!==1&&lc===ue.requestAnimationFrame||((lc=ue.requestAnimationFrame)||N_)(O_)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==Gr&&(n.__=n.__V),n.i=void 0,n.__V=Gr})),oo=ne=null},ue.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Vr),n.__h=n.__h.filter(function(r){return!r.__||zo(r)})}catch(r){t.some(function(s){s.__h&&(s.__h=[])}),t=[],ue.__e(r,n.__v)}}),hc&&hc(e,t)},ue.unmount=function(e){mc&&mc(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Vr(r)}catch(s){t=s}}),n.__H=void 0,t&&ue.__e(t,n.__v))};var _c=typeof requestAnimationFrame=="function";function N_(e){var t,n=function(){clearTimeout(r),_c&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);_c&&(t=requestAnimationFrame(n))}function Vr(e){var t=ne,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),ne=t}function zo(e){var t=ne;e.__c=e.__(),ne=t}function Ni(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function Gl(e,t){return typeof t=="function"?t(e):t}const L_=Object.defineProperty({__proto__:null,useCallback:dn,useContext:R_,useDebugValue:x_,useEffect:I_,useErrorBoundary:M_,useId:A_,useImperativeHandle:C_,useLayoutEffect:ql,useMemo:ur,useReducer:jl,useRef:k_,useState:Dt},Symbol.toStringTag,{value:"Module"}),D_="http://www.w3.org/2000/svg";function P_(){const e=r=>te.createElementNS(D_,r),t=De(e("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),n=De(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return t.appendChild(n),t}function F_({options:e}){const t=ur(()=>({__html:P_().outerHTML}),[]);return V("h2",{class:"dialog__header"},V("span",{class:"dialog__title"},e.formTitle),e.showBranding?V("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:t}):null)}function $_(e,t){const n=[];return t.isNameRequired&&!e.name&&n.push(t.nameLabel),t.isEmailRequired&&!e.email&&n.push(t.emailLabel),e.message||n.push(t.messageLabel),n}function io(e,t){const n=e.get(t);return typeof n=="string"?n.trim():""}function B_({options:e,defaultEmail:t,defaultName:n,onFormClose:r,onSubmit:s,onSubmitSuccess:o,onSubmitError:i,showEmail:a,showName:c,screenshotInput:u}){const{tags:d,addScreenshotButtonLabel:l,removeScreenshotButtonLabel:f,cancelButtonLabel:p,emailLabel:h,emailPlaceholder:m,isEmailRequired:g,isNameRequired:y,messageLabel:b,messagePlaceholder:L,nameLabel:k,namePlaceholder:C,submitButtonLabel:S,isRequiredLabel:w}=e,[x,E]=Dt(!1),[I,P]=Dt(null),[v,M]=Dt(!1),U=u?.input,[N,R]=Dt(null),F=dn(K=>{R(K),M(!1)},[]),O=dn(K=>{const ae=$_(K,{emailLabel:h,isEmailRequired:g,isNameRequired:y,messageLabel:b,nameLabel:k});return ae.length>0?P(`Please enter in the following required fields: ${ae.join(", ")}`):P(null),ae.length===0},[h,g,y,b,k]),z=dn(async K=>{E(!0);try{if(K.preventDefault(),!(K.target instanceof HTMLFormElement))return;const ae=new FormData(K.target),Pe=await(u&&v?u.value():void 0),ge={name:io(ae,"name"),email:io(ae,"email"),message:io(ae,"message"),attachments:Pe?[Pe]:void 0};if(!O(ge))return;try{const me=await s({name:ge.name,email:ge.email,message:ge.message,source:a_,tags:d},{attachments:ge.attachments});o(ge,me)}catch(me){zr&&_.error(me),P(me),i(me)}}finally{E(!1)}},[u&&v,o,i]);return V("form",{class:"form",onSubmit:z},U&&v?V(U,{onError:F}):null,V("fieldset",{class:"form__right","data-sentry-feedback":!0,disabled:x},V("div",{class:"form__top"},I?V("div",{class:"form__error-container"},I):null,c?V("label",{for:"name",class:"form__label"},V(ao,{label:k,isRequiredLabel:w,isRequired:y}),V("input",{class:"form__input",defaultValue:n,id:"name",name:"name",placeholder:C,required:y,type:"text"})):V("input",{"aria-hidden":!0,value:n,name:"name",type:"hidden"}),a?V("label",{for:"email",class:"form__label"},V(ao,{label:h,isRequiredLabel:w,isRequired:g}),V("input",{class:"form__input",defaultValue:t,id:"email",name:"email",placeholder:m,required:g,type:"email"})):V("input",{"aria-hidden":!0,value:t,name:"email",type:"hidden"}),V("label",{for:"message",class:"form__label"},V(ao,{label:b,isRequiredLabel:w,isRequired:!0}),V("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:L,required:!0,rows:5})),U?V("label",{for:"screenshot",class:"form__label"},V("button",{class:"btn btn--default",disabled:x,type:"button",onClick:()=>{R(null),M(K=>!K)}},v?f:l),N?V("div",{class:"form__error-container"},N.message):null):null),V("div",{class:"btn-group"},V("button",{class:"btn btn--primary",disabled:x,type:"submit"},S),V("button",{class:"btn btn--default",disabled:x,type:"button",onClick:r},p))))}function ao({label:e,isRequired:t,isRequiredLabel:n}){return V("span",{class:"form__label__text"},e,t&&V("span",{class:"form__label__text--required"},n))}const Tr=16,yc=17,H_="http://www.w3.org/2000/svg";function U_(){const e=c=>ze.document.createElementNS(H_,c),t=De(e("svg"),{width:`${Tr}`,height:`${yc}`,viewBox:`0 0 ${Tr} ${yc}`,fill:"inherit"}),n=De(e("g"),{clipPath:"url(#clip0_57_156)"}),r=De(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),s=De(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(s,r);const o=e("defs"),i=De(e("clipPath"),{id:"clip0_57_156"}),a=De(e("rect"),{width:`${Tr}`,height:`${Tr}`,fill:"white",transform:"translate(0 0.5)"});return i.appendChild(a),o.appendChild(i),t.appendChild(o).appendChild(i).appendChild(a),t}function W_({open:e,onFormSubmitted:t,...n}){const r=n.options,s=ur(()=>({__html:U_().outerHTML}),[]),[o,i]=Dt(null),a=dn(()=>{o&&(clearTimeout(o),i(null)),t()},[o]),c=dn((u,d)=>{n.onSubmitSuccess(u,d),i(setTimeout(()=>{t(),i(null)},u_))},[t]);return V(cr,null,o?V("div",{class:"success__position",onClick:a},V("div",{class:"success__content"},r.successMessageText,V("span",{class:"success__icon",dangerouslySetInnerHTML:s}))):V("dialog",{class:"dialog",onClick:r.onFormClose,open:e},V("div",{class:"dialog__position"},V("div",{class:"dialog__content",onClick:u=>{u.stopPropagation()}},V(F_,{options:r}),V(B_,{...n,onSubmitSuccess:c})))))}const z_=`
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}

`,j_=`
.dialog__header {
  display: flex;
  gap: 4px;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}
.dialog__title {
  align-self: center;
  width: var(--form-width, 272px);
}

@media (max-width: 600px) {
  .dialog__title {
    width: auto;
  }
}

.dialog__position:has(.editor) .dialog__title {
  width: auto;
}


.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`,q_=`
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form fieldset {
  border: none;
  margin: 0;
  padding: 0;
}

.form__right {
  flex: 0 0 auto;
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
  width: var(--form-width, 100%);
}

.dialog__position:has(.editor) .form__right {
  width: var(--form-width, 272px);
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-color);
  fill: var(--error-color);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`,G_=`
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`,V_=`
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`;function Y_(e){const t=te.createElement("style");return t.textContent=`
:host {
  --dialog-inset: var(--inset);
}

${z_}
${j_}
${q_}
${G_}
${V_}
`,e&&t.setAttribute("nonce",e),t}function X_(){const e=X().getUser(),t=be().getUser(),n=pi().getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:n}const K_=(()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:e,screenshotIntegration:t,sendFeedback:n,shadow:r})=>{const s=r,o=e.useSentryUser,i=X_(),a=te.createElement("div"),c=Y_(e.styleNonce);let u="";const d={get el(){return a},appendToDom(){!s.contains(c)&&!s.contains(a)&&(s.appendChild(c),s.appendChild(a))},removeFromDom(){a.remove(),c.remove(),te.body.style.overflow=u},open(){f(!0),e.onFormOpen?.(),A()?.emit("openFeedbackWidget"),u=te.body.style.overflow,te.body.style.overflow="hidden"},close(){f(!1),te.body.style.overflow=u}},l=t?.createInput({h:V,hooks:L_,dialog:d,options:e}),f=p=>{T_(V(W_,{options:e,screenshotInput:l,showName:e.showName||e.isNameRequired,showEmail:e.showEmail||e.isEmailRequired,defaultName:o&&i?.[o.name]||"",defaultEmail:o&&i?.[o.email]||"",onFormClose:()=>{f(!1),e.onFormClose?.()},onSubmit:n,onSubmitSuccess:(h,m)=>{f(!1),e.onSubmitSuccess?.(h,m)},onSubmitError:h=>{e.onSubmitError?.(h)},onFormSubmitted:()=>{e.onFormSubmitted?.()},open:p}),a)};return d}}));function J_({h:e}){return function(){return e("svg",{"data-test-id":"icon-close",viewBox:"0 0 16 16",fill:"#2B2233",height:"25px",width:"25px"},e("circle",{r:"7",cx:"8",cy:"8",fill:"white"}),e("path",{strokeWidth:"1.5",d:"M8,16a8,8,0,1,1,8-8A8,8,0,0,1,8,16ZM8,1.53A6.47,6.47,0,1,0,14.47,8,6.47,6.47,0,0,0,8,1.53Z"}),e("path",{strokeWidth:"1.5",d:"M5.34,11.41a.71.71,0,0,1-.53-.22.74.74,0,0,1,0-1.06l5.32-5.32a.75.75,0,0,1,1.06,1.06L5.87,11.19A.74.74,0,0,1,5.34,11.41Z"}),e("path",{strokeWidth:"1.5",d:"M10.66,11.41a.74.74,0,0,1-.53-.22L4.81,5.87A.75.75,0,0,1,5.87,4.81l5.32,5.32a.74.74,0,0,1,0,1.06A.71.71,0,0,1,10.66,11.41Z"}))}}function Z_(e){const t=te.createElement("style"),n="#1A141F",r="#302735";return t.textContent=`
.editor {
  display: flex;
  flex-grow: 1;
  flex-direction: column;
}

.editor__image-container {
  justify-items: center;
  padding: 15px;
  position: relative;
  height: 100%;
  border-radius: var(--menu-border-radius, 6px);

  background-color: ${n};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${n} 8px,
      ${n} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${r} 15px,
      ${r} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor__canvas-container > * {
  object-fit: contain;
  position: absolute;
}

.editor__tool-container {
  padding-top: 8px;
  display: flex;
  justify-content: center;
}

.editor__tool-bar {
  display: flex;
  gap: 8px;
}

.editor__tool {
  display: flex;
  padding: 8px 12px;
  justify-content: center;
  align-items: center;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  background: var(--button-background, var(--background));
  color: var(--button-color, var(--foreground));
}

.editor__tool--active {
  background: var(--button-primary-background, var(--accent-background));
  color: var(--button-primary-color, var(--accent-foreground));
}

.editor__rect {
  position: absolute;
  z-index: 2;
}

.editor__rect button {
  opacity: 0;
  position: absolute;
  top: -12px;
  right: -12px;
  cursor: pointer;
  padding: 0;
  z-index: 3;
  border: none;
  background: none;
}

.editor__rect:hover button {
  opacity: 1;
}
`,e&&t.setAttribute("nonce",e),t}function Q_({h:e}){return function({action:n,setAction:r}){return e("div",{class:"editor__tool-container"},e("div",{class:"editor__tool-bar"},e("button",{type:"button",class:`editor__tool ${n==="highlight"?"editor__tool--active":""}`,onClick:()=>{r(n==="highlight"?"":"highlight")}},"Highlight"),e("button",{type:"button",class:`editor__tool ${n==="hide"?"editor__tool--active":""}`,onClick:()=>{r(n==="hide"?"":"hide")}},"Hide")))}}function ey({hooks:e}){function t(){const[n,r]=e.useState(ze.devicePixelRatio??1);return e.useEffect(()=>{const s=()=>{r(ze.devicePixelRatio)},o=matchMedia(`(resolution: ${ze.devicePixelRatio}dppx)`);return o.addEventListener("change",s),()=>{o.removeEventListener("change",s)}},[]),n}return function({onBeforeScreenshot:r,onScreenshot:s,onAfterScreenshot:o,onError:i}){const a=t();e.useEffect(()=>{(async()=>{r();const u=await Hn.mediaDevices.getDisplayMedia({video:{width:ze.innerWidth*a,height:ze.innerHeight*a},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),d=te.createElement("video");await new Promise((l,f)=>{d.srcObject=u,d.onloadedmetadata=()=>{s(d,a),u.getTracks().forEach(p=>p.stop()),l()},d.play().catch(f)}),o()})().catch(i)},[])}}function ty(e,t,n){switch(e.type){case"highlight":{t.shadowColor="rgba(0, 0, 0, 0.7)",t.shadowBlur=50,t.fillStyle=n,t.fillRect(e.x-1,e.y-1,e.w+2,e.h+2),t.clearRect(e.x,e.y,e.w,e.h);break}case"hide":t.fillStyle="rgb(0, 0, 0)",t.fillRect(e.x,e.y,e.w,e.h);break}}function _t(e,t,n){if(!e)return;const r=e.getContext("2d",t);r&&n(e,r)}function co(e,t){_t(e,{alpha:!0},(n,r)=>{r.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height)})}function uo(e,t,n){_t(e,{alpha:!0},(r,s)=>{n.length&&(s.fillStyle="rgba(0, 0, 0, 0.25)",s.fillRect(0,0,r.width,r.height)),n.forEach(o=>{ty(o,s,t)})})}function ny({h:e,hooks:t,outputBuffer:n,dialog:r,options:s}){const o=ey({hooks:t}),i=Q_({h:e}),a=J_({h:e}),c={__html:Z_(s.styleNonce).innerText},u=r.el.style,d=({screenshot:l})=>{const[f,p]=t.useState("highlight"),[h,m]=t.useState([]),g=t.useRef(null),y=t.useRef(null),b=t.useRef(null),L=t.useRef(null),[k,C]=t.useState(1),S=t.useMemo(()=>{const v=te.getElementById(s.id);if(!v)return"white";const M=getComputedStyle(v);return M.getPropertyValue("--button-primary-background")||M.getPropertyValue("--accent-background")},[s.id]);t.useLayoutEffect(()=>{const v=()=>{const M=g.current;M&&(_t(l.canvas,{alpha:!1},U=>{const N=Math.min(M.clientWidth/U.width,M.clientHeight/U.height);C(N)}),(M.clientHeight===0||M.clientWidth===0)&&setTimeout(v,0))};return v(),ze.addEventListener("resize",v),()=>{ze.removeEventListener("resize",v)}},[l]);const w=t.useCallback((v,M)=>{_t(v,{alpha:!0},(U,N)=>{N.scale(M,M),U.width=l.canvas.width,U.height=l.canvas.height})},[l]);t.useEffect(()=>{w(y.current,l.dpi),co(y.current,l.canvas)},[l]),t.useEffect(()=>{w(b.current,l.dpi),_t(b.current,{alpha:!0},(v,M)=>{M.clearRect(0,0,v.width,v.height)}),uo(b.current,S,h)},[h,S]),t.useEffect(()=>{w(n,l.dpi),co(n,l.canvas),_t(te.createElement("canvas"),{alpha:!0},(v,M)=>{M.scale(l.dpi,l.dpi),v.width=l.canvas.width,v.height=l.canvas.height,uo(v,S,h),co(n,v)})},[h,l,S]);const x=v=>{if(!f||!L.current)return;const M=L.current.getBoundingClientRect(),U={type:f,x:v.offsetX/k,y:v.offsetY/k},N=(O,z)=>{const K=(z.clientX-M.x)/k,ae=(z.clientY-M.y)/k;return{type:O.type,x:Math.min(O.x,K),y:Math.min(O.y,ae),w:Math.abs(K-O.x),h:Math.abs(ae-O.y)}},R=O=>{_t(b.current,{alpha:!0},(z,K)=>{K.clearRect(0,0,z.width,z.height)}),uo(b.current,S,[...h,N(U,O)])},F=O=>{const z=N(U,O);z.w*k>=1&&z.h*k>=1&&m(K=>[...K,z]),te.removeEventListener("mousemove",R),te.removeEventListener("mouseup",F)};te.addEventListener("mousemove",R),te.addEventListener("mouseup",F)},E=t.useCallback(v=>M=>{M.preventDefault(),M.stopPropagation(),m(U=>{const N=[...U];return N.splice(v,1),N})},[]),I={width:`${l.canvas.width*k}px`,height:`${l.canvas.height*k}px`},P=v=>{v.stopPropagation()};return e("div",{class:"editor"},e("style",{nonce:s.styleNonce,dangerouslySetInnerHTML:c}),e("div",{class:"editor__image-container"},e("div",{class:"editor__canvas-container",ref:g},e("canvas",{ref:y,id:"background",style:I}),e("canvas",{ref:b,id:"foreground",style:I}),e("div",{ref:L,onMouseDown:x,style:I},h.map((v,M)=>e("div",{key:M,class:"editor__rect",style:{top:`${v.y*k}px`,left:`${v.x*k}px`,width:`${v.w*k}px`,height:`${v.h*k}px`}},e("button",{"aria-label":"Remove",onClick:E(M),onMouseDown:P,onMouseUp:P,type:"button"},e(a,null))))))),e(i,{action:f,setAction:p}))};return function({onError:f}){const[p,h]=t.useState();return o({onBeforeScreenshot:t.useCallback(()=>{u.display="none"},[]),onScreenshot:t.useCallback((m,g)=>{_t(te.createElement("canvas"),{alpha:!1},(y,b)=>{b.scale(g,g),y.width=m.videoWidth,y.height=m.videoHeight,b.drawImage(m,0,0,y.width,y.height),h({canvas:y,dpi:g})}),n.width=m.videoWidth,n.height=m.videoHeight},[]),onAfterScreenshot:t.useCallback(()=>{u.display="block"},[]),onError:t.useCallback(m=>{u.display="block",f(m)},[])}),p?e(d,{screenshot:p}):e("div",null)}}const ry=(()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:e,hooks:t,dialog:n,options:r})=>{const s=te.createElement("canvas");return{input:ny({h:e,hooks:t,outputBuffer:s,dialog:n,options:r}),value:async()=>{const o=await new Promise(i=>{s.toBlob(i,"image/png")});if(o)return{data:new Uint8Array(await o.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}})),D=H;let jo=0;function Vl(){return jo>0}function sy(){jo++,setTimeout(()=>{jo--})}function vn(e,t={}){function n(s){return typeof s=="function"}if(!n(e))return e;try{const s=e.__sentry_wrapped__;if(s)return typeof s=="function"?s:e;if(fi(e))return e}catch{return e}const r=function(...s){try{const o=s.map(i=>vn(i,t));return e.apply(this,o)}catch(o){throw sy(),Ve(i=>{i.addEventProcessor(a=>(t.mechanism&&(ko(a,void 0),Tt(a,t.mechanism)),a.extra={...a.extra,arguments:s},a)),gn(o)}),o}};try{for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])}catch{}xu(r,e),Ae(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}function Li(){const e=qt(),{referrer:t}=D.document||{},{userAgent:n}=D.navigator||{},r={...t&&{Referer:t},...n&&{"User-Agent":n}};return{url:e,headers:r}}const oy={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",graphqlClientIntegration:"graphqlclient",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",browserProfilingIntegration:"browserprofiling",moduleMetadataIntegration:"modulemetadata"},Sc=D;async function iy(e,t){const n=oy[e],r=Sc.Sentry=Sc.Sentry||{};if(!n)throw new Error(`Cannot lazy load integration: ${e}`);const s=r[e];if(typeof s=="function"&&!("_isShim"in s))return s;const o=ay(n),i=D.document.createElement("script");i.src=o,i.crossOrigin="anonymous",i.referrerPolicy="strict-origin",t&&i.setAttribute("nonce",t);const a=new Promise((l,f)=>{i.addEventListener("load",()=>l()),i.addEventListener("error",f)}),c=D.document.currentScript,u=D.document.body||D.document.head||c?.parentElement;if(u)u.appendChild(i);else throw new Error(`Could not find parent element to insert lazy-loaded ${e} script`);try{await a}catch{throw new Error(`Error when loading integration: ${e}`)}const d=r[e];if(typeof d!="function")throw new Error(`Could not load integration: ${e}`);return d}function ay(e){const n=A()?.getOptions()?.cdnBaseUrl||"https://browser.sentry-cdn.com";return new URL(`/${Et}/${e}.min.js`,n).toString()}const jI=Pl({lazyLoadIntegration:iy}),qI=Pl({getModalIntegration:()=>K_,getScreenshotIntegration:()=>ry});function Nn(e,t,n,r){Do({level:e,message:t,attributes:n,severityNumber:r})}function cy(e,t){Nn("trace",e,t)}function uy(e,t){Nn("debug",e,t)}function ly(e,t){Nn("info",e,t)}function dy(e,t){Nn("warn",e,t)}function fy(e,t){Nn("error",e,t)}function py(e,t){Nn("fatal",e,t)}const GI=Object.freeze(Object.defineProperty({__proto__:null,debug:uy,error:fy,fatal:py,fmt:cm,info:ly,trace:cy,warn:dy},Symbol.toStringTag,{value:"Module"}));function Di(e,t){const n=Pi(e,t),r={type:yy(t),value:Sy(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function hy(e,t,n,r){const o=A()?.getOptions().normalizeDepth,i=Ty(t),a={__serialized__:Zu(t,o)};if(i)return{exception:{values:[Di(e,i)]},extra:a};const c={exception:{values:[{type:Rs(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:vy(t,{isUnhandledRejection:r})}]},extra:a};if(n){const u=Pi(e,n);u.length&&(c.exception.values[0].stacktrace={frames:u})}return c}function lo(e,t){return{exception:{values:[Di(e,t)]}}}function Pi(e,t){const n=t.stacktrace||t.stack||"",r=gy(t),s=_y(t);try{return e(n,r,s)}catch{}return[]}const my=/Minified React error #\d+;/i;function gy(e){return e&&my.test(e.message)?1:0}function _y(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function Yl(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function yy(e){const t=e?.name;return!t&&Yl(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function Sy(e){const t=e?.message;return Yl(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function by(e,t,n,r){const s=n?.syntheticException||void 0,o=Fi(e,t,s,r);return Tt(o),o.level="error",n?.event_id&&(o.event_id=n.event_id),ut(o)}function Ey(e,t,n="info",r,s){const o=r?.syntheticException||void 0,i=qo(e,t,o,s);return i.level=n,r?.event_id&&(i.event_id=r.event_id),ut(i)}function Fi(e,t,n,r,s){let o;if(Iu(t)&&t.error)return lo(e,t.error);if(pa(t)||Bf(t)){const i=t;if("stack"in t)o=lo(e,t);else{const a=i.name||(pa(i)?"DOMError":"DOMException"),c=i.message?`${a}: ${i.message}`:a;o=qo(e,c,n,r),ko(o,c)}return"code"in i&&(o.tags={...o.tags,"DOMException.code":`${i.code}`}),o}return vt(t)?lo(e,t):ot(t)||Rs(t)?(o=hy(e,t,n,s),Tt(o,{synthetic:!0}),o):(o=qo(e,t,n,r),ko(o,`${t}`),Tt(o,{synthetic:!0}),o)}function qo(e,t,n,r){const s={};if(r&&n){const o=Pi(e,n);o.length&&(s.exception={values:[{value:t,stacktrace:{frames:o}}]}),Tt(s,{synthetic:!0})}if(Cs(t)){const{__sentry_template_string__:o,__sentry_template_values__:i}=t;return s.logentry={message:o,params:i},s}return s.message=t,s}function vy(e,{isUnhandledRejection:t}){const n=Gf(e),r=t?"promise rejection":"exception";return Iu(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:Rs(e)?`Event \`${wy(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function wy(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function Ty(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}const Iy=5e3;class ky extends Fh{constructor(t){const n=Cy(t),r=D.SENTRY_SDK_SOURCE||jg();dm(n,"browser",["browser"],r),super(n);const{sendDefaultPii:s,sendClientReports:o,enableLogs:i,_experiments:a}=this._options,c=i??a?.enableLogs;D.document&&(o||c)&&D.document.addEventListener("visibilitychange",()=>{D.document.visibilityState==="hidden"&&(o&&this._flushOutcomes(),c&&Wr(this))}),c&&(this.on("flush",()=>{Wr(this)}),this.on("afterCaptureLog",()=>{this._logFlushIdleTimeout&&clearTimeout(this._logFlushIdleTimeout),this._logFlushIdleTimeout=setTimeout(()=>{Wr(this)},Iy)})),s&&(this.on("postprocessEvent",um),this.on("beforeSendSession",lm))}eventFromException(t,n){return by(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return Ey(this._options.stackParser,t,n,r,this._options.attachStacktrace)}_prepareEvent(t,n,r,s){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r,s)}}function Cy(e){return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:D.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e}}const wn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,j=H,Ry=(e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good",Ln=(e,t,n,r)=>{let s,o;return i=>{t.value>=0&&(i||r)&&(o=t.value-(s??0),(o||s===void 0)&&(s=t.value,t.delta=o,t.rating=Ry(t.value,n),e(t)))}},xy=()=>`v5-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,lr=(e=!0)=>{const t=j.performance?.getEntriesByType?.("navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t},Dn=()=>lr()?.activationStart??0,Pn=(e,t=-1)=>{const n=lr();let r="navigate";return n&&(j.document?.prerendering||Dn()>0?r="prerender":j.document?.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:xy(),navigationType:r}},fo=new WeakMap;function $i(e,t){return fo.get(e)||fo.set(e,new t),fo.get(e)}class fs{constructor(){fs.prototype.__init.call(this),fs.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(t){if(t.hadRecentInput)return;const n=this._sessionEntries[0],r=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&n&&r&&t.startTime-r.startTime<1e3&&t.startTime-n.startTime<5e3?(this._sessionValue+=t.value,this._sessionEntries.push(t)):(this._sessionValue=t.value,this._sessionEntries=[t]),this._onAfterProcessingUnexpectedShift?.(t)}}const Kt=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(s=>{Promise.resolve().then(()=>{t(s.getEntries())})});return r.observe({type:e,buffered:!0,...n}),r}}catch{}},Ps=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let Un=-1;const My=()=>j.document?.visibilityState==="hidden"&&!j.document?.prerendering?0:1/0,ps=e=>{j.document.visibilityState==="hidden"&&Un>-1&&(Un=e.type==="visibilitychange"?e.timeStamp:0,Oy())},Ay=()=>{addEventListener("visibilitychange",ps,!0),addEventListener("prerenderingchange",ps,!0)},Oy=()=>{removeEventListener("visibilitychange",ps,!0),removeEventListener("prerenderingchange",ps,!0)},Fs=()=>{if(j.document&&Un<0){const e=Dn();Un=(j.document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter(n=>n.name==="hidden"&&n.startTime>e)[0]?.startTime)??My(),Ay()}return{get firstHiddenTime(){return Un}}},dr=e=>{j.document?.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},Ny=[1800,3e3],Ly=(e,t={})=>{dr(()=>{const n=Fs(),r=Pn("FCP");let s;const i=Kt("paint",a=>{for(const c of a)c.name==="first-contentful-paint"&&(i.disconnect(),c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-Dn(),0),r.entries.push(c),s(!0)))});i&&(s=Ln(e,r,Ny,t.reportAllChanges))})},Dy=[.1,.25],Py=(e,t={})=>{Ly(Ps(()=>{const n=Pn("CLS",0);let r;const s=$i(t,fs),o=a=>{for(const c of a)s._processEntry(c);s._sessionValue>n.value&&(n.value=s._sessionValue,n.entries=s._sessionEntries,r())},i=Kt("layout-shift",o);i&&(r=Ln(e,n,Dy,t.reportAllChanges),j.document?.addEventListener("visibilitychange",()=>{j.document?.visibilityState==="hidden"&&(o(i.takeRecords()),r(!0))}),j?.setTimeout?.(r))}))},$s=e=>{const t=n=>{(n.type==="pagehide"||j.document?.visibilityState==="hidden")&&e(n)};j.document&&(addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0))},Fy=[100,300],$y=(e,t={})=>{dr(()=>{const n=Fs(),r=Pn("FID");let s;const o=c=>{c.startTime<n.firstHiddenTime&&(r.value=c.processingStart-c.startTime,r.entries.push(c),s(!0))},i=c=>{c.forEach(o)},a=Kt("first-input",i);s=Ln(e,r,Fy,t.reportAllChanges),a&&$s(Ps(()=>{i(a.takeRecords()),a.disconnect()}))})};let Xl=0,po=1/0,Ir=0;const By=e=>{e.forEach(t=>{t.interactionId&&(po=Math.min(po,t.interactionId),Ir=Math.max(Ir,t.interactionId),Xl=Ir?(Ir-po)/7+1:0)})};let Go;const Kl=()=>Go?Xl:performance.interactionCount||0,Hy=()=>{"interactionCount"in performance||Go||(Go=Kt("event",By,{type:"event",buffered:!0,durationThreshold:0}))},ho=10;let Jl=0;const Uy=()=>Kl()-Jl;class hs{constructor(){hs.prototype.__init.call(this),hs.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){Jl=Kl(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){const t=Math.min(this._longestInteractionList.length-1,Math.floor(Uy()/50));return this._longestInteractionList[t]}_processEntry(t){if(this._onBeforeProcessingEntry?.(t),!(t.interactionId||t.entryType==="first-input"))return;const n=this._longestInteractionList.at(-1);let r=this._longestInteractionMap.get(t.interactionId);if(r||this._longestInteractionList.length<ho||t.duration>n._latency){if(r?t.duration>r._latency?(r.entries=[t],r._latency=t.duration):t.duration===r._latency&&t.startTime===r.entries[0].startTime&&r.entries.push(t):(r={id:t.interactionId,entries:[t],_latency:t.duration},this._longestInteractionMap.set(r.id,r),this._longestInteractionList.push(r)),this._longestInteractionList.sort((s,o)=>o._latency-s._latency),this._longestInteractionList.length>ho){const s=this._longestInteractionList.splice(ho);for(const o of s)this._longestInteractionMap.delete(o.id)}this._onAfterProcessingINPCandidate?.(r)}}}const Zl=e=>{const t=j.requestIdleCallback||j.setTimeout;j.document?.visibilityState==="hidden"?e():(e=Ps(e),t(e),$s(e))},Wy=[200,500],zy=40,jy=(e,t={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&dr(()=>{Hy();const n=Pn("INP");let r;const s=$i(t,hs),o=a=>{Zl(()=>{for(const u of a)s._processEntry(u);const c=s._estimateP98LongestInteraction();c&&c._latency!==n.value&&(n.value=c._latency,n.entries=c.entries,r())})},i=Kt("event",o,{durationThreshold:t.durationThreshold??zy});r=Ln(e,n,Wy,t.reportAllChanges),i&&(i.observe({type:"first-input",buffered:!0}),$s(()=>{o(i.takeRecords()),r(!0)}))})};class qy{_processEntry(t){this._onBeforeProcessingEntry?.(t)}}const Gy=[2500,4e3],Vy=(e,t={})=>{dr(()=>{const n=Fs(),r=Pn("LCP");let s;const o=$i(t,qy),i=c=>{t.reportAllChanges||(c=c.slice(-1));for(const u of c)o._processEntry(u),u.startTime<n.firstHiddenTime&&(r.value=Math.max(u.startTime-Dn(),0),r.entries=[u],s())},a=Kt("largest-contentful-paint",i);if(a){s=Ln(e,r,Gy,t.reportAllChanges);const c=Ps(()=>{i(a.takeRecords()),a.disconnect(),s(!0)});for(const u of["keydown","click","visibilitychange"])j.document&&addEventListener(u,()=>Zl(c),{capture:!0,once:!0})}})},Yy=[800,1800],Vo=e=>{j.document?.prerendering?dr(()=>Vo(e)):j.document?.readyState!=="complete"?addEventListener("load",()=>Vo(e),!0):setTimeout(e)},Xy=(e,t={})=>{const n=Pn("TTFB"),r=Ln(e,n,Yy,t.reportAllChanges);Vo(()=>{const s=lr();s&&(n.value=Math.max(s.responseStart-Dn(),0),n.entries=[s],r(!0))})},Wn={},ms={};let Ql,ed,td,nd,rd;function Bi(e,t=!1){return fr("cls",e,Jy,Ql,t)}function Hi(e,t=!1){return fr("lcp",e,Qy,td,t)}function sd(e){return fr("fid",e,Zy,ed)}function Ky(e){return fr("ttfb",e,eS,nd)}function od(e){return fr("inp",e,tS,rd)}function jt(e,t){return id(e,t),ms[e]||(nS(e),ms[e]=!0),ad(e,t)}function Fn(e,t){const n=Wn[e];if(n?.length)for(const r of n)try{r(t)}catch(s){wn&&_.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${st(r)}
Error:`,s)}}function Jy(){return Py(e=>{Fn("cls",{metric:e}),Ql=e},{reportAllChanges:!0})}function Zy(){return $y(e=>{Fn("fid",{metric:e}),ed=e})}function Qy(){return Vy(e=>{Fn("lcp",{metric:e}),td=e},{reportAllChanges:!0})}function eS(){return Xy(e=>{Fn("ttfb",{metric:e}),nd=e})}function tS(){return jy(e=>{Fn("inp",{metric:e}),rd=e})}function fr(e,t,n,r,s=!1){id(e,t);let o;return ms[e]||(o=n(),ms[e]=!0),r&&t({metric:r}),ad(e,t,s?o:void 0)}function nS(e){const t={};e==="event"&&(t.durationThreshold=0),Kt(e,n=>{Fn(e,{entries:n})},t)}function id(e,t){Wn[e]=Wn[e]||[],Wn[e].push(t)}function ad(e,t,n){return()=>{n&&n();const r=Wn[e];if(!r)return;const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}function rS(e){return"duration"in e}function mo(e){return typeof e=="number"&&isFinite(e)}function ft(e,t,n,{...r}){const s=q(e).start_timestamp;return s&&s>t&&typeof e.updateStartTime=="function"&&e.updateStartTime(t),As(e,()=>{const o=On({startTime:t,...r});return o&&o.end(n),o})}function Ui(e){const t=A();if(!t)return;const{name:n,transaction:r,attributes:s,startTime:o}=e,{release:i,environment:a,sendDefaultPii:c}=t.getOptions(),d=t.getIntegrationByName("Replay")?.getReplayId(),l=X(),f=l.getUser(),p=f!==void 0?f.email||f.id||f.ip_address:void 0;let h;try{h=l.getScopeData().contexts.profile.profile_id}catch{}const m={release:i,environment:a,user:p||void 0,profile_id:h||void 0,replay_id:d||void 0,transaction:r,"user_agent.original":j.navigator?.userAgent,"client.address":c?"{{auto}}":void 0,...s};return On({name:n,attributes:m,startTime:o,experimental:{standalone:!0}})}function Bs(){return j.addEventListener&&j.performance}function ie(e){return e/1e3}function cd(e){let t="unknown",n="unknown",r="";for(const s of e){if(s==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(s))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=s}return r===e&&(t=r),{name:t,version:n}}function ud(e){try{return PerformanceObserver.supportedEntryTypes.includes(e)}catch{return!1}}function ld(e,t){let n,r=!1;function s(a){!r&&n&&t(a,n),r=!0}$s(()=>{s("pagehide")});const o=e.on("beforeStartNavigationSpan",(a,c)=>{c?.isRedirect||(s("navigation"),o?.(),i?.())}),i=e.on("afterStartPageLoadSpan",a=>{n=a.spanContext().spanId,i?.()})}function sS(e){let t=0,n;if(!ud("layout-shift"))return;const r=Bi(({metric:s})=>{const o=s.entries[s.entries.length-1];o&&(t=s.value,n=o)},!0);ld(e,(s,o)=>{oS(t,n,o,s),r()})}function oS(e,t,n,r){wn&&_.log(`Sending CLS span (${e})`);const s=ie((Te()||0)+(t?.startTime||0)),o=X().getScopeData().transactionName,i=t?Be(t.sources[0]?.node):"Layout shift",a={[le]:"auto.http.browser.cls",[He]:"ui.webvital.cls",[An]:t?.duration||0,"sentry.pageload.span_id":n,"sentry.report_event":r};t?.sources&&t.sources.forEach((u,d)=>{a[`cls.source.${d+1}`]=Be(u.node)});const c=Ui({name:i,transaction:o,attributes:a,startTime:s});c&&(c.addEvent("cls",{[sr]:"",[or]:e}),c.end(s))}function iS(e){let t=0,n;if(!ud("largest-contentful-paint"))return;const r=Hi(({metric:s})=>{const o=s.entries[s.entries.length-1];o&&(t=s.value,n=o)},!0);ld(e,(s,o)=>{aS(t,n,o,s),r()})}function aS(e,t,n,r){wn&&_.log(`Sending LCP span (${e})`);const s=ie((Te()||0)+(t?.startTime||0)),o=X().getScopeData().transactionName,i=t?Be(t.element):"Largest contentful paint",a={[le]:"auto.http.browser.lcp",[He]:"ui.webvital.lcp",[An]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t&&(t.element&&(a["lcp.element"]=Be(t.element)),t.id&&(a["lcp.id"]=t.id),t.url&&(a["lcp.url"]=t.url.trim().slice(0,200)),t.loadTime!=null&&(a["lcp.loadTime"]=t.loadTime),t.renderTime!=null&&(a["lcp.renderTime"]=t.renderTime),t.size!=null&&(a["lcp.size"]=t.size));const c=Ui({name:i,transaction:o,attributes:a,startTime:s});c&&(c.addEvent("lcp",{[sr]:"millisecond",[or]:e}),c.end(s))}const cS=2147483647;let bc=0,we={},Me,gs;function uS({recordClsStandaloneSpans:e,recordLcpStandaloneSpans:t,client:n}){const r=Bs();if(r&&Te()){r.mark&&j.performance.mark("sentry-tracing-init");const s=mS(),o=t?iS(n):hS(),i=gS(),a=e?sS(n):pS();return()=>{s(),o?.(),i(),a?.()}}return()=>{}}function lS(){jt("longtask",({entries:e})=>{const t=Ee();if(!t)return;const{op:n,start_timestamp:r}=q(t);for(const s of e){const o=ie(Te()+s.startTime),i=ie(s.duration);n==="navigation"&&r&&o<r||ft(t,o,o+i,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[le]:"auto.ui.browser.metrics"}})}})}function dS(){new PerformanceObserver(t=>{const n=Ee();if(n)for(const r of t.getEntries()){if(!r.scripts[0])continue;const s=ie(Te()+r.startTime),{start_timestamp:o,op:i}=q(n);if(i==="navigation"&&o&&s<o)continue;const a=ie(r.duration),c={[le]:"auto.ui.browser.metrics"},u=r.scripts[0],{invoker:d,invokerType:l,sourceURL:f,sourceFunctionName:p,sourceCharPosition:h}=u;c["browser.script.invoker"]=d,c["browser.script.invoker_type"]=l,f&&(c["code.filepath"]=f),p&&(c["code.function"]=p),h!==-1&&(c["browser.script.source_char_position"]=h),ft(n,s,s+a,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:c})}}).observe({type:"long-animation-frame",buffered:!0})}function fS(){jt("event",({entries:e})=>{const t=Ee();if(t){for(const n of e)if(n.name==="click"){const r=ie(Te()+n.startTime),s=ie(n.duration),o={name:Be(n.target),op:`ui.interaction.${n.name}`,startTime:r,attributes:{[le]:"auto.ui.browser.metrics"}},i=Ru(n.target);i&&(o.attributes["ui.component_name"]=i),ft(t,r,r+s,o)}}})}function pS(){return Bi(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(we.cls={value:e.value,unit:""},gs=t)},!0)}function hS(){return Hi(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(we.lcp={value:e.value,unit:"millisecond"},Me=t)},!0)}function mS(){return sd(({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=ie(Te()),r=ie(t.startTime);we.fid={value:e.value,unit:"millisecond"},we["mark.fid"]={value:n+r,unit:"second"}})}function gS(){return Ky(({metric:e})=>{e.entries[e.entries.length-1]&&(we.ttfb={value:e.value,unit:"millisecond"})})}function _S(e,t){const n=Bs(),r=Te();if(!n?.getEntries||!r)return;const s=ie(r),o=n.getEntries(),{op:i,start_timestamp:a}=q(e);if(o.slice(bc).forEach(c=>{const u=ie(c.startTime),d=ie(Math.max(0,c.duration));if(!(i==="navigation"&&a&&s+u<a))switch(c.entryType){case"navigation":{bS(e,c,s);break}case"mark":case"paint":case"measure":{yS(e,c,u,d,s,t.ignorePerformanceApiSpans);const l=Fs(),f=c.startTime<l.firstHiddenTime;c.name==="first-paint"&&f&&(we.fp={value:c.startTime,unit:"millisecond"}),c.name==="first-contentful-paint"&&f&&(we.fcp={value:c.startTime,unit:"millisecond"});break}case"resource":{wS(e,c,c.name,u,d,s,t.ignoreResourceSpans);break}}}),bc=Math.max(o.length-1,0),TS(e),i==="pageload"){kS(we);const c=we["mark.fid"];c&&we.fid&&(ft(e,c.value,c.value+ie(we.fid.value),{name:"first input delay",op:"ui.action",attributes:{[le]:"auto.ui.browser.metrics"}}),delete we["mark.fid"]),t.recordClsOnPageloadSpan||delete we.cls,t.recordLcpOnPageloadSpan||delete we.lcp,Object.entries(we).forEach(([u,d])=>{Xp(u,d.value,d.unit)}),e.setAttribute("performance.timeOrigin",s),e.setAttribute("performance.activationStart",Dn()),IS(e,t)}Me=void 0,gs=void 0,we={}}function yS(e,t,n,r,s,o){if(["mark","measure"].includes(t.entryType)&&qe(t.name,o))return;const i=lr(!1),a=ie(i?i.requestStart:0),c=s+Math.max(n,a),u=s+n,d=u+r,l={[le]:"auto.resource.browser.metrics"};c!==u&&(l["sentry.browser.measure_happened_before_request"]=!0,l["sentry.browser.measure_start_time"]=c),SS(l,t),c<=d&&ft(e,c,d,{name:t.name,op:t.entryType,attributes:l})}function SS(e,t){try{const n=t.detail;if(!n)return;if(typeof n=="object"){for(const[r,s]of Object.entries(n))if(s&&fn(s))e[`sentry.browser.measure.detail.${r}`]=s;else if(s!==void 0)try{e[`sentry.browser.measure.detail.${r}`]=JSON.stringify(s)}catch{}return}if(fn(n)){e["sentry.browser.measure.detail"]=n;return}try{e["sentry.browser.measure.detail"]=JSON.stringify(n)}catch{}}catch{}}function bS(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{kr(e,t,r,n)}),kr(e,t,"secureConnection",n,"TLS/SSL"),kr(e,t,"fetch",n,"cache"),kr(e,t,"domainLookup",n,"DNS"),vS(e,t,n)}function kr(e,t,n,r,s=n){const o=ES(n),i=t[o],a=t[`${n}Start`];!a||!i||ft(e,r+ie(a),r+ie(i),{op:`browser.${s}`,name:t.name,attributes:{[le]:"auto.ui.browser.metrics",...n==="redirect"&&t.redirectCount!=null?{"http.redirect_count":t.redirectCount}:{}}})}function ES(e){return e==="secureConnection"?"connectEnd":e==="fetch"?"domainLookupStart":`${e}End`}function vS(e,t,n){const r=n+ie(t.requestStart),s=n+ie(t.responseEnd),o=n+ie(t.responseStart);t.responseEnd&&(ft(e,r,s,{op:"browser.request",name:t.name,attributes:{[le]:"auto.ui.browser.metrics"}}),ft(e,o,s,{op:"browser.response",name:t.name,attributes:{[le]:"auto.ui.browser.metrics"}}))}function wS(e,t,n,r,s,o,i){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;const a=t.initiatorType?`resource.${t.initiatorType}`:"resource.other";if(i?.includes(a))return;const c=Ht(n),u={[le]:"auto.resource.browser.metrics"};go(u,t,"transferSize","http.response_transfer_size"),go(u,t,"encodedBodySize","http.response_content_length"),go(u,t,"decodedBodySize","http.decoded_response_content_length");const d=t.deliveryType;d!=null&&(u["http.response_delivery_type"]=d);const l=t.renderBlockingStatus;if(l&&(u["resource.render_blocking_status"]=l),c.protocol&&(u["url.scheme"]=c.protocol.split(":").pop()),c.host&&(u["server.address"]=c.host),u["url.same_origin"]=n.includes(j.location.origin),t.nextHopProtocol!=null){const{name:h,version:m}=cd(t.nextHopProtocol);u["network.protocol.name"]=h,u["network.protocol.version"]=m}const f=o+r,p=f+s;ft(e,f,p,{name:n.replace(j.location.origin,""),op:a,attributes:u})}function TS(e){const t=j.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),mo(n.rtt)&&(we["connection.rtt"]={value:n.rtt,unit:"millisecond"})),mo(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`),mo(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}function IS(e,t){Me&&t.recordLcpOnPageloadSpan&&(Me.element&&e.setAttribute("lcp.element",Be(Me.element)),Me.id&&e.setAttribute("lcp.id",Me.id),Me.url&&e.setAttribute("lcp.url",Me.url.trim().slice(0,200)),Me.loadTime!=null&&e.setAttribute("lcp.loadTime",Me.loadTime),Me.renderTime!=null&&e.setAttribute("lcp.renderTime",Me.renderTime),e.setAttribute("lcp.size",Me.size)),gs?.sources&&t.recordClsOnPageloadSpan&&gs.sources.forEach((n,r)=>e.setAttribute(`cls.source.${r+1}`,Be(n.node)))}function go(e,t,n,r){const s=t[n];s!=null&&s<cS&&(e[r]=s)}function kS(e){const t=lr(!1);if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}function CS(){return Bs()&&Te()?jt("element",RS):()=>{}}const RS=({entries:e})=>{const t=Ee(),n=t?Se(t):void 0,r=n?q(n).description:X().getScopeData().transactionName;e.forEach(s=>{const o=s;if(!o.identifier)return;const i=o.name,a=o.renderTime,c=o.loadTime,[u,d]=c?[ie(c),"load-time"]:a?[ie(a),"render-time"]:[he(),"entry-emission"],l=i==="image-paint"?ie(Math.max(0,(a??0)-(c??0))):0,f={[le]:"auto.ui.browser.elementtiming",[He]:"ui.elementtiming",[Fe]:"component","sentry.span_start_time_source":d,"sentry.transaction_name":r,"element.id":o.id,"element.type":o.element?.tagName?.toLowerCase()||"unknown","element.size":o.naturalWidth&&o.naturalHeight?`${o.naturalWidth}x${o.naturalHeight}`:void 0,"element.render_time":a,"element.load_time":c,"element.url":o.url||void 0,"element.identifier":o.identifier,"element.paint_type":i};Ei({name:`element[${o.identifier}]`,attributes:f,startTime:u,onlyIfParent:!0},p=>{p.end(u+l)})})},xS=1e3;let Ec,Yo,Xo;function dd(e){Rt("dom",e),xt("dom",MS)}function MS(){if(!j.document)return;const e=$e.bind(null,"dom"),t=vc(e,!0);j.document.addEventListener("click",t,!1),j.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{const s=j[n]?.prototype;s?.hasOwnProperty?.("addEventListener")&&(Re(s,"addEventListener",function(o){return function(i,a,c){if(i==="click"||i=="keypress")try{const u=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},d=u[i]=u[i]||{refCount:0};if(!d.handler){const l=vc(e);d.handler=l,o.call(this,i,l,c)}d.refCount++}catch{}return o.call(this,i,a,c)}}),Re(s,"removeEventListener",function(o){return function(i,a,c){if(i==="click"||i=="keypress")try{const u=this.__sentry_instrumentation_handlers__||{},d=u[i];d&&(d.refCount--,d.refCount<=0&&(o.call(this,i,d.handler,c),d.handler=void 0,delete u[i]),Object.keys(u).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return o.call(this,i,a,c)}}))})}function AS(e){if(e.type!==Yo)return!1;try{if(!e.target||e.target._sentryId!==Xo)return!1}catch{}return!0}function OS(e,t){return e!=="keypress"?!1:t?.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function vc(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=NS(n);if(OS(n.type,r))return;Ae(n,"_sentryCaptured",!0),r&&!r._sentryId&&Ae(r,"_sentryId",xe());const s=n.type==="keypress"?"input":n.type;AS(n)||(e({event:n,name:s,global:t}),Yo=n.type,Xo=r?r._sentryId:void 0),clearTimeout(Ec),Ec=j.setTimeout(()=>{Xo=void 0,Yo=void 0},xS)}}function NS(e){try{return e.target}catch{return null}}let Cr;function Hs(e){const t="history";Rt(t,e),xt(t,LS)}function LS(){if(j.addEventListener("popstate",()=>{const t=j.location.href,n=Cr;if(Cr=t,n===t)return;$e("history",{from:n,to:t})}),!Dg())return;function e(t){return function(...n){const r=n.length>2?n[2]:void 0;if(r){const s=Cr,o=DS(String(r));if(Cr=o,s===o)return t.apply(this,n);$e("history",{from:s,to:o})}return t.apply(this,n)}}Re(j.history,"pushState",e),Re(j.history,"replaceState",e)}function DS(e){try{return new URL(e,j.location.origin).toString()}catch{return e}}const Yr={};function Wi(e){const t=Yr[e];if(t)return t;let n=j[e];if(Fo(n))return Yr[e]=n.bind(j);const r=j.document;if(r&&typeof r.createElement=="function")try{const s=r.createElement("iframe");s.hidden=!0,r.head.appendChild(s);const o=s.contentWindow;o?.[e]&&(n=o[e]),r.head.removeChild(s)}catch(s){wn&&_.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,s)}return n&&(Yr[e]=n.bind(j))}function wc(e){Yr[e]=void 0}function pr(...e){return Wi("setTimeout")(...e)}const nt="__sentry_xhr_v3__";function zi(e){Rt("xhr",e),xt("xhr",PS)}function PS(){if(!j.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,r){const s=new Error,o=he()*1e3,i=je(r[0])?r[0].toUpperCase():void 0,a=FS(r[1]);if(!i||!a)return t.apply(n,r);n[nt]={method:i,url:a,request_headers:{}},i==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const c=()=>{const u=n[nt];if(u&&n.readyState===4){try{u.status_code=n.status}catch{}const d={endTimestamp:he()*1e3,startTimestamp:o,xhr:n,virtualError:s};$e("xhr",d)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(u,d,l){return c(),u.apply(d,l)}}):n.addEventListener("readystatechange",c),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(u,d,l){const[f,p]=l,h=d[nt];return h&&je(f)&&je(p)&&(h.request_headers[f.toLowerCase()]=p),u.apply(d,l)}}),t.apply(n,r)}}),e.send=new Proxy(e.send,{apply(t,n,r){const s=n[nt];if(!s)return t.apply(n,r);r[0]!==void 0&&(s.body=r[0]);const o={startTimestamp:he()*1e3,xhr:n};return $e("xhr",o),t.apply(n,r)}})}function FS(e){if(je(e))return e;try{return e.toString()}catch{}}function fd(e){return new URLSearchParams(e).toString()}function _s(e,t=_){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[fd(e)];if(!e)return[void 0]}catch(n){return wn&&t.error(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return wn&&t.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function ji(e=[]){if(!(e.length!==2||typeof e[1]!="object"))return e[1].body}const _o=[],Xr=new Map,$S=60;function BS(){if(Bs()&&Te()){const t=HS();return()=>{t()}}return()=>{}}const Tc={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function HS(){return od(US)}const US=({metric:e})=>{if(e.value==null)return;const t=ie(e.value);if(t>$S)return;const n=e.entries.find(h=>h.duration===e.value&&Tc[h.name]);if(!n)return;const{interactionId:r}=n,s=Tc[n.name],o=ie(Te()+n.startTime),i=Ee(),a=i?Se(i):void 0,u=(r!=null?Xr.get(r):void 0)||a,d=u?q(u).description:X().getScopeData().transactionName,l=Be(n.target),f={[le]:"auto.http.browser.inp",[He]:`ui.interaction.${s}`,[An]:n.duration},p=Ui({name:l,transaction:d,attributes:f,startTime:o});p&&(p.addEvent("inp",{[sr]:"millisecond",[or]:e.value}),p.end(o+t))};function WS(){const e=({entries:t})=>{const n=Ee(),r=n&&Se(n);t.forEach(s=>{if(!rS(s)||!r)return;const o=s.interactionId;if(o!=null&&!Xr.has(o)){if(_o.length>10){const i=_o.shift();Xr.delete(i)}_o.push(o),Xr.set(o,r)}})};jt("event",e),jt("first-input",e)}function pd(e,t=Wi("fetch")){let n=0,r=0;function s(o){const i=o.body.length;n+=i,r++;const a={body:o.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};if(!t)return wc("fetch"),cs("No fetch implementation available");try{return t(e.url,a).then(c=>(n-=i,r--,{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}))}catch(c){return wc("fetch"),n-=i,r--,cs(c)}}return em(e,s)}const zS=10,jS=20,qS=30,GS=40,VS=50;function Tn(e,t,n,r){const s={filename:e,function:t==="<anonymous>"?Ze:t,in_app:!0};return n!==void 0&&(s.lineno=n),r!==void 0&&(s.colno=r),s}const YS=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,XS=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,KS=/\((\S*)(?::(\d+))(?::(\d+))\)/,JS=e=>{const t=YS.exec(e);if(t){const[,r,s,o]=t;return Tn(r,Ze,+s,+o)}const n=XS.exec(e);if(n){if(n[2]&&n[2].indexOf("eval")===0){const i=KS.exec(n[2]);i&&(n[2]=i[1],n[3]=i[2],n[4]=i[3])}const[s,o]=hd(n[1]||Ze,n[2]);return Tn(o,s,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}},ZS=[qS,JS],QS=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,eb=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,tb=e=>{const t=QS.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const o=eb.exec(t[3]);o&&(t[1]=t[1]||"eval",t[3]=o[1],t[4]=o[2],t[5]="")}let r=t[3],s=t[1]||Ze;return[s,r]=hd(s,r),Tn(r,s,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},nb=[VS,tb],rb=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,sb=e=>{const t=rb.exec(e);return t?Tn(t[2],t[1]||Ze,+t[3],t[4]?+t[4]:void 0):void 0},VI=[GS,sb],ob=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,ib=e=>{const t=ob.exec(e);return t?Tn(t[2],t[3]||Ze,+t[1]):void 0},YI=[zS,ib],ab=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,cb=e=>{const t=ab.exec(e);return t?Tn(t[5],t[3]||t[4]||Ze,+t[1],+t[2]):void 0},XI=[jS,cb],ub=[ZS,nb],lb=Eu(...ub),hd=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:Ze,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};function KI(e,{metadata:t,tunnel:n,dsn:r}){const s={event_id:e.event_id,sent_at:new Date().toISOString(),...t?.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Yt(r)}},o=db(e);return ht(s,[o])}function db(e){return[{type:"user_report"},e]}const Y=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Rr=1024,fb="Breadcrumbs",pb=((e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:fb,setup(n){t.console&&ki(_b(n)),t.dom&&dd(gb(n,t.dom)),t.xhr&&zi(yb(n)),t.fetch&&Ri(Sb(n)),t.history&&Hs(bb(n)),t.sentry&&n.on("beforeSendEvent",mb(n))}}}),hb=pb;function mb(e){return function(n){A()===e&&lt({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:Nt(n)},{event:n})}}function gb(e,t){return function(r){if(A()!==e)return;let s,o,i=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>Rr&&(Y&&_.warn(`\`dom.maxStringLength\` cannot exceed ${Rr}, but a value of ${a} was configured. Sentry will use ${Rr} instead.`),a=Rr),typeof i=="string"&&(i=[i]);try{const u=r.event,d=Eb(u)?u.target:u;s=Be(d,{keyAttrs:i,maxStringLength:a}),o=Ru(d)}catch{s="<unknown>"}if(s.length===0)return;const c={category:`ui.${r.name}`,message:s};o&&(c.data={"ui.component_name":o}),lt(c,{event:r.event,name:r.name,global:r.global})}}function _b(e){return function(n){if(A()!==e)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:Ci(n.level),message:ts(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${ts(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;lt(r,{input:n.args,level:n.level})}}function yb(e){return function(n){if(A()!==e)return;const{startTimestamp:r,endTimestamp:s}=n,o=n.xhr[nt];if(!r||!s||!o)return;const{method:i,url:a,status_code:c,body:u}=o,d={method:i,url:a,status_code:c},l={xhr:n.xhr,input:u,startTimestamp:r,endTimestamp:s},f={category:"xhr",data:d,type:"http",level:Al(c)};e.emit("beforeOutgoingRequestBreadcrumb",f,l),lt(f,l)}}function Sb(e){return function(n){if(A()!==e)return;const{startTimestamp:r,endTimestamp:s}=n;if(s&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.fetchData.method,n.fetchData.url,n.error){const o=n.fetchData,i={data:n.error,input:n.args,startTimestamp:r,endTimestamp:s},a={category:"fetch",data:o,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",a,i),lt(a,i)}else{const o=n.response,i={...n.fetchData,status_code:o?.status};n.fetchData.request_body_size,n.fetchData.response_body_size,o?.status;const a={input:n.args,response:o,startTimestamp:r,endTimestamp:s},c={category:"fetch",data:i,type:"http",level:Al(i.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",c,a),lt(c,a)}}}function bb(e){return function(n){if(A()!==e)return;let r=n.from,s=n.to;const o=Ht(D.location.href);let i=r?Ht(r):void 0;const a=Ht(s);i?.path||(i=o),o.protocol===a.protocol&&o.host===a.host&&(s=a.relative),o.protocol===i.protocol&&o.host===i.host&&(r=i.relative),lt({category:"navigation",data:{from:r,to:s}})}}function Eb(e){return!!e&&!!e.target}const vb=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],wb="BrowserApiErrors",Tb=((e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:wb,setupOnce(){t.setTimeout&&Re(D,"setTimeout",Ic),t.setInterval&&Re(D,"setInterval",Ic),t.requestAnimationFrame&&Re(D,"requestAnimationFrame",kb),t.XMLHttpRequest&&"XMLHttpRequest"in D&&Re(XMLHttpRequest.prototype,"send",Cb);const n=t.eventTarget;n&&(Array.isArray(n)?n:vb).forEach(s=>Rb(s,t))}}}),Ib=Tb;function Ic(e){return function(...t){const n=t[0];return t[0]=vn(n,{mechanism:{data:{function:st(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function kb(e){return function(t){return e.apply(this,[vn(t,{mechanism:{data:{function:"requestAnimationFrame",handler:st(e)},handled:!1,type:"instrument"}})])}}function Cb(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in n&&typeof n[s]=="function"&&Re(n,s,function(o){const i={mechanism:{data:{function:s,handler:st(o)},handled:!1,type:"instrument"}},a=fi(o);return a&&(i.mechanism.data.handler=st(a)),vn(o,i)})}),e.apply(this,t)}}function Rb(e,t){const r=D[e]?.prototype;r?.hasOwnProperty?.("addEventListener")&&(Re(r,"addEventListener",function(s){return function(o,i,a){try{xb(i)&&(i.handleEvent=vn(i.handleEvent,{mechanism:{data:{function:"handleEvent",handler:st(i),target:e},handled:!1,type:"instrument"}}))}catch{}return t.unregisterOriginalCallbacks&&Mb(this,o,i),s.apply(this,[o,vn(i,{mechanism:{data:{function:"addEventListener",handler:st(i),target:e},handled:!1,type:"instrument"}}),a])}}),Re(r,"removeEventListener",function(s){return function(o,i,a){try{const c=i.__sentry_wrapped__;c&&s.call(this,o,c,a)}catch{}return s.call(this,o,i,a)}}))}function xb(e){return typeof e.handleEvent=="function"}function Mb(e,t,n){e&&typeof e=="object"&&"removeEventListener"in e&&typeof e.removeEventListener=="function"&&e.removeEventListener(t,n)}const Ab=()=>({name:"BrowserSession",setupOnce(){if(typeof D.document>"u"){Y&&_.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}Na({ignoreDuration:!0}),La(),Hs(({from:e,to:t})=>{e!==void 0&&e!==t&&(Na({ignoreDuration:!0}),La())})}}),Ob="GlobalHandlers",Nb=((e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:Ob,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(Db(n),kc("onerror")),t.onunhandledrejection&&(Pb(n),kc("onunhandledrejection"))}}}),Lb=Nb;function Db(e){vu(t=>{const{stackParser:n,attachStacktrace:r}=md();if(A()!==e||Vl())return;const{msg:s,url:o,line:i,column:a,error:c}=t,u=Bb(Fi(n,c||s,void 0,r,!1),o,i,a);u.level="error",Os(u,{originalException:c,mechanism:{handled:!1,type:"onerror"}})})}function Pb(e){wu(t=>{const{stackParser:n,attachStacktrace:r}=md();if(A()!==e||Vl())return;const s=Fb(t),o=fn(s)?$b(s):Fi(n,s,void 0,r,!0);o.level="error",Os(o,{originalException:s,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function Fb(e){if(fn(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function $b(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function Bb(e,t,n,r){const s=e.exception=e.exception||{},o=s.values=s.values||[],i=o[0]=o[0]||{},a=i.stacktrace=i.stacktrace||{},c=a.frames=a.frames||[],u=r,d=n,l=je(t)&&t.length>0?t:qt();return c.length===0&&c.push({colno:u,filename:l,function:Ze,in_app:!0,lineno:d}),e}function kc(e){Y&&_.log(`Global Handler attached: ${e}`)}function md(){return A()?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Hb=()=>({name:"HttpContext",preprocessEvent(e){if(!D.navigator&&!D.location&&!D.document)return;const t=Li(),n={...t.headers,...e.request?.headers};e.request={...t,...e.request,headers:n}}}),Ub="cause",Wb=5,zb="LinkedErrors",jb=((e={})=>{const t=e.limit||Wb,n=e.key||Ub;return{name:zb,preprocessEvent(r,s,o){const i=o.getOptions();xm(Di,i.stackParser,n,t,r,s)}}}),qb=jb;function Gb(){return Vb()?(Y&&Ct(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function Vb(){if(typeof D.window>"u")return!1;const e=D;if(e.nw||!(e.chrome||e.browser)?.runtime?.id)return!1;const n=qt(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(D===D.top&&r.some(o=>n.startsWith(`${o}://`)))}function Yb(e){return[Em(),_m(),Ib(),hb(),Lb(),qb(),$m(),Hb(),Ab()]}function JI(e={}){const t=!e.skipBrowserExtensionCheck&&Gb(),n={...e,enabled:t?!1:e.enabled,stackParser:Df(e.stackParser||lb),integrations:Oh({integrations:e.integrations,defaultIntegrations:e.defaultIntegrations==null?Yb():e.defaultIntegrations}),transport:e.transport||pd};return Yh(ky,n)}function ZI(){}function QI(e){e()}function e1(e={}){const t=D.document,n=t?.head||t?.body;if(!n){Y&&_.error("[showReportDialog] Global document not defined");return}const r=X(),o=A()?.getDsn();if(!o){Y&&_.error("[showReportDialog] DSN not configured");return}const i={...e,user:{...r.getUser(),...e.user},eventId:e.eventId||Th()},a=D.document.createElement("script");a.async=!0,a.crossOrigin="anonymous",a.src=Mh(o,i);const{onLoad:c,onClose:u}=i;if(c&&(a.onload=c),u){const d=l=>{if(l.data==="__sentry_reportdialog_closed__")try{u()}finally{D.removeEventListener("message",d)}};D.addEventListener("message",d)}n.appendChild(a)}const Xb=H,Kb="ReportingObserver",Cc=new WeakMap,Jb=((e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(r){if(Cc.has(A()))for(const s of r)Ve(o=>{o.setExtra("url",s.url);const i=`ReportingObserver [${s.type}]`;let a="No details available";if(s.body){const c={};for(const u in s.body)c[u]=s.body[u];if(o.setExtra("body",c),s.type==="crash"){const u=s.body;a=[u.crashId||"",u.reason||""].join(" ").trim()||a}else a=s.body.message||a}No(`${i}: ${a}`)})}return{name:Kb,setupOnce(){if(!Fg())return;new Xb.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(r){Cc.set(r,!0)}}}),t1=Jb,Zb="HttpClient",Qb=((e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:Zb,setup(n){aE(n,t),cE(n,t)}}}),n1=Qb;function eE(e,t,n,r,s){if(_d(e,n.status,n.url)){const o=uE(t,r);let i,a,c,u;Sd()&&([i,c]=Rc("Cookie",o),[a,u]=Rc("Set-Cookie",n));const d=yd({url:o.url,method:o.method,status:n.status,requestHeaders:i,responseHeaders:a,requestCookies:c,responseCookies:u,error:s});Os(d)}}function Rc(e,t){const n=rE(t.headers);let r;try{const s=n[e]||n[e.toLowerCase()]||void 0;s&&(r=gd(s))}catch{}return[n,r]}function tE(e,t,n,r,s){if(_d(e,t.status,t.responseURL)){let o,i,a;if(Sd()){try{const u=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;u&&(i=gd(u))}catch{}try{a=sE(t)}catch{}o=r}const c=yd({url:t.responseURL,method:n,status:t.status,requestHeaders:o,responseHeaders:a,responseCookies:i,error:s});Os(c)}}function nE(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function gd(e){return e.split("; ").reduce((t,n)=>{const[r,s]=n.split("=");return r&&s&&(t[r]=s),t},{})}function rE(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function sE(e){const t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{const[s,o]=r.split(": ");return s&&o&&(n[s]=o),n},{}):{}}function oE(e,t){return e.some(n=>typeof n=="string"?t.includes(n):n.test(t))}function iE(e,t){return e.some(n=>typeof n=="number"?n===t:t>=n[0]&&t<=n[1])}function aE(e,t){Ol()&&Ri(n=>{if(A()!==e)return;const{response:r,args:s,error:o,virtualError:i}=n,[a,c]=s;r&&eE(t,a,r,c,o||i)},!1)}function cE(e,t){"XMLHttpRequest"in H&&zi(n=>{if(A()!==e)return;const{error:r,virtualError:s}=n,o=n.xhr,i=o[nt];if(!i)return;const{method:a,request_headers:c}=i;try{tE(t,o,a,c,r||s)}catch(u){Y&&_.warn("Error while extracting response event form XHR response",u)}})}function _d(e,t,n){return iE(e.failedRequestStatusCodes,t)&&oE(e.failedRequestTargets,n)&&!bl(n,A())}function yd(e){const t=A(),n=t&&e.error&&e.error instanceof Error?e.error.stack:void 0,r=n&&t?t.getOptions().stackParser(n,0,1):void 0,s=`HTTP Client Error with status code: ${e.status}`,o={message:s,exception:{values:[{type:"Error",value:s,stacktrace:r?{frames:r}:void 0}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:nE(e.responseHeaders)}}};return Tt(o,{type:"http.client",handled:!1}),o}function uE(e,t){return!t&&e instanceof Request||e instanceof Request&&e.bodyUsed?e:new Request(e,t)}function Sd(){const e=A();return e?!!e.getOptions().sendDefaultPii:!1}const yo=H,lE=7,dE="ContextLines",fE=((e={})=>{const t=e.frameContextLines!=null?e.frameContextLines:lE;return{name:dE,processEvent(n){return pE(n,t)}}}),r1=fE;function pE(e,t){const n=yo.document,r=yo.location&&Ml(yo.location.href);if(!n||!r)return e;const s=e.exception?.values;if(!s?.length)return e;const o=n.documentElement.innerHTML;if(!o)return e;const i=["<!DOCTYPE html>","<html>",...o.split(`
`),"</html>"];return s.forEach(a=>{const c=a.stacktrace;c?.frames&&(c.frames=c.frames.map(u=>hE(u,i,r,t)))}),e}function hE(e,t,n,r){return e.filename!==n||!e.lineno||!t.length||Yf(t,e,r),e}const mE="GraphQLClient",gE=(e=>({name:mE,setup(t){_E(t,e),yE(t,e)}}));function _E(e,t){e.on("beforeOutgoingRequestSpan",(n,r)=>{const o=q(n).data||{};if(!(o[He]==="http.client"))return;const c=o[up]||o["http.url"],u=o[cp]||o["http.method"];if(!je(c)||!je(u))return;const{endpoints:d}=t,l=qe(c,d),f=Ed(r);if(l&&f){const p=vd(f);if(p){const h=bd(p);n.updateName(`${u} ${c} (${h})`),n.setAttribute("graphql.document",f)}}})}function yE(e,t){e.on("beforeOutgoingRequestBreadcrumb",(n,r)=>{const{category:s,type:o,data:i}=n;if(o==="http"&&(s==="fetch"||s==="xhr")){const d=i?.url,{endpoints:l}=t,f=qe(d,l),p=Ed(r);if(f&&i&&p){const h=vd(p);if(!i.graphql&&h){const m=bd(h);i["graphql.document"]=h.query,i["graphql.operation"]=m}}}})}function bd(e){const{query:t,operationName:n}=e,{operationName:r=n,operationType:s}=SE(t);return r?`${s} ${r}`:`${s}`}function Ed(e){const t="xhr"in e;let n;if(t){const r=e.xhr[nt];n=r&&_s(r.body)[0]}else{const r=ji(e.input);n=_s(r)[0]}return n}function SE(e){const t=/^(?:\s*)(query|mutation|subscription)(?:\s*)(\w+)(?:\s*)[{(]/,n=/^(?:\s*)(query|mutation|subscription)(?:\s*)[{(]/,r=e.match(t);if(r)return{operationType:r[1],operationName:r[2]};const s=e.match(n);return s?{operationType:s[1],operationName:void 0}:{operationType:void 0,operationName:void 0}}function vd(e){let t;try{const n=JSON.parse(e);!!n.query&&(t=n)}finally{return t}}const s1=gE,oe=H,qi="sentryReplaySession",bE="replay_event",Gi="Unable to send Replay",EE=3e5,vE=9e5,wE=5e3,TE=5500,IE=6e4,kE=5e3,CE=3,xc=15e4,xr=5e3,RE=3e3,xE=300,Vi=2e7,ME=4999,AE=15e3,Mc=36e5;var OE=Object.defineProperty,NE=(e,t,n)=>t in e?OE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ac=(e,t,n)=>NE(e,typeof t!="symbol"?t+"":t,n),ye=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(ye||{});function LE(e){return e.nodeType===e.ELEMENT_NODE}function zn(e){return e?.host?.shadowRoot===e}function jn(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function DE(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}function PE(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function ys(e){try{const t=e.rules||e.cssRules;return t?DE(Array.from(t,wd).join("")):null}catch{return null}}function FE(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style,s=r[n],o=r.getPropertyPriority(s);t+=`${s}:${r.getPropertyValue(s)}${o?" !important":""};`}return`${e.selectorText} { ${t} }`}function wd(e){let t;if(BE(e))try{t=ys(e.styleSheet)||PE(e)}catch{}else if(HE(e)){let n=e.cssText;const r=e.selectorText.includes(":"),s=typeof e.style.all=="string"&&e.style.all;if(s&&(n=FE(e)),r&&(n=$E(n)),r||s)return n}return t||e.cssText}function $E(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function BE(e){return"styleSheet"in e}function HE(e){return"selectorText"in e}let Td=class{constructor(){Ac(this,"idNodeMap",new Map),Ac(this,"nodeMetaMap",new WeakMap)}getId(t){return t?this.getMeta(t)?.id??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const s=this.nodeMetaMap.get(r);s&&this.nodeMetaMap.set(n,s)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function UE(){return new Td}function Us({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function Yn({isMasked:e,element:t,value:n,maskInputFn:r}){let s=n||"";return e?(r&&(s=r(s,t)),"*".repeat(s.length)):s}function In(e){return e.toLowerCase()}function Ko(e){return e.toUpperCase()}const Oc="__rrweb_original__";function WE(e){const t=e.getContext("2d");if(!t)return!0;const n=50;for(let r=0;r<e.width;r+=n)for(let s=0;s<e.height;s+=n){const o=t.getImageData,i=Oc in o?o[Oc]:o;if(new Uint32Array(i.call(t,r,s,Math.min(n,e.width-r),Math.min(n,e.height-s)).data.buffer).some(c=>c!==0))return!1}return!0}function Yi(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?In(t):null}function Ss(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}function Id(e,t){let n;try{n=new URL(e,t??window.location.href)}catch{return null}const r=/\.([0-9a-z]+)(?:$)/i;return n.pathname.match(r)?.[1]??null}const Nc={};function kd(e){const t=Nc[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const o=s.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(s)}catch{}return Nc[e]=r.bind(window)}function Jo(...e){return kd("setTimeout")(...e)}function Cd(...e){return kd("clearTimeout")(...e)}function Rd(e){try{return e.contentDocument}catch{}}let zE=1;const jE=new RegExp("[^a-z0-9-_:]"),Xn=-2;function Xi(){return zE++}function qE(e){if(e instanceof HTMLFormElement)return"form";const t=In(e.tagName);return jE.test(t)?"div":t}function GE(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}let tn,Lc;const VE=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,YE=/^(?:[a-z+]+:)?\/\//i,XE=/^www\..*/i,KE=/^(data:)([^,]*),(.*)/i;function bs(e,t){return(e||"").replace(VE,(n,r,s,o,i,a)=>{const c=s||i||a,u=r||o||"";if(!c)return n;if(YE.test(c)||XE.test(c))return`url(${u}${c}${u})`;if(KE.test(c))return`url(${u}${c}${u})`;if(c[0]==="/")return`url(${u}${GE(t)+c}${u})`;const d=t.split("/"),l=c.split("/");d.pop();for(const f of l)f!=="."&&(f===".."?d.pop():d.push(f));return`url(${u}${d.join("/")}${u})`})}const JE=/^[^ \t\n\r\u000c]+/,ZE=/^[, \t\n\r\u000c]+/;function QE(e,t){if(t.trim()==="")return t;let n=0;function r(o){let i;const a=o.exec(t.substring(n));return a?(i=a[0],n+=i.length,i):""}const s=[];for(;r(ZE),!(n>=t.length);){let o=r(JE);if(o.slice(-1)===",")o=on(e,o.substring(0,o.length-1)),s.push(o);else{let i="";o=on(e,o);let a=!1;for(;;){const c=t.charAt(n);if(c===""){s.push((o+i).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,s.push((o+i).trim());break}else c==="("&&(a=!0);i+=c,n+=1}}}return s.join(", ")}const Dc=new WeakMap;function on(e,t){return!t||t.trim()===""?t:Ws(e,t)}function ev(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function Ws(e,t){let n=Dc.get(e);if(n||(n=e.createElement("a"),Dc.set(e,n)),!t)t="";else if(t.startsWith("blob:")||t.startsWith("data:"))return t;return n.setAttribute("href",t),n.href}function xd(e,t,n,r,s,o){return r&&(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#")||n==="xlink:href"&&r[0]!=="#"||n==="background"&&(t==="table"||t==="td"||t==="th")?on(e,r):n==="srcset"?QE(e,r):n==="style"?bs(r,Ws(e)):t==="object"&&n==="data"?on(e,r):typeof o=="function"?o(n,r,s):r)}function Md(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function Ad(e,t,n,r){try{if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let s=e.classList.length;s--;){const o=e.classList[s];if(t.test(o))return!0}if(n)return e.matches(n)}catch{}return!1}function tv(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function Pt(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Pt(e.parentNode,t,n,r+1)}function an(e,t){return n=>{const r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(tv(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}function kn(e,t,n,r,s,o){try{const i=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(i===null)return!1;if(i.tagName==="INPUT"){const u=i.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(u))return!0}let a=-1,c=-1;if(o){if(c=Pt(i,an(r,s)),c<0)return!0;a=Pt(i,an(t,n),c>=0?c:1/0)}else{if(a=Pt(i,an(t,n)),a<0)return!1;c=Pt(i,an(r,s),a>=0?a:1/0)}return a>=0?c>=0?a<=c:!0:c>=0?!1:!!o}catch{}return!!o}function nv(e,t,n){const r=e.contentWindow;if(!r)return;let s=!1,o;try{o=r.document.readyState}catch{return}if(o!=="complete"){const a=Jo(()=>{s||(t(),s=!0)},n);e.addEventListener("load",()=>{Cd(a),s=!0,t()});return}const i="about:blank";if(r.location.href!==i||e.src===i||e.src==="")return Jo(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function rv(e,t,n){let r=!1,s;try{s=e.sheet}catch{return}if(s)return;const o=Jo(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{Cd(o),r=!0,t()})}function sv(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,inlineStylesheet:p,maskInputOptions:h={},maskTextFn:m,maskInputFn:g,dataURLOptions:y={},inlineImages:b,recordCanvas:L,keepIframeSrcFn:k,newlyAddedElement:C=!1}=t,S=ov(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:ye.Document,childNodes:[],compatMode:e.compatMode}:{type:ye.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:ye.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:S};case e.ELEMENT_NODE:return av(e,{doc:n,blockClass:s,blockSelector:o,unblockSelector:i,inlineStylesheet:p,maskAttributeFn:c,maskInputOptions:h,maskInputFn:g,dataURLOptions:y,inlineImages:b,recordCanvas:L,keepIframeSrcFn:k,newlyAddedElement:C,rootId:S,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f});case e.TEXT_NODE:return iv(e,{doc:n,maskAllText:a,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,maskTextFn:m,maskInputOptions:h,maskInputFn:g,rootId:S});case e.CDATA_SECTION_NODE:return{type:ye.CDATA,textContent:"",rootId:S};case e.COMMENT_NODE:return{type:ye.Comment,textContent:e.textContent||"",rootId:S};default:return!1}}function ov(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return n===1?void 0:n}function iv(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:s,maskTextSelector:o,unmaskTextSelector:i,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:d}=t,l=e.parentNode&&e.parentNode.tagName;let f=e.textContent;const p=l==="STYLE"?!0:void 0,h=l==="SCRIPT"?!0:void 0,m=l==="TEXTAREA"?!0:void 0;if(p&&f){try{e.nextSibling||e.previousSibling||e.parentNode.sheet?.cssRules&&(f=ys(e.parentNode.sheet))}catch(y){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${y}`,e)}f=bs(f,Ws(t.doc))}h&&(f="SCRIPT_PLACEHOLDER");const g=kn(e,r,o,s,i,n);if(!p&&!h&&!m&&f&&g&&(f=a?a(f,e.parentElement):f.replace(/[\S]/g,"*")),m&&f&&(c.textarea||g)&&(f=u?u(f,e.parentNode):f.replace(/[\S]/g,"*")),l==="OPTION"&&f){const y=Us({type:null,tagName:l,maskInputOptions:c});f=Yn({isMasked:kn(e,r,o,s,i,y),element:e,value:f,maskInputFn:u})}return{type:ye.Text,textContent:f||"",isStyle:p,rootId:d}}function av(e,t){const{doc:n,blockClass:r,blockSelector:s,unblockSelector:o,inlineStylesheet:i,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:d={},inlineImages:l,recordCanvas:f,keepIframeSrcFn:p,newlyAddedElement:h=!1,rootId:m,maskTextClass:g,unmaskTextClass:y,maskTextSelector:b,unmaskTextSelector:L}=t,k=Ad(e,r,s,o),C=qE(e);let S={};const w=e.attributes.length;for(let E=0;E<w;E++){const I=e.attributes[E];I.name&&!Md(C,I.name,I.value)&&(S[I.name]=xd(n,C,In(I.name),I.value,e,c))}if(C==="link"&&i){const E=Array.from(n.styleSheets).find(P=>P.href===e.href);let I=null;E&&(I=ys(E)),I&&(S.rel=null,S.href=null,S.crossorigin=null,S._cssText=bs(I,E.href))}if(C==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const E=ys(e.sheet);E&&(S._cssText=bs(E,Ws(n)))}if(C==="input"||C==="textarea"||C==="select"||C==="option"){const E=e,I=Yi(E),P=Ss(E,Ko(C),I),v=E.checked;if(I!=="submit"&&I!=="button"&&P){const M=kn(E,g,b,y,L,Us({type:I,tagName:Ko(C),maskInputOptions:a}));S.value=Yn({isMasked:M,element:E,value:P,maskInputFn:u})}v&&(S.checked=v)}if(C==="option"&&(e.selected&&!a.select?S.selected=!0:delete S.selected),C==="canvas"&&f){if(e.__context==="2d")WE(e)||(S.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){const E=e.toDataURL(d.type,d.quality),I=n.createElement("canvas");I.width=e.width,I.height=e.height;const P=I.toDataURL(d.type,d.quality);E!==P&&(S.rr_dataURL=E)}}if(C==="img"&&l){tn||(tn=n.createElement("canvas"),Lc=tn.getContext("2d"));const E=e,I=E.currentSrc||E.getAttribute("src")||"<unknown-src>",P=E.crossOrigin,v=()=>{E.removeEventListener("load",v);try{tn.width=E.naturalWidth,tn.height=E.naturalHeight,Lc.drawImage(E,0,0),S.rr_dataURL=tn.toDataURL(d.type,d.quality)}catch(M){if(E.crossOrigin!=="anonymous"){E.crossOrigin="anonymous",E.complete&&E.naturalWidth!==0?v():E.addEventListener("load",v);return}else console.warn(`Cannot inline img src=${I}! Error: ${M}`)}E.crossOrigin==="anonymous"&&(P?S.crossOrigin=P:E.removeAttribute("crossorigin"))};E.complete&&E.naturalWidth!==0?v():E.addEventListener("load",v)}if((C==="audio"||C==="video")&&(S.rr_mediaState=e.paused?"paused":"played",S.rr_mediaCurrentTime=e.currentTime),h||(e.scrollLeft&&(S.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(S.rr_scrollTop=e.scrollTop)),k){const{width:E,height:I}=e.getBoundingClientRect();S={class:S.class,rr_width:`${E}px`,rr_height:`${I}px`}}C==="iframe"&&!p(S.src)&&(!k&&!Rd(e)&&(S.rr_src=S.src),delete S.src);let x;try{customElements.get(C)&&(x=!0)}catch{}return{type:ye.Element,tagName:C,attributes:S,childNodes:[],isSVG:ev(e)||void 0,needBlock:k,rootId:m,isCustom:x}}function se(e){return e==null?"":e.toLowerCase()}function cv(e,t){if(t.comment&&e.type===ye.Comment)return!0;if(e.type===ye.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&Id(e.attributes.href)==="js"))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(se(e.attributes.name).match(/^msapplication-tile(image|color)$/)||se(e.attributes.name)==="application-name"||se(e.attributes.rel)==="icon"||se(e.attributes.rel)==="apple-touch-icon"||se(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&se(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(se(e.attributes.property).match(/^(og|twitter|fb):/)||se(e.attributes.name).match(/^(og|twitter):/)||se(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(se(e.attributes.name)==="robots"||se(e.attributes.name)==="googlebot"||se(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(se(e.attributes.name)==="author"||se(e.attributes.name)==="generator"||se(e.attributes.name)==="framework"||se(e.attributes.name)==="publisher"||se(e.attributes.name)==="progid"||se(e.attributes.property).match(/^article:/)||se(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(se(e.attributes.name)==="google-site-verification"||se(e.attributes.name)==="yandex-verification"||se(e.attributes.name)==="csrf-token"||se(e.attributes.name)==="p:domain_verify"||se(e.attributes.name)==="verify-v1"||se(e.attributes.name)==="verification"||se(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function cn(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:f=!1,inlineStylesheet:p=!0,maskInputOptions:h={},maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:b,dataURLOptions:L={},inlineImages:k=!1,recordCanvas:C=!1,onSerialize:S,onIframeLoad:w,iframeLoadTimeout:x=5e3,onStylesheetLoad:E,stylesheetLoadTimeout:I=5e3,keepIframeSrcFn:P=()=>!1,newlyAddedElement:v=!1}=t;let{preserveWhiteSpace:M=!0}=t;const U=sv(e,{doc:n,mirror:r,blockClass:s,blockSelector:o,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,dataURLOptions:L,inlineImages:k,recordCanvas:C,keepIframeSrcFn:P,newlyAddedElement:v});if(!U)return console.warn(e,"not serialized"),null;let N;r.hasNode(e)?N=r.getId(e):cv(U,b)||!M&&U.type===ye.Text&&!U.isStyle&&!U.textContent.replace(/^\s+|\s+$/gm,"").length?N=Xn:N=Xi();const R=Object.assign(U,{id:N});if(r.add(e,R),N===Xn)return null;S&&S(e);let F=!f;if(R.type===ye.Element){F=F&&!R.needBlock,delete R.needBlock;const O=e.shadowRoot;O&&jn(O)&&(R.isShadowHost=!0)}if((R.type===ye.Document||R.type===ye.Element)&&F){b.headWhitespace&&R.type===ye.Element&&R.tagName==="head"&&(M=!1);const O={doc:n,mirror:r,blockClass:s,blockSelector:o,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:f,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:b,dataURLOptions:L,inlineImages:k,recordCanvas:C,preserveWhiteSpace:M,onSerialize:S,onIframeLoad:w,iframeLoadTimeout:x,onStylesheetLoad:E,stylesheetLoadTimeout:I,keepIframeSrcFn:P};for(const z of Array.from(e.childNodes)){const K=cn(z,O);K&&R.childNodes.push(K)}if(LE(e)&&e.shadowRoot)for(const z of Array.from(e.shadowRoot.childNodes)){const K=cn(z,O);K&&(jn(e.shadowRoot)&&(K.isShadow=!0),R.childNodes.push(K))}}return e.parentNode&&zn(e.parentNode)&&jn(e.parentNode)&&(R.isShadow=!0),R.type===ye.Element&&R.tagName==="iframe"&&!Ad(e,s,o,i)&&nv(e,()=>{const O=Rd(e);if(O&&w){const z=cn(O,{doc:O,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:b,dataURLOptions:L,inlineImages:k,recordCanvas:C,preserveWhiteSpace:M,onSerialize:S,onIframeLoad:w,iframeLoadTimeout:x,onStylesheetLoad:E,stylesheetLoadTimeout:I,keepIframeSrcFn:P});z&&w(e,z)}},x),R.type===ye.Element&&R.tagName==="link"&&typeof R.attributes.rel=="string"&&(R.attributes.rel==="stylesheet"||R.attributes.rel==="preload"&&typeof R.attributes.href=="string"&&Id(R.attributes.href)==="css")&&rv(e,()=>{if(E){const O=cn(e,{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:b,dataURLOptions:L,inlineImages:k,recordCanvas:C,preserveWhiteSpace:M,onSerialize:S,onIframeLoad:w,iframeLoadTimeout:x,onStylesheetLoad:E,stylesheetLoadTimeout:I,keepIframeSrcFn:P});O&&E(e,O)}},I),R}function uv(e,t){const{mirror:n=new Td,blockClass:r="rr-block",blockSelector:s=null,unblockSelector:o=null,maskAllText:i=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:d=null,inlineStylesheet:l=!0,inlineImages:f=!1,recordCanvas:p=!1,maskAllInputs:h=!1,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOM:b=!1,dataURLOptions:L,preserveWhiteSpace:k,onSerialize:C,onIframeLoad:S,iframeLoadTimeout:w,onStylesheetLoad:x,stylesheetLoadTimeout:E,keepIframeSrcFn:I=()=>!1}=t||{};return cn(e,{doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,maskAllText:i,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:l,maskInputOptions:h===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:h===!1?{}:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:b===!0||b==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:b==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:b===!1?{}:b,dataURLOptions:L,inlineImages:f,recordCanvas:p,preserveWhiteSpace:k,onSerialize:C,onIframeLoad:S,iframeLoadTimeout:w,onStylesheetLoad:x,stylesheetLoadTimeout:E,keepIframeSrcFn:I,newlyAddedElement:!1})}function Ce(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const nn=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Pc={map:{},getId(){return console.error(nn),-1},getNode(){return console.error(nn),null},removeNodeFromMap(){console.error(nn)},has(){return console.error(nn),!1},reset(){console.error(nn)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Pc=new Proxy(Pc,{get(e,t,n){return t==="map"&&console.error(nn),Reflect.get(e,t,n)}}));function Kn(e,t,n={}){let r=null,s=0;return function(...o){const i=Date.now();!s&&n.leading===!1&&(s=i);const a=t-(i-s),c=this;a<=0||a>t?(r&&(gv(r),r=null),s=i,e.apply(c,o)):!r&&n.trailing!==!1&&(r=zs(()=>{s=n.leading===!1?0:Date.now(),r=null,e.apply(c,o)},a))}}function Od(e,t,n,r,s=window){const o=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,r?n:{set(i){zs(()=>{n.set.call(this,i)},0),o&&o.set&&o.set.call(this,i)}}),()=>Od(e,t,o||{},!0)}function Ki(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],s=n(r);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=s,()=>{e[t]=r}}catch{return()=>{}}}let Es=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Es=()=>new Date().getTime());function Nd(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:t?.documentElement.scrollLeft||t?.body?.parentElement?.scrollLeft||t?.body?.scrollLeft||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:t?.documentElement.scrollTop||t?.body?.parentElement?.scrollTop||t?.body?.scrollTop||0}}function Ld(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Dd(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Pd(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function Le(e,t,n,r,s){if(!e)return!1;const o=Pd(e);if(!o)return!1;const i=an(t,n);if(!s){const u=r&&o.matches(r);return i(o)&&!u}const a=Pt(o,i);let c=-1;return a<0?!1:(r&&(c=Pt(o,an(null,r))),a>-1&&c<0?!0:a<c)}function lv(e,t){return t.getId(e)!==-1}function So(e,t){return t.getId(e)===Xn}function Fd(e,t){if(zn(e))return!1;const n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?Fd(e.parentNode,t):!0:!0}function Zo(e){return!!e.changedTouches}function dv(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function $d(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function Bd(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function Qo(e){return!!e?.shadowRoot}class fv{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return this.styleIDMap.get(t)??-1}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Hd(e){let t=null;return e.getRootNode?.()?.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function pv(e){let t=e,n;for(;n=Hd(t);)t=n;return t}function hv(e){const t=e.ownerDocument;if(!t)return!1;const n=pv(e);return t.contains(n)}function Ud(e){const t=e.ownerDocument;return t?t.contains(e)||hv(e):!1}const Fc={};function Ji(e){const t=Fc[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const o=s.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(s)}catch{}return Fc[e]=r.bind(window)}function mv(...e){return Ji("requestAnimationFrame")(...e)}function zs(...e){return Ji("setTimeout")(...e)}function gv(...e){return Ji("clearTimeout")(...e)}var G=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(G||{}),W=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(W||{}),ke=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(ke||{}),tt=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(tt||{}),rn=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(rn||{});function Zi(e){try{return e.contentDocument}catch{}}function _v(e){try{return e.contentWindow}catch{}}function $c(e){return"__ln"in e}class yv{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=n?.next||null;return n}addNode(t){const n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&$c(t.previousSibling)){const r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&$c(t.nextSibling)&&t.nextSibling.__ln.previous){const r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){const n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const Bc=(e,t)=>`${e}@${t}`;class Sv{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],n=new Set,r=new yv,s=c=>{let u=c,d=Xn;for(;d===Xn;)u=u&&u.nextSibling,d=u&&this.mirror.getId(u);return d},o=c=>{if(!c.parentNode||!Ud(c))return;const u=zn(c.parentNode)?this.mirror.getId(Hd(c)):this.mirror.getId(c.parentNode),d=s(c);if(u===-1||d===-1)return r.addNode(c);const l=cn(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:f=>{$d(f,this.mirror)&&!Le(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(f),Bd(f,this.mirror)&&this.stylesheetManager.trackLinkElement(f),Qo(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(f,p)=>{Le(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(f,p),f.contentWindow&&this.canvasManager.addWindow(f.contentWindow),this.shadowDomManager.observeAttachShadow(f))},onStylesheetLoad:(f,p)=>{this.stylesheetManager.attachLinkElement(f,p)}});l&&(t.push({parentId:u,nextId:d,node:l}),n.add(l.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const c of this.movedSet)Hc(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||o(c);for(const c of this.addedSet)!Uc(this.droppedSet,c)&&!Hc(this.removes,c,this.mirror)||Uc(this.movedSet,c)?o(c):this.droppedSet.add(c);let i=null;for(;r.length;){let c=null;if(i){const u=this.mirror.getId(i.value.parentNode),d=s(i.value);u!==-1&&d!==-1&&(c=i)}if(!c){let u=r.tail;for(;u;){const d=u;if(u=u.previous,d){const l=this.mirror.getId(d.value.parentNode);if(s(d.value)===-1)continue;if(l!==-1){c=d;break}else{const p=d.value;if(p.parentNode&&p.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const h=p.parentNode.host;if(this.mirror.getId(h)!==-1){c=d;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}i=c.previous,r.removeNode(c.value),o(c.value)}const a={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{const{attributes:u}=c;if(typeof u.style=="string"){const d=JSON.stringify(c.styleDiff),l=JSON.stringify(c._unchangedStyles);d.length<u.style.length&&(d+l).split("var(").length===u.style.split("var(").length&&(u.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:u}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:t};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=t=>{if(!So(t.target,this.mirror))switch(t.type){case"characterData":{const n=t.target.textContent;!Le(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:kn(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,Pd(t.target)):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{const n=t.target;let r=t.attributeName,s=t.target.getAttribute(r);if(r==="value"){const i=Yi(n),a=n.tagName;s=Ss(n,a,i);const c=Us({maskInputOptions:this.maskInputOptions,tagName:a,type:i}),u=kn(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,c);s=Yn({isMasked:u,element:n,value:s,maskInputFn:this.maskInputFn})}if(Le(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||s===t.oldValue)return;let o=this.attributeMap.get(t.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(s))if(!Zi(n))r="rr_src";else return;if(o||(o={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o),this.attributeMap.set(t.target,o)),r==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!Md(n.tagName,r)&&(o.attributes[r]=xd(this.doc,In(n.tagName),In(r),s,n,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const i=this.unattachedDoc.createElement("span");t.oldValue&&i.setAttribute("style",t.oldValue);for(const a of Array.from(n.style)){const c=n.style.getPropertyValue(a),u=n.style.getPropertyPriority(a);c!==i.style.getPropertyValue(a)||u!==i.style.getPropertyPriority(a)?u===""?o.styleDiff[a]=c:o.styleDiff[a]=[c,u]:o._unchangedStyles[a]=[c,u]}for(const a of Array.from(i.style))n.style.getPropertyValue(a)===""&&(o.styleDiff[a]=!1)}break}case"childList":{if(Le(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{const r=this.mirror.getId(n),s=zn(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);Le(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||So(n,this.mirror)||!lv(n,this.mirror)||(this.addedSet.has(n)?(ei(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&r===-1||Fd(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[Bc(r,s)]?ei(this.movedSet,n):this.removes.push({parentId:s,id:r,isShadow:zn(t.target)&&jn(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(So(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[Bc(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);Le(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes.forEach(r=>this.genAdds(r)),Qo(t)&&t.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function ei(e,t){e.delete(t),t.childNodes.forEach(n=>ei(e,n))}function Hc(e,t,n){return e.length===0?!1:bv(e,t,n)}function bv(e,t,n){let r=t.parentNode;for(;r;){const s=n.getId(r);if(e.some(o=>o.id===s))return!0;r=r.parentNode}return!1}function Uc(e,t){return e.size===0?!1:Wd(e,t)}function Wd(e,t){const{parentNode:n}=t;return n?e.has(n)?!0:Wd(e,n):!1}let qn;function Ev(e){qn=e}function vv(){qn=void 0}const Z=e=>qn?(...n)=>{try{return e(...n)}catch(r){if(qn&&qn(r)===!0)return()=>{};throw r}}:e,un=[];function hr(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function zd(e,t){const n=new Sv;un.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const s=window?.Zone?.__symbol__?.("MutationObserver");s&&window[s]&&(r=window[s]);const o=new r(Z(i=>{e.onMutation&&e.onMutation(i)===!1||n.processMutations.bind(n)(i)}));return o.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),o}function wv({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};const s=typeof t.mousemove=="number"?t.mousemove:50,o=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let i=[],a;const c=Kn(Z(l=>{const f=Date.now()-a;e(i.map(p=>(p.timeOffset-=f,p)),l),i=[],a=null}),o),u=Z(Kn(Z(l=>{const f=hr(l),{clientX:p,clientY:h}=Zo(l)?l.changedTouches[0]:l;a||(a=Es()),i.push({x:p,y:h,id:r.getId(f),timeOffset:Es()-a}),c(typeof DragEvent<"u"&&l instanceof DragEvent?W.Drag:l instanceof MouseEvent?W.MouseMove:W.TouchMove)}),s,{trailing:!1})),d=[Ce("mousemove",u,n),Ce("touchmove",u,n),Ce("drag",u,n)];return Z(()=>{d.forEach(l=>l())})}function Tv({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,sampling:i}){if(i.mouseInteraction===!1)return()=>{};const a=i.mouseInteraction===!0||i.mouseInteraction===void 0?{}:i.mouseInteraction,c=[];let u=null;const d=l=>f=>{const p=hr(f);if(Le(p,r,s,o,!0))return;let h=null,m=l;if("pointerType"in f){switch(f.pointerType){case"mouse":h=tt.Mouse;break;case"touch":h=tt.Touch;break;case"pen":h=tt.Pen;break}h===tt.Touch?ke[l]===ke.MouseDown?m="TouchStart":ke[l]===ke.MouseUp&&(m="TouchEnd"):tt.Pen}else Zo(f)&&(h=tt.Touch);h!==null?(u=h,(m.startsWith("Touch")&&h===tt.Touch||m.startsWith("Mouse")&&h===tt.Mouse)&&(h=null)):ke[l]===ke.Click&&(h=u,u=null);const g=Zo(f)?f.changedTouches[0]:f;if(!g)return;const y=n.getId(p),{clientX:b,clientY:L}=g;Z(e)({type:ke[m],id:y,x:b,y:L,...h!==null&&{pointerType:h}})};return Object.keys(ke).filter(l=>Number.isNaN(Number(l))&&!l.endsWith("_Departed")&&a[l]!==!1).forEach(l=>{let f=In(l);const p=d(l);if(window.PointerEvent)switch(ke[l]){case ke.MouseDown:case ke.MouseUp:f=f.replace("mouse","pointer");break;case ke.TouchStart:case ke.TouchEnd:return}c.push(Ce(f,p,t))}),Z(()=>{c.forEach(l=>l())})}function jd({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,sampling:i}){const a=Z(Kn(Z(c=>{const u=hr(c);if(!u||Le(u,r,s,o,!0))return;const d=n.getId(u);if(u===t&&t.defaultView){const l=Nd(t.defaultView);e({id:d,x:l.left,y:l.top})}else e({id:d,x:u.scrollLeft,y:u.scrollTop})}),i.scroll||100));return Ce("scroll",a,t)}function Iv({viewportResizeCb:e},{win:t}){let n=-1,r=-1;const s=Z(Kn(Z(()=>{const o=Ld(),i=Dd();(n!==o||r!==i)&&(e({width:Number(i),height:Number(o)}),n=o,r=i)}),200));return Ce("resize",s,t)}const kv=["INPUT","TEXTAREA","SELECT"],Wc=new WeakMap;function Cv({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,ignoreClass:i,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:d,userTriggeredOnInput:l,maskTextClass:f,unmaskTextClass:p,maskTextSelector:h,unmaskTextSelector:m}){function g(w){let x=hr(w);const E=w.isTrusted,I=x&&Ko(x.tagName);if(I==="OPTION"&&(x=x.parentElement),!x||!I||kv.indexOf(I)<0||Le(x,r,s,o,!0))return;const P=x;if(P.classList.contains(i)||a&&P.matches(a))return;const v=Yi(x);let M=Ss(P,I,v),U=!1;const N=Us({maskInputOptions:c,tagName:I,type:v}),R=kn(x,f,h,p,m,N);(v==="radio"||v==="checkbox")&&(U=x.checked),M=Yn({isMasked:R,element:x,value:M,maskInputFn:u}),y(x,l?{text:M,isChecked:U,userTriggered:E}:{text:M,isChecked:U});const F=x.name;v==="radio"&&F&&U&&t.querySelectorAll(`input[type="radio"][name="${F}"]`).forEach(O=>{if(O!==x){const z=Yn({isMasked:R,element:O,value:Ss(O,I,v),maskInputFn:u});y(O,l?{text:z,isChecked:!U,userTriggered:!1}:{text:z,isChecked:!U})}})}function y(w,x){const E=Wc.get(w);if(!E||E.text!==x.text||E.isChecked!==x.isChecked){Wc.set(w,x);const I=n.getId(w);Z(e)({...x,id:I})}}const L=(d.input==="last"?["change"]:["input","change"]).map(w=>Ce(w,Z(g),t)),k=t.defaultView;if(!k)return()=>{L.forEach(w=>w())};const C=k.Object.getOwnPropertyDescriptor(k.HTMLInputElement.prototype,"value"),S=[[k.HTMLInputElement.prototype,"value"],[k.HTMLInputElement.prototype,"checked"],[k.HTMLSelectElement.prototype,"value"],[k.HTMLTextAreaElement.prototype,"value"],[k.HTMLSelectElement.prototype,"selectedIndex"],[k.HTMLOptionElement.prototype,"selected"]];return C&&C.set&&L.push(...S.map(w=>Od(w[0],w[1],{set(){Z(g)({target:this,isTrusted:!1})}},!1,k))),Z(()=>{L.forEach(w=>w())})}function vs(e){const t=[];function n(r,s){if(Mr("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||Mr("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||Mr("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||Mr("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const i=Array.from(r.parentRule.cssRules).indexOf(r);s.unshift(i)}else if(r.parentStyleSheet){const i=Array.from(r.parentStyleSheet.cssRules).indexOf(r);s.unshift(i)}return s}return n(e,t)}function yt(e,t,n){let r,s;return e?(e.ownerNode?r=t.getId(e.ownerNode):s=n.getId(e),{styleId:s,id:r}):{}}function Rv({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const s=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:Z((d,l,f)=>{const[p,h]=f,{id:m,styleId:g}=yt(l,t,n.styleMirror);return(m&&m!==-1||g&&g!==-1)&&e({id:m,styleId:g,adds:[{rule:p,index:h}]}),d.apply(l,f)})});const o=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(o,{apply:Z((d,l,f)=>{const[p]=f,{id:h,styleId:m}=yt(l,t,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&e({id:h,styleId:m,removes:[{index:p}]}),d.apply(l,f)})});let i;r.CSSStyleSheet.prototype.replace&&(i=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(i,{apply:Z((d,l,f)=>{const[p]=f,{id:h,styleId:m}=yt(l,t,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&e({id:h,styleId:m,replace:p}),d.apply(l,f)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:Z((d,l,f)=>{const[p]=f,{id:h,styleId:m}=yt(l,t,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&e({id:h,styleId:m,replaceSync:p}),d.apply(l,f)})}));const c={};Ar("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(Ar("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),Ar("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),Ar("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const u={};return Object.entries(c).forEach(([d,l])=>{u[d]={insertRule:l.prototype.insertRule,deleteRule:l.prototype.deleteRule},l.prototype.insertRule=new Proxy(u[d].insertRule,{apply:Z((f,p,h)=>{const[m,g]=h,{id:y,styleId:b}=yt(p.parentStyleSheet,t,n.styleMirror);return(y&&y!==-1||b&&b!==-1)&&e({id:y,styleId:b,adds:[{rule:m,index:[...vs(p),g||0]}]}),f.apply(p,h)})}),l.prototype.deleteRule=new Proxy(u[d].deleteRule,{apply:Z((f,p,h)=>{const[m]=h,{id:g,styleId:y}=yt(p.parentStyleSheet,t,n.styleMirror);return(g&&g!==-1||y&&y!==-1)&&e({id:g,styleId:y,removes:[{index:[...vs(p),m]}]}),f.apply(p,h)})})}),Z(()=>{r.CSSStyleSheet.prototype.insertRule=s,r.CSSStyleSheet.prototype.deleteRule=o,i&&(r.CSSStyleSheet.prototype.replace=i),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([d,l])=>{l.prototype.insertRule=u[d].insertRule,l.prototype.deleteRule=u[d].deleteRule})})}function qd({mirror:e,stylesheetManager:t},n){let r=null;n.nodeName==="#document"?r=e.getId(n):r=e.getId(n.host);const s=n.nodeName==="#document"?n.defaultView?.Document:n.ownerDocument?.defaultView?.ShadowRoot,o=s?.prototype?Object.getOwnPropertyDescriptor(s?.prototype,"adoptedStyleSheets"):void 0;return r===null||r===-1||!s||!o?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get(){return o.get?.call(this)},set(i){const a=o.set?.call(this,i);if(r!==null&&r!==-1)try{t.adoptStyleSheets(i,r)}catch{}return a}}),Z(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get:o.get,set:o.set})}))}function xv({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:s}){const o=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(o,{apply:Z((a,c,u)=>{const[d,l,f]=u;if(n.has(d))return o.apply(c,[d,l,f]);const{id:p,styleId:h}=yt(c.parentRule?.parentStyleSheet,t,r.styleMirror);return(p&&p!==-1||h&&h!==-1)&&e({id:p,styleId:h,set:{property:d,value:l,priority:f},index:vs(c.parentRule)}),a.apply(c,u)})});const i=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(i,{apply:Z((a,c,u)=>{const[d]=u;if(n.has(d))return i.apply(c,[d]);const{id:l,styleId:f}=yt(c.parentRule?.parentStyleSheet,t,r.styleMirror);return(l&&l!==-1||f&&f!==-1)&&e({id:l,styleId:f,remove:{property:d},index:vs(c.parentRule)}),a.apply(c,u)})}),Z(()=>{s.CSSStyleDeclaration.prototype.setProperty=o,s.CSSStyleDeclaration.prototype.removeProperty=i})}function Mv({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:s,sampling:o,doc:i}){const a=Z(u=>Kn(Z(d=>{const l=hr(d);if(!l||Le(l,t,n,r,!0))return;const{currentTime:f,volume:p,muted:h,playbackRate:m}=l;e({type:u,id:s.getId(l),currentTime:f,volume:p,muted:h,playbackRate:m})}),o.media||500)),c=[Ce("play",a(rn.Play),i),Ce("pause",a(rn.Pause),i),Ce("seeked",a(rn.Seeked),i),Ce("volumechange",a(rn.VolumeChange),i),Ce("ratechange",a(rn.RateChange),i)];return Z(()=>{c.forEach(u=>u())})}function Av({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],s=new WeakMap,o=n.FontFace;n.FontFace=function(c,u,d){const l=new o(c,u,d);return s.set(l,{family:c,buffer:typeof u!="string",descriptors:d,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),l};const i=Ki(t.fonts,"add",function(a){return function(c){return zs(Z(()=>{const u=s.get(c);u&&(e(u),s.delete(c))}),0),a.apply(this,[c])}});return r.push(()=>{n.FontFace=o}),r.push(i),Z(()=>{r.forEach(a=>a())})}function Ov(e){const{doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,selectionCb:i}=e;let a=!0;const c=Z(()=>{const u=t.getSelection();if(!u||a&&u?.isCollapsed)return;a=u.isCollapsed||!1;const d=[],l=u.rangeCount||0;for(let f=0;f<l;f++){const p=u.getRangeAt(f),{startContainer:h,startOffset:m,endContainer:g,endOffset:y}=p;Le(h,r,s,o,!0)||Le(g,r,s,o,!0)||d.push({start:n.getId(h),startOffset:m,end:n.getId(g),endOffset:y})}i({ranges:d})});return c(),Ce("selectionchange",c)}function Nv({doc:e,customElementCb:t}){const n=e.defaultView;return!n||!n.customElements?()=>{}:Ki(n.customElements,"define",function(s){return function(o,i,a){try{t({define:{name:o}})}catch{}return s.apply(this,[o,i,a])}})}function Lv(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};let r;e.recordDOM&&(r=zd(e,e.doc));const s=wv(e),o=Tv(e),i=jd(e),a=Iv(e,{win:n}),c=Cv(e),u=Mv(e);let d=()=>{},l=()=>{},f=()=>{},p=()=>{};e.recordDOM&&(d=Rv(e,{win:n}),l=qd(e,e.doc),f=xv(e,{win:n}),e.collectFonts&&(p=Av(e)));const h=Ov(e),m=Nv(e),g=[];for(const y of e.plugins)g.push(y.observer(y.callback,n,y.options));return Z(()=>{un.forEach(y=>y.reset()),r?.disconnect(),s(),o(),i(),a(),c(),u(),d(),l(),f(),p(),h(),m(),g.forEach(y=>y())})}function Mr(e){return typeof window[e]<"u"}function Ar(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class ti{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,s){const o=r||this.getIdToRemoteIdMap(t),i=s||this.getRemoteIdToIdMap(t);let a=o.get(n);return a||(a=this.generateIdFn(),o.set(n,a),i.set(a,n)),a}getIds(t,n){const r=this.getIdToRemoteIdMap(t),s=this.getRemoteIdToIdMap(t);return n.map(o=>this.getId(t,o,r,s))}getRemoteId(t,n,r){const s=r||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;const o=s.get(n);return o||-1}getRemoteIds(t,n){const r=this.getRemoteIdToIdMap(t);return n.map(s=>this.getRemoteId(t,s,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}}class Dv{constructor(){this.crossOriginIframeMirror=new ti(Xi),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class Pv{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new ti(Xi),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new ti(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&t.contentWindow?.addEventListener("message",this.handleMessage.bind(this)),this.loadListener?.(t);const r=Zi(t);r&&r.adoptedStyleSheets&&r.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(r.adoptedStyleSheets,this.mirror.getId(r))}handleMessage(t){const n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;const s=this.crossOriginIframeMap.get(t.source);if(!s)return;const o=this.transformCrossOriginEvent(s,n.data.event);o&&this.wrappedEmit(o,n.data.isCheckout)}transformCrossOriginEvent(t,n){switch(n.type){case G.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);const r=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,r),this.patchRootIdOnNode(n.data.node,r),{timestamp:n.timestamp,type:G.IncrementalSnapshot,data:{source:W.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case G.Meta:case G.Load:case G.DomContentLoaded:return!1;case G.Plugin:return n;case G.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case G.IncrementalSnapshot:switch(n.data.source){case W.Mutation:return n.data.adds.forEach(r=>{this.replaceIds(r,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,t);const s=this.crossOriginIframeRootIdMap.get(t);s&&this.patchRootIdOnNode(r.node,s)}),n.data.removes.forEach(r=>{this.replaceIds(r,t,["parentId","id"])}),n.data.attributes.forEach(r=>{this.replaceIds(r,t,["id"])}),n.data.texts.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case W.Drag:case W.TouchMove:case W.MouseMove:return n.data.positions.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case W.ViewportResize:return!1;case W.MediaInteraction:case W.MouseInteraction:case W.Scroll:case W.CanvasMutation:case W.Input:return this.replaceIds(n.data,t,["id"]),n;case W.StyleSheetRule:case W.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case W.Font:return n;case W.Selection:return n.data.ranges.forEach(r=>{this.replaceIds(r,t,["start","end"])}),n;case W.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),n.data.styles?.forEach(r=>{this.replaceStyleIds(r,t,["styleId"])}),n}}return!1}replace(t,n,r,s){for(const o of s)!Array.isArray(n[o])&&typeof n[o]!="number"||(Array.isArray(n[o])?n[o]=t.getIds(r,n[o]):n[o]=t.getId(r,n[o]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==ye.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}}class Fv{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class $v{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!jn(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t),this.bypassOptions.canvasManager.addShadowRoot(t);const r=zd({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(jd({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),zs(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(qd({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){const n=Zi(t),r=_v(t);!n||!r||this.patchAttachShadow(r.Element,n)}patchAttachShadow(t,n){const r=this;this.restoreHandlers.push(Ki(t.prototype,"attachShadow",function(s){return function(o){const i=s.call(this,o);return this.shadowRoot&&Ud(this)&&r.addShadowRoot(this.shadowRoot,n),i}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}var zc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bv=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Or=0;Or<zc.length;Or++)Bv[zc.charCodeAt(Or)]=Or;class jc{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class Hv{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new fv,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;const r={id:n,styleIds:[]},s=[];for(const o of t){let i;this.styleMirror.has(o)?i=this.styleMirror.getId(o):(i=this.styleMirror.add(o),s.push({styleId:i,rules:Array.from(o.rules||CSSRule,(a,c)=>({rule:wd(a),index:c}))})),r.styleIds.push(i)}s.length>0&&(r.styles=s),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class Uv{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(t,n){const r=this.nodeMap.get(t);return r&&Array.from(r).some(s=>s!==n)}add(t,n){this.active||(this.active=!0,mv(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}destroy(){}}let de,ws;try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=e.contentWindow?.Array.from||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}const We=UE();function rt(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:s="rr-block",blockSelector:o=null,unblockSelector:i=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:d="rr-mask",unmaskTextClass:l=null,maskTextSelector:f=null,unmaskTextSelector:p=null,inlineStylesheet:h=!0,maskAllInputs:m,maskInputOptions:g,slimDOMOptions:y,maskAttributeFn:b,maskInputFn:L,maskTextFn:k,maxCanvasSize:C=null,packFn:S,sampling:w={},dataURLOptions:x={},mousemoveWait:E,recordDOM:I=!0,recordCanvas:P=!1,recordCrossOriginIframes:v=!1,recordAfter:M=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:U=!1,collectFonts:N=!1,inlineImages:R=!1,plugins:F,keepIframeSrcFn:O=()=>!1,ignoreCSSAttributes:z=new Set([]),errorHandler:K,onMutation:ae,getCanvasManager:Pe}=e;Ev(K);const ge=v?window.parent===window:!0;let me=!1;if(!ge)try{window.parent.document&&(me=!1)}catch{me=!0}if(ge&&!t)throw new Error("emit function is required");if(!ge&&!me)return()=>{};E!==void 0&&w.mousemove===void 0&&(w.mousemove=E),We.reset();const Oe=m===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:g!==void 0?g:{},et=y===!0||y==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:y==="all",headMetaDescKeywords:y==="all"}:y||{};dv();let Jt,Zt=0;const $n=Q=>{for(const Ue of F||[])Ue.eventProcessor&&(Q=Ue.eventProcessor(Q));return S&&!me&&(Q=S(Q)),Q};de=(Q,Ue)=>{const J=Q;if(J.timestamp=Es(),un[0]?.isFrozen()&&J.type!==G.FullSnapshot&&!(J.type===G.IncrementalSnapshot&&J.data.source===W.Mutation)&&un.forEach(Ie=>Ie.unfreeze()),ge)t?.($n(J),Ue);else if(me){const Ie={type:"rrweb",event:$n(J),origin:window.location.origin,isCheckout:Ue};window.parent.postMessage(Ie,"*")}if(J.type===G.FullSnapshot)Jt=J,Zt=0;else if(J.type===G.IncrementalSnapshot){if(J.data.source===W.Mutation&&J.data.isAttachIframe)return;Zt++;const Ie=r&&Zt>=r,ee=n&&Jt&&J.timestamp-Jt.timestamp>n;(Ie||ee)&&Ys(!0)}};const mt=Q=>{de({type:G.IncrementalSnapshot,data:{source:W.Mutation,...Q}})},ce=Q=>de({type:G.IncrementalSnapshot,data:{source:W.Scroll,...Q}}),ve=Q=>de({type:G.IncrementalSnapshot,data:{source:W.CanvasMutation,...Q}}),Ye=Q=>de({type:G.IncrementalSnapshot,data:{source:W.AdoptedStyleSheet,...Q}}),pe=new Hv({mutationCb:mt,adoptedStyleSheetCb:Ye}),_e=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new Dv:new Pv({mirror:We,mutationCb:mt,stylesheetManager:pe,recordCrossOriginIframes:v,wrappedEmit:de});for(const Q of F||[])Q.getMirror&&Q.getMirror({nodeMirror:We,crossOriginIframeMirror:_e.crossOriginIframeMirror,crossOriginIframeStyleMirror:_e.crossOriginIframeStyleMirror});const Xe=new Uv,At=zv(Pe,{mirror:We,win:window,mutationCb:Q=>de({type:G.IncrementalSnapshot,data:{source:W.CanvasMutation,...Q}}),recordCanvas:P,blockClass:s,blockSelector:o,unblockSelector:i,maxCanvasSize:C,sampling:w.canvas,dataURLOptions:x,errorHandler:K}),Qt=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Fv:new $v({mutationCb:mt,scrollCb:ce,bypassOptions:{onMutation:ae,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:h,maskInputOptions:Oe,dataURLOptions:x,maskAttributeFn:b,maskTextFn:k,maskInputFn:L,recordCanvas:P,inlineImages:R,sampling:w,slimDOMOptions:et,iframeManager:_e,stylesheetManager:pe,canvasManager:At,keepIframeSrcFn:O,processedNodeManager:Xe},mirror:We}),Ys=(Q=!1)=>{if(!I)return;de({type:G.Meta,data:{href:window.location.href,width:Dd(),height:Ld()}},Q),pe.reset(),Qt.init(),un.forEach(J=>J.lock());const Ue=uv(document,{mirror:We,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:h,maskAllInputs:Oe,maskAttributeFn:b,maskInputFn:L,maskTextFn:k,slimDOM:et,dataURLOptions:x,recordCanvas:P,inlineImages:R,onSerialize:J=>{$d(J,We)&&_e.addIframe(J),Bd(J,We)&&pe.trackLinkElement(J),Qo(J)&&Qt.addShadowRoot(J.shadowRoot,document)},onIframeLoad:(J,Ie)=>{_e.attachIframe(J,Ie),J.contentWindow&&At.addWindow(J.contentWindow),Qt.observeAttachShadow(J)},onStylesheetLoad:(J,Ie)=>{pe.attachLinkElement(J,Ie)},keepIframeSrcFn:O});if(!Ue)return console.warn("Failed to snapshot the document");de({type:G.FullSnapshot,data:{node:Ue,initialOffset:Nd(window)}}),un.forEach(J=>J.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&pe.adoptStyleSheets(document.adoptedStyleSheets,We.getId(document))};ws=Ys;try{const Q=[],Ue=Ie=>Z(Lv)({onMutation:ae,mutationCb:mt,mousemoveCb:(ee,Xs)=>de({type:G.IncrementalSnapshot,data:{source:Xs,positions:ee}}),mouseInteractionCb:ee=>de({type:G.IncrementalSnapshot,data:{source:W.MouseInteraction,...ee}}),scrollCb:ce,viewportResizeCb:ee=>de({type:G.IncrementalSnapshot,data:{source:W.ViewportResize,...ee}}),inputCb:ee=>de({type:G.IncrementalSnapshot,data:{source:W.Input,...ee}}),mediaInteractionCb:ee=>de({type:G.IncrementalSnapshot,data:{source:W.MediaInteraction,...ee}}),styleSheetRuleCb:ee=>de({type:G.IncrementalSnapshot,data:{source:W.StyleSheetRule,...ee}}),styleDeclarationCb:ee=>de({type:G.IncrementalSnapshot,data:{source:W.StyleDeclaration,...ee}}),canvasMutationCb:ve,fontCb:ee=>de({type:G.IncrementalSnapshot,data:{source:W.Font,...ee}}),selectionCb:ee=>{de({type:G.IncrementalSnapshot,data:{source:W.Selection,...ee}})},customElementCb:ee=>{de({type:G.IncrementalSnapshot,data:{source:W.CustomElement,...ee}})},blockClass:s,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,maskInputOptions:Oe,inlineStylesheet:h,sampling:w,recordDOM:I,recordCanvas:P,inlineImages:R,userTriggeredOnInput:U,collectFonts:N,doc:Ie,maskAttributeFn:b,maskInputFn:L,maskTextFn:k,keepIframeSrcFn:O,blockSelector:o,unblockSelector:i,slimDOMOptions:et,dataURLOptions:x,mirror:We,iframeManager:_e,stylesheetManager:pe,shadowDomManager:Qt,processedNodeManager:Xe,canvasManager:At,ignoreCSSAttributes:z,plugins:F?.filter(ee=>ee.observer)?.map(ee=>({observer:ee.observer,options:ee.options,callback:Xs=>de({type:G.Plugin,data:{plugin:ee.name,payload:Xs}})}))||[]},{});_e.addLoadListener(Ie=>{try{Q.push(Ue(Ie.contentDocument))}catch(ee){console.warn(ee)}});const J=()=>{Ys(),Q.push(Ue(document))};return document.readyState==="interactive"||document.readyState==="complete"?J():(Q.push(Ce("DOMContentLoaded",()=>{de({type:G.DomContentLoaded,data:{}}),M==="DOMContentLoaded"&&J()})),Q.push(Ce("load",()=>{de({type:G.Load,data:{}}),M==="load"&&J()},window))),()=>{Q.forEach(Ie=>Ie()),Xe.destroy(),ws=void 0,vv()}}catch(Q){console.warn(Q)}}function Wv(e){if(!ws)throw new Error("please take full snapshot after start recording");ws(e)}rt.mirror=We;rt.takeFullSnapshot=Wv;function zv(e,t){try{return e?e(t):new jc}catch{return console.warn("Unable to initialize CanvasManager"),new jc}}var qc;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(qc||(qc={}));const jv=3,qv=5;function Qi(e){return e>9999999999?e:e*1e3}function bo(e){return e>9999999999?e/1e3:e}function mr(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:G.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:Ne(t,10,1e3)}}),t.category==="console")))}const Gv="button,a";function Gd(e){return e.closest(Gv)||e}function Vd(e){const t=Yd(e);return!t||!(t instanceof Element)?t:Gd(t)}function Yd(e){return Vv(e)?e.target:e}function Vv(e){return typeof e=="object"&&!!e&&"target"in e}let St;function Yv(e){return St||(St=[],Xv()),St.push(e),()=>{const t=St?St.indexOf(e):-1;t>-1&&St.splice(t,1)}}function Xv(){Re(oe,"open",function(e){return function(...t){if(St)try{St.forEach(n=>n())}catch{}return e.apply(oe,t)}})}const Kv=new Set([W.Mutation,W.StyleSheetRule,W.StyleDeclaration,W.AdoptedStyleSheet,W.CanvasMutation,W.Selection,W.MediaInteraction]);function Jv(e,t,n){e.handleClick(t,n)}class Zv{constructor(t,n,r=mr){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scrollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){const t=Yv(()=>{this._lastMutation=Gc()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if(e0(n,this._ignoreSelector)||!t0(t))return;const r={timestamp:bo(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(s=>s.node===r.node&&Math.abs(s.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=bo(t)}registerScroll(t=Date.now()){this._lastScroll=bo(t)}registerClick(t){const n=Gd(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){const t=[],n=Gc();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&t.push(r)});for(const r of t){const s=this._clicks.indexOf(r);s>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(s,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){const n=this._replay,r=t.scrollAfter&&t.scrollAfter<=this._scrollTimeout,s=t.mutationAfter&&t.mutationAfter<=this._threshold,o=!r&&!s,{clickCount:i,clickBreadcrumb:a}=t;if(o){const c=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,u=c<this._timeout*1e3?"mutation":"timeout",d={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:oe.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:u,clickCount:i||1}};this._addBreadcrumbEvent(n,d);return}if(i>1){const c={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:oe.location.href,route:n.getCurrentRoute(),clickCount:i,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=pr(()=>this._checkClicks(),1e3)}}const Qv=["A","BUTTON","INPUT"];function e0(e,t){return!!(!Qv.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function t0(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function Gc(){return Date.now()/1e3}function n0(e,t){try{if(!r0(t))return;const{source:n}=t.data;if(Kv.has(n)&&e.registerMutation(t.timestamp),n===W.Scroll&&e.registerScroll(t.timestamp),s0(t)){const{type:r,id:s}=t.data,o=rt.mirror.getNode(s);o instanceof HTMLElement&&r===ke.Click&&e.registerClick(o)}}catch{}}function r0(e){return e.type===jv}function s0(e){return e.data.source===W.MouseInteraction}function Je(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var ea=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(ea||{});const o0=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function i0(e){const t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(const n in e)if(o0.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}const a0=e=>t=>{if(!e.isEnabled())return;const n=c0(t);if(!n)return;const r=t.name==="click",s=r?t.event:void 0;r&&e.clickDetector&&s?.target&&!s.altKey&&!s.metaKey&&!s.ctrlKey&&!s.shiftKey&&Jv(e.clickDetector,n,Vd(t.event)),mr(e,n)};function Xd(e,t){const n=rt.mirror.getId(e),r=n&&rt.mirror.getNode(n),s=r&&rt.mirror.getMeta(r),o=s&&l0(s)?s:null;return{message:t,data:o?{nodeId:n,node:{id:n,tagName:o.tagName,textContent:Array.from(o.childNodes).map(i=>i.type===ea.Text&&i.textContent).filter(Boolean).map(i=>i.trim()).join(""),attributes:i0(o.attributes)}}:{}}}function c0(e){const{target:t,message:n}=u0(e);return Je({category:`ui.${e.name}`,...Xd(t,n)})}function u0(e){const t=e.name==="click";let n,r=null;try{r=t?Vd(e.event):Yd(e.event),n=Be(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function l0(e){return e.type===ea.Element}function d0(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=f0(t);n&&mr(e,n)}function f0(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:o,target:i}=e;if(!i||p0(i)||!o)return null;const a=t||r||s,c=o.length===1;if(!a&&c)return null;const u=Be(i,{maxStringLength:200})||"<unknown>",d=Xd(i,u);return Je({category:"ui.keyDown",message:u,data:{...d.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:o}})}function p0(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}const h0={resource:S0,paint:_0,navigation:y0};function Nr(e,t){return({metric:n})=>void t.replayPerformanceEntries.push(e(n))}function m0(e){return e.map(g0).filter(Boolean)}function g0(e){const t=h0[e.entryType];return t?t(e):null}function Cn(e){return((Te()||oe.performance.timeOrigin)+e)/1e3}function _0(e){const{duration:t,entryType:n,name:r,startTime:s}=e,o=Cn(s);return{type:n,name:r,start:o,end:o+t,data:void 0}}function y0(e){const{entryType:t,name:n,decodedBodySize:r,duration:s,domComplete:o,encodedBodySize:i,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:d,loadEventEnd:l,redirectCount:f,startTime:p,transferSize:h,type:m}=e;return s===0?null:{type:`${t}.${m}`,start:Cn(p),end:Cn(o),name:n,data:{size:h,decodedBodySize:r,encodedBodySize:i,duration:s,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:d,loadEventEnd:l,domComplete:o,redirectCount:f}}}function S0(e){const{entryType:t,initiatorType:n,name:r,responseEnd:s,startTime:o,decodedBodySize:i,encodedBodySize:a,responseStatus:c,transferSize:u}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:Cn(o),end:Cn(s),name:r,data:{size:u,statusCode:c,decodedBodySize:i,encodedBodySize:a}}}function b0(e){const t=e.entries[e.entries.length-1],n=t?.element?[t.element]:void 0;return js(e,"largest-contentful-paint",n)}function E0(e){return e.sources!==void 0}function v0(e){const t=[],n=[];for(const r of e.entries)if(E0(r)){const s=[];for(const o of r.sources)if(o.node){n.push(o.node);const i=rt.mirror.getId(o.node);i&&s.push(i)}t.push({value:r.value,nodeIds:s.length?s:void 0})}return js(e,"cumulative-layout-shift",n,t)}function w0(e){const t=e.entries[e.entries.length-1],n=t?.target?[t.target]:void 0;return js(e,"first-input-delay",n)}function T0(e){const t=e.entries[e.entries.length-1],n=t?.target?[t.target]:void 0;return js(e,"interaction-to-next-paint",n)}function js(e,t,n,r){const s=e.value,o=e.rating,i=Cn(s);return{type:"web-vital",name:t,start:i,end:i,data:{value:s,size:s,rating:o,nodeIds:n?n.map(a=>rt.mirror.getId(a)):void 0,attributions:r}}}function I0(e){function t(s){e.performanceEntries.includes(s)||e.performanceEntries.push(s)}function n({entries:s}){s.forEach(t)}const r=[];return["navigation","paint","resource"].forEach(s=>{r.push(jt(s,n))}),r.push(Hi(Nr(b0,e)),Bi(Nr(v0,e)),sd(Nr(w0,e)),od(Nr(T0,e))),()=>{r.forEach(s=>s())}}const $=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,k0='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function C0(){const e=new Blob([k0]);return URL.createObjectURL(e)}const Vc=["log","warn","error"],Kr="[Replay] ";function Eo(e,t="info"){lt({category:"console",data:{logger:"replay"},level:t,message:`${Kr}${e}`},{level:t})}function R0(){let e=!1,t=!1;const n={exception:()=>{},infoTick:()=>{},setConfig:r=>{e=!!r.captureExceptions,t=!!r.traceInternals}};return $?(Vc.forEach(r=>{n[r]=(...s)=>{_[r](Kr,...s),t&&Eo(s.join(""),Ci(r))}}),n.exception=(r,...s)=>{s.length&&n.error&&n.error(...s),_.error(Kr,r),e?gn(r):t&&Eo(r,"error")},n.infoTick=(...r)=>{_.log(Kr,...r),t&&setTimeout(()=>Eo(r[0]),0)}):Vc.forEach(r=>{n[r]=()=>{}}),n}const B=R0();class ta extends Error{constructor(){super(`Event buffer exceeded maximum size of ${Vi}.`)}}class Kd{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){const n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>Vi)throw new ta;this.events.push(t)}finish(){return new Promise(t=>{const n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const t=this.events.map(n=>n.timestamp).sort()[0];return t?Qi(t):null}}class x0{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){$&&B.log("Destroying compression worker"),this._worker.terminate()}postMessage(t,n){const r=this._getAndIncrementId();return new Promise((s,o)=>{const i=({data:a})=>{const c=a;if(c.method===t&&c.id===r){if(this._worker.removeEventListener("message",i),!c.success){$&&B.error("Error in compression worker: ",c.response),o(new Error("Error in compression worker"));return}s(c.response)}};this._worker.addEventListener("message",i),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}}class M0{constructor(t){this._worker=new x0(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){const n=Qi(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);const r=JSON.stringify(t);return this._totalSize+=r.length,this._totalSize>Vi?Promise.reject(new ta):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{$&&B.exception(t,'Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){const t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}}class A0{constructor(t){this._fallback=new Kd,this._compression=new M0(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}set waitForCheckout(t){this._used.waitForCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){$&&B.exception(t,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:t,hasCheckout:n,waitForCheckout:r}=this._fallback,s=[];for(const o of t)s.push(this._compression.addEvent(o));this._compression.hasCheckout=n,this._compression.waitForCheckout=r,this._used=this._compression;try{await Promise.all(s),this._fallback.clear()}catch(o){$&&B.exception(o,"Failed to add events when switching buffers.")}}}function O0({useCompression:e,workerUrl:t}){if(e&&window.Worker){const n=N0(t);if(n)return n}return $&&B.log("Using simple buffer"),new Kd}function N0(e){try{const t=e||L0();if(!t)return;$&&B.log(`Using compression worker${e?` from ${e}`:""}`);const n=new Worker(t);return new A0(n)}catch(t){$&&B.exception(t,"Failed to create compression worker")}}function L0(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?C0():""}function na(){try{return"sessionStorage"in oe&&!!oe.sessionStorage}catch{return!1}}function D0(e){P0(),e.session=void 0}function P0(){if(na())try{oe.sessionStorage.removeItem(qi)}catch{}}function Jd(e){return e===void 0?!1:Math.random()<e}function ra(e){if(na())try{oe.sessionStorage.setItem(qi,JSON.stringify(e))}catch{}}function Zd(e){const t=Date.now(),n=e.id||xe(),r=e.started||t,s=e.lastActivity||t,o=e.segmentId||0,i=e.sampled,a=e.previousSessionId;return{id:n,started:r,lastActivity:s,segmentId:o,sampled:i,previousSessionId:a}}function F0(e,t){return Jd(e)?"session":t?"buffer":!1}function Yc({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const s=F0(e,t),o=Zd({sampled:s,previousSessionId:r});return n&&ra(o),o}function $0(){if(!na())return null;try{const e=oe.sessionStorage.getItem(qi);if(!e)return null;const t=JSON.parse(e);return $&&B.infoTick("Loading existing session"),Zd(t)}catch{return null}}function ni(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function Qd(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return ni(e.started,t,r)||ni(e.lastActivity,n,r)}function ef(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!Qd(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function vo({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},r){const s=r.stickySession&&$0();return s?ef(s,{sessionIdleExpire:e,maxReplayDuration:t})?($&&B.infoTick("Session in sessionStorage is expired, creating new one..."),Yc(r,{previousSessionId:s.id})):s:($&&B.infoTick("Creating new session"),Yc(r,{previousSessionId:n}))}function B0(e){return e.type===G.Custom}function sa(e,t,n){return nf(e,t)?(tf(e,t,n),!0):!1}function H0(e,t,n){return nf(e,t)?tf(e,t,n):Promise.resolve(null)}async function tf(e,t,n){const{eventBuffer:r}=e;if(!r||r.waitForCheckout&&!n)return null;const s=e.recordingMode==="buffer";try{n&&s&&r.clear(),n&&(r.hasCheckout=!0,r.waitForCheckout=!1);const o=e.getOptions(),i=U0(t,o.beforeAddRecordingEvent);return i?await r.addEvent(i):void 0}catch(o){const i=o&&o instanceof ta,a=i?"addEventSizeExceeded":"addEvent";if(i&&s)return r.clear(),r.waitForCheckout=!0,null;e.handleException(o),await e.stop({reason:a});const c=A();c&&c.recordDroppedEvent("internal_sdk_error","replay")}}function nf(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=Qi(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?($&&B.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1):!0}function U0(e,t){try{if(typeof t=="function"&&B0(e))return t(e)}catch(n){return $&&B.exception(n,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}function oa(e){return!e.type}function ri(e){return e.type==="transaction"}function W0(e){return e.type==="replay_event"}function Xc(e){return e.type==="feedback"}function z0(e){return(t,n)=>{if(!e.isEnabled()||!oa(t)&&!ri(t))return;const r=n?.statusCode;if(!(!r||r<200||r>=300)){if(ri(t)){j0(e,t);return}q0(e,t)}}}function j0(e,t){const n=e.getContext();t.contexts?.trace?.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function q0(e,t){const n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();typeof r=="function"&&!r(t)||pr(async()=>{try{await e.sendBufferedReplayOrFlush()}catch(s){e.handleException(s)}})}function G0(e){return t=>{!e.isEnabled()||!oa(t)||V0(e,t)}}function V0(e,t){const n=t.exception?.values?.[0]?.value;if(typeof n=="string"&&(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const r=Je({category:"replay.hydrate-error",data:{url:qt()}});mr(e,r)}}function Y0(e){const t=A();t&&t.on("beforeAddBreadcrumb",n=>X0(e,n))}function X0(e,t){if(!e.isEnabled()||!rf(t))return;const n=K0(t);n&&mr(e,n)}function K0(e){return!rf(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:e.category==="console"?J0(e):Je(e)}function J0(e){const t=e.data?.arguments;if(!Array.isArray(t)||t.length===0)return Je(e);let n=!1;const r=t.map(s=>{if(!s)return s;if(typeof s=="string")return s.length>xr?(n=!0,`${s.slice(0,xr)}`):s;if(typeof s=="object")try{const o=Ne(s,7);return JSON.stringify(o).length>xr?(n=!0,`${JSON.stringify(o,null,2).slice(0,xr)}`):o}catch{}return s});return Je({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function rf(e){return!!e.category}function Z0(e,t){return e.type||!e.exception?.values?.length?!1:!!t.originalException?.__rrweb__}function sf(){const e=X().getPropagationContext().dsc;e&&delete e.replay_id;const t=Ee();if(t){const n=Ge(t);delete n.replay_id}}function Q0(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:G.Custom,timestamp:t.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function ew(e,t){return e.recordingMode!=="buffer"||t.message===Gi||!t.exception||t.type?!1:Jd(e.getOptions().errorSampleRate)}function tw(e){return Object.assign((t,n)=>!e.isEnabled()||e.isPaused()?t:W0(t)?(delete t.breadcrumbs,t):!oa(t)&&!ri(t)&&!Xc(t)?t:e.checkAndHandleExpiredSession()?Xc(t)?(e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),Q0(e,t),t):Z0(t,n)&&!e.getOptions()._experiments.captureExceptions?($&&B.log("Ignoring error from rrweb internals",t),null):((ew(e,t)||e.recordingMode==="session")&&(t.tags={...t.tags,replayId:e.getSessionId()}),t):(sf(),t),{id:"Replay"})}function qs(e,t){return t.map(({type:n,start:r,end:s,name:o,data:i})=>{const a=e.throttledAddEvent({type:G.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:o,startTimestamp:r,endTimestamp:s,data:i}}});return typeof a=="string"?Promise.resolve(null):a})}function nw(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function rw(e){return t=>{if(!e.isEnabled())return;const n=nw(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(qs(e,[n]),!1)))}}function sw(e,t){return $&&e.getOptions()._experiments.traceInternals?!1:bl(t,A())}function of(e,t){e.isEnabled()&&t!==null&&(sw(e,t.name)||e.addUpdate(()=>(qs(e,[t]),!0)))}function Gs(e){if(!e)return;const t=new TextEncoder;try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=fd(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function af(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function Ts(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function cf(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:s,method:o,statusCode:i,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:s,data:{method:o,statusCode:i,request:a,response:c}}}function Jn(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function wt(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:s,warnings:o}=ow(n);return r.body=s,o?.length&&(r._meta={warnings:o}),r}function si(e,t){return Object.entries(e).reduce((n,[r,s])=>{const o=r.toLowerCase();return t.includes(o)&&e[r]&&(n[o]=s),n},{})}function ow(e){if(!e||typeof e!="string")return{body:e};const t=e.length>xc,n=iw(e);if(t){const r=e.slice(0,xc);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function iw(e){const t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function Is(e,t){const n=aw(e);return qe(n,t)}function aw(e,t=oe.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(oe.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function cw(e,t,n){try{const r=await lw(e,t,n),s=cf("resource.fetch",r);of(n.replay,s)}catch(r){$&&B.exception(r,"Failed to capture fetch breadcrumb")}}function uw(e,t){const{input:n,response:r}=t,s=n?ji(n):void 0,o=Gs(s),i=r?af(r.headers.get("content-length")):void 0;o!==void 0&&(e.data.request_body_size=o),i!==void 0&&(e.data.response_body_size=i)}async function lw(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:o=r}=t,{url:i,method:a,status_code:c=0,request_body_size:u,response_body_size:d}=e.data,l=Is(i,n.networkDetailAllowUrls)&&!Is(i,n.networkDetailDenyUrls),f=l?dw(n,t.input,u):Jn(u),p=await fw(l,n,t.response,d);return{startTimestamp:s,endTimestamp:o,url:i,method:a,statusCode:c,request:f,response:p}}function dw({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const s=n?mw(n,t):{};if(!e)return wt(s,r,void 0);const o=ji(n),[i,a]=_s(o,B),c=wt(s,r,i);return a?Ts(c,a):c}async function fw(e,{networkCaptureBodies:t,networkResponseHeaders:n},r,s){if(!e&&s!==void 0)return Jn(s);const o=r?uf(r.headers,n):{};if(!r||!t&&s!==void 0)return wt(o,s,void 0);const[i,a]=await hw(r),c=pw(i,{networkCaptureBodies:t,responseBodySize:s,captureDetails:e,headers:o});return a?Ts(c,a):c}function pw(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:r,headers:s}){try{const o=e?.length&&n===void 0?Gs(e):n;return r?t?wt(s,o,e):wt(s,o,void 0):Jn(o)}catch(o){return $&&B.exception(o,"Failed to serialize response body"),wt(s,n,void 0)}}async function hw(e){const t=gw(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await _w(t)]}catch(n){return n instanceof Error&&n.message.indexOf("Timeout")>-1?($&&B.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):($&&B.exception(n,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}function uf(e,t){const n={};return t.forEach(r=>{e.get(r)&&(n[r]=e.get(r))}),n}function mw(e,t){return e.length===1&&typeof e[0]!="string"?Kc(e[0],t):e.length===2?Kc(e[1],t):{}}function Kc(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?uf(n,t):Array.isArray(n)?{}:si(n,t):{}}function gw(e){try{return e.clone()}catch(t){$&&B.exception(t,"Failed to clone response body")}}function _w(e){return new Promise((t,n)=>{const r=pr(()=>n(new Error("Timeout while trying to read response body")),500);yw(e).then(s=>t(s),s=>n(s)).finally(()=>clearTimeout(r))})}async function yw(e){return await e.text()}async function Sw(e,t,n){try{const r=Ew(e,t,n),s=cf("resource.xhr",r);of(n.replay,s)}catch(r){$&&B.exception(r,"Failed to capture xhr breadcrumb")}}function bw(e,t){const{xhr:n,input:r}=t;if(!n)return;const s=Gs(r),o=n.getResponseHeader("content-length")?af(n.getResponseHeader("content-length")):Iw(n.response,n.responseType);s!==void 0&&(e.data.request_body_size=s),o!==void 0&&(e.data.response_body_size=o)}function Ew(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:o=r,input:i,xhr:a}=t,{url:c,method:u,status_code:d=0,request_body_size:l,response_body_size:f}=e.data;if(!c)return null;if(!a||!Is(c,n.networkDetailAllowUrls)||Is(c,n.networkDetailDenyUrls)){const S=Jn(l),w=Jn(f);return{startTimestamp:s,endTimestamp:o,url:c,method:u,statusCode:d,request:S,response:w}}const p=a[nt],h=p?si(p.request_headers,n.networkRequestHeaders):{},m=si(vw(a),n.networkResponseHeaders),[g,y]=n.networkCaptureBodies?_s(i,B):[void 0],[b,L]=n.networkCaptureBodies?ww(a):[void 0],k=wt(h,l,g),C=wt(m,f,b);return{startTimestamp:s,endTimestamp:o,url:c,method:u,statusCode:d,request:y?Ts(k,y):k,response:L?Ts(C,L):C}}function vw(e){const t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{const[s,o]=r.split(": ");return o&&(n[s.toLowerCase()]=o),n},{}):{}}function ww(e){const t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return Tw(e.response,e.responseType)}catch(n){t.push(n)}return $&&B.warn("Failed to get xhr response body",...t),[void 0]}function Tw(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch(n){return $&&B.exception(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return $&&B.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Iw(e,t){try{const n=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return Gs(n)}catch{return}}function kw(e){const t=A();try{const{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:s,networkRequestHeaders:o,networkResponseHeaders:i}=e.getOptions(),a={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:s,networkRequestHeaders:o,networkResponseHeaders:i};t&&t.on("beforeAddBreadcrumb",(c,u)=>Cw(a,c,u))}catch{}}function Cw(e,t,n){if(t.data)try{Rw(t)&&Mw(n)&&(bw(t,n),Sw(t,n,e)),xw(t)&&Aw(n)&&(uw(t,n),cw(t,n,e))}catch(r){$&&B.exception(r,"Error when enriching network breadcrumb")}}function Rw(e){return e.category==="xhr"}function xw(e){return e.category==="fetch"}function Mw(e){return e?.xhr}function Aw(e){return e?.response}function Ow(e){const t=A();dd(a0(e)),Hs(rw(e)),Y0(e),kw(e);const n=tw(e);kh(n),t&&(t.on("beforeSendEvent",G0(e)),t.on("afterSendEvent",z0(e)),t.on("createDsc",r=>{const s=e.getSessionId();s&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(r.replay_id=s)}),t.on("spanStart",r=>{e.lastActiveSpan=r}),t.on("spanEnd",r=>{e.lastActiveSpan=r}),t.on("beforeSendFeedback",async(r,s)=>{const o=e.getSessionId();s?.includeReplay&&e.isEnabled()&&o&&r.contexts?.feedback&&(r.contexts.feedback.source==="api"&&await e.sendBufferedReplayOrFlush(),r.contexts.feedback.replay_id=o)}),t.on("openFeedbackWidget",async()=>{await e.sendBufferedReplayOrFlush()}))}async function Nw(e){try{return Promise.all(qs(e,[Lw(oe.performance.memory)]))}catch{return[]}}function Lw(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,s=Date.now()/1e3;return{type:"memory",name:"memory",start:s,end:s,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function Dw(e,t,n){return pm(e,t,{...n,setTimeoutImpl:pr})}const Lr=H.navigator;function Pw(){return/iPhone|iPad|iPod/i.test(Lr?.userAgent??"")||/Macintosh/i.test(Lr?.userAgent??"")&&Lr?.maxTouchPoints&&Lr?.maxTouchPoints>1?{sampling:{mousemove:!1}}:{}}function Fw(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){$&&B.warn("Received replay event after session expired.");return}const s=r||!t;t=!0,e.clickDetector&&n0(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&s&&e.setInitialState(),!sa(e,n,s))return!0;if(!s)return!1;const o=e.session;if(Bw(e,s),e.recordingMode==="buffer"&&o&&e.eventBuffer){const i=e.eventBuffer.getEarliestTimestamp();i&&($&&B.log(`Updating session start time to earliest event in buffer to ${new Date(i)}`),o.started=i,e.getOptions().stickySession&&ra(o))}return o?.previousSessionId||e.recordingMode==="session"&&e.flush(),!0})}}function $w(e){const t=e.getOptions();return{type:G.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function Bw(e,t){!t||!e.session||e.session.segmentId!==0||sa(e,$w(e),!1)}function Hw(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function Uw(e,t,n,r){return ht(Qu(e,bi(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function Ww({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${r}${e}`;else{const o=new TextEncoder().encode(r);n=new Uint8Array(o.length+e.length),n.set(o),n.set(e,o.length)}return n}async function zw({client:e,scope:t,replayId:n,event:r}){const s=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,o={event_id:n,integrations:s};e.emit("preprocessEvent",r,o);const i=await sl(e.getOptions(),r,o,t,e,be());if(!i)return null;e.emit("postprocessEvent",i,o),i.platform=i.platform||"javascript";const a=e.getSdkMetadata(),{name:c,version:u}=a?.sdk||{};return i.sdk={...i.sdk,name:c||"sentry.javascript.unknown",version:u||"0.0.0"},i}async function jw({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:s,session:o}){const i=Ww({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:d}=r,l=A(),f=X(),p=l?.getTransport(),h=l?.getDsn();if(!l||!p||!h||!o.sampled)return ut({});const m={type:bE,replay_start_timestamp:d/1e3,timestamp:s/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:o.sampled},g=await zw({scope:f,client:l,replayId:t,event:m});if(!g)return l.recordDroppedEvent("event_processor","replay"),$&&B.log("An event processor returned `null`, will not send event."),ut({});delete g.sdkProcessingMetadata;const y=Uw(g,i,h,l.getOptions().tunnel);let b;try{b=await p.send(y)}catch(k){const C=new Error(Gi);try{C.cause=k}catch{}throw C}if(typeof b.statusCode=="number"&&(b.statusCode<200||b.statusCode>=300))throw new lf(b.statusCode);const L=yl({},b);if(_l(L,"replay"))throw new ia(L);return b}class lf extends Error{constructor(t){super(`Transport returned status code ${t}`)}}class ia extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}}async function df(e,t={count:0,interval:kE}){const{recordingData:n,onError:r}=e;if(n.length)try{return await jw(e),!0}catch(s){if(s instanceof lf||s instanceof ia)throw s;if(wh("Replays",{_retryCount:t.count}),r&&r(s),t.count>=CE){const o=new Error(`${Gi} - max retries exceeded`);try{o.cause=s}catch{}throw o}return t.interval*=++t.count,new Promise((o,i)=>{pr(async()=>{try{await df(e,t),o(!0)}catch(a){i(a)}},t.interval)})}}const ff="__THROTTLED",qw="__SKIPPED";function Gw(e,t,n){const r=new Map,s=a=>{const c=a-n;r.forEach((u,d)=>{d<c&&r.delete(d)})},o=()=>[...r.values()].reduce((a,c)=>a+c,0);let i=!1;return(...a)=>{const c=Math.floor(Date.now()/1e3);if(s(c),o()>=t){const d=i;return i=!0,d?qw:ff}i=!1;const u=r.get(c)||0;return r.set(c,u+1),e(...a)}}class Vw{constructor({options:t,recordingOptions:n}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:EE,sessionIdleExpire:vE},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=Dw(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Gw((i,a)=>H0(this,i,a),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:s}=this.getOptions(),o=r?{threshold:Math.min(RE,r),timeout:r,scrollTimeout:xE,ignoreSelector:s?s.join(","):""}:void 0;if(o&&(this.clickDetector=new Zv(this,o)),$){const i=t._experiments;B.setConfig({captureExceptions:!!i.captureExceptions,traceInternals:!!i.traceInternals})}this._handleVisibilityChange=()=>{oe.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{const i=Je({category:"ui.blur"});this._doChangeToBackgroundTasks(i)},this._handleWindowFocus=()=>{const i=Je({category:"ui.focus"});this._doChangeToForegroundTasks(i)},this._handleKeyboardEvent=i=>{d0(this,i)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(t){$&&B.exception(t),this._options.onError&&this._options.onError(t)}initializeSampling(t){const{errorSampleRate:n,sessionSampleRate:r}=this._options,s=n<=0&&r<=0;if(this._requiresManualStart=s,!s){if(this._initializeSessionForSampling(t),!this.session){$&&B.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",$&&B.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){$&&B.log("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){$&&B.log("Buffering is in progress, call `flush()` to save the replay");return}$&&B.infoTick("Starting replay in session mode"),this._updateUserActivity();const t=vo({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this.recordingMode="session",this._initializeRecording()}startBuffering(){if(this._isEnabled){$&&B.log("Buffering is in progress, call `flush()` to save the replay");return}$&&B.infoTick("Starting replay in buffer mode");const t=vo({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const t=this._canvas;this._stopRecording=rt({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:IE}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:Fw(this),...Pw(),onMutation:this._onMutationHandler.bind(this),...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this.handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this.handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{$&&B.log(`Stopping Replay${n?` triggered by ${n}`:""}`),sf(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),this.eventBuffer?.destroy(),this.eventBuffer=null,D0(this)}catch(r){this.handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),$&&B.log("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),$&&B.log("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const n=Date.now();$&&B.log("Converting buffer to session"),await this.flushImmediate();const r=this.stopRecording();!t||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){const n=t();this.recordingMode==="buffer"||!this._isEnabled||n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session?.id}checkAndHandleExpiredSession(){if(this._lastActivity&&ni(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const t=`${oe.location.pathname}${oe.location.hash}${oe.location.search}`,n=`${oe.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){const r=this._throttledAddEvent(t,n);if(r===ff){const s=Je({category:"replay.throttled"});this.addUpdate(()=>!sa(this,{type:qv,timestamp:s.timestamp||0,data:{tag:"breadcrumb",payload:s,metric:!0}}))}return r}getCurrentRoute(){const t=this.lastActiveSpan||Ee(),n=t&&Se(t),s=(n&&q(n).data||{})[Fe];if(!(!n||!s||!["route","custom"].includes(s)))return q(n).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=O0({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(t){const n=this._options.errorSampleRate>0,r=vo({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;const t=this.session;return ef(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{oe.document.addEventListener("visibilitychange",this._handleVisibilityChange),oe.addEventListener("blur",this._handleWindowBlur),oe.addEventListener("focus",this._handleWindowFocus),oe.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(Ow(this),this._hasInitializedCoreListeners=!0)}catch(t){this.handleException(t)}this._performanceCleanupCallback=I0(this)}_removeListeners(){try{oe.document.removeEventListener("visibilitychange",this._handleVisibilityChange),oe.removeEventListener("blur",this._handleWindowBlur),oe.removeEventListener("focus",this._handleWindowFocus),oe.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this.handleException(t)}}_doChangeToBackgroundTasks(t){!this.session||Qd(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){$&&B.log("Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:G.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){let t=m0(this.performanceEntries).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const n=this._context.initialTimestamp/1e3;t=t.filter(r=>r.start>=n)}return Promise.all(qs(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:t,eventBuffer:n}=this;if(!t||!n||this._requiresManualStart||t.segmentId)return;const r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){const t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){const t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){$&&B.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!!this.eventBuffer?.hasEvents&&(await Nw(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const r=this._popEventContext(),s=this.session.segmentId++;this._maybeSaveSession();const o=await this.eventBuffer.finish();await df({replayId:t,recordingData:o,segmentId:s,eventContext:r,session:this.session,timestamp:n,onError:i=>this.handleException(i)})}catch(n){this.handleException(n),this.stop({reason:"sendReplay"});const r=A();if(r){const s=n instanceof ia?"ratelimit_backoff":"send_error";r.recordDroppedEvent(s,"replay")}}}async _flush({force:t=!1}={}){if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){$&&B.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;const n=this.session.started,s=Date.now()-n;this._debouncedFlush.cancel();const o=s<this._options.minReplayDuration,i=s>this._options.maxReplayDuration+5e3;if(o||i){$&&B.log(`Session duration (${Math.floor(s/1e3)}s) is too ${o?"short":"long"}, not sending replay.`),o&&this._debouncedFlush();return}const a=this.eventBuffer;a&&this.session.segmentId===0&&!a.hasCheckout&&$&&B.log("Flushing initial segment without checkout.");const c=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(u){this.handleException(u)}finally{this._flushLock=void 0,c&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&ra(this.session)}_onMutationHandler(t){const{ignoreMutations:n}=this._options._experiments;if(n?.length&&t.some(a=>{const c=Hw(a.target),u=n.join(",");return c?.matches(u)}))return!1;const r=t.length,s=this._options.mutationLimit,o=this._options.mutationBreadcrumbLimit,i=s&&r>s;if(r>o||i){const a=Je({category:"replay.mutations",data:{count:r,limit:i}});this._createCustomBreadcrumb(a)}return i?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}function Bn(e,t){return[...e,...t].join(",")}function Yw({mask:e,unmask:t,block:n,unblock:r,ignore:s}){const o=["base","iframe[srcdoc]:not([src])"],i=Bn(e,[".sentry-mask","[data-sentry-mask]"]),a=Bn(t,[]);return{maskTextSelector:i,unmaskTextSelector:a,blockSelector:Bn(n,[".sentry-block","[data-sentry-block]",...o]),unblockSelector:Bn(r,[]),ignoreSelector:Bn(s,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function Xw({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:s,value:o}){return!r||s.unmaskTextSelector&&e.matches(s.unmaskTextSelector)?o:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?o.replace(/[\S]/g,"*"):o}const Jc='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Kw=["content-length","content-type","accept"];let Zc=!1;const i1=(e=>new Jw(e));class Jw{constructor({flushMinDelay:t=wE,flushMaxDelay:n=TE,minReplayDuration:r=ME,maxReplayDuration:s=Mc,stickySession:o=!0,useCompression:i=!0,workerUrl:a,_experiments:c={},maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:l=!0,mutationBreadcrumbLimit:f=750,mutationLimit:p=1e4,slowClickTimeout:h=7e3,slowClickIgnoreSelectors:m=[],networkDetailAllowUrls:g=[],networkDetailDenyUrls:y=[],networkCaptureBodies:b=!0,networkRequestHeaders:L=[],networkResponseHeaders:k=[],mask:C=[],maskAttributes:S=["title","placeholder","aria-label"],unmask:w=[],block:x=[],unblock:E=[],ignore:I=[],maskFn:P,beforeAddRecordingEvent:v,beforeErrorSampling:M,onError:U}={}){this.name="Replay";const N=Yw({mask:C,unmask:w,block:x,unblock:E,ignore:I});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{password:!0},maskTextFn:P,maskInputFn:P,maskAttributeFn:(R,F,O)=>Xw({maskAttributes:S,maskAllText:u,privacyOptions:N,key:R,value:F,el:O}),...N,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:R=>{try{R.__rrweb__=!0}catch{}},recordCrossOriginIframes:!!c.recordCrossOriginIframes},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(r,AE),maxReplayDuration:Math.min(s,Mc),stickySession:o,useCompression:i,workerUrl:a,blockAllMedia:l,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:f,mutationLimit:p,slowClickTimeout:h,slowClickIgnoreSelectors:m,networkDetailAllowUrls:g,networkDetailDenyUrls:y,networkCaptureBodies:b,networkRequestHeaders:Qc(L),networkResponseHeaders:Qc(k),beforeAddRecordingEvent:v,beforeErrorSampling:M,onError:U,_experiments:c},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Jc}`:Jc),this._isInitialized&&Bo())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Zc}set _isInitialized(t){Zc=t}afterAllSetup(t){!Bo()||this._replay||(this._setup(t),this._initialize(t))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(t):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(){if(this._replay?.isEnabled())return this._replay.getSessionId()}getRecordingMode(){if(this._replay?.isEnabled())return this._replay.recordingMode}_initialize(t){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(t),this._replay.initializeSampling())}_setup(t){const n=Zw(this._initialOptions,t);this._replay=new Vw({options:n,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(t){try{const n=t.getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}}function Zw(e,t){const n=t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...e},s=Wt(n.replaysSessionSampleRate),o=Wt(n.replaysOnErrorSampleRate);return s==null&&o==null&&Ct(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),s!=null&&(r.sessionSampleRate=s),o!=null&&(r.errorSampleRate=o),r}function Qc(e){return[...Kw,...e.map(t=>t.toLowerCase())]}function a1(){return A()?.getIntegrationByName("Replay")}var Qw=Object.defineProperty,eT=(e,t,n)=>t in e?Qw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eu=(e,t,n)=>eT(e,typeof t!="symbol"?t+"":t,n);class tT{constructor(){eu(this,"idNodeMap",new Map),eu(this,"nodeMetaMap",new WeakMap)}getId(t){return t?this.getMeta(t)?.id??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const s=this.nodeMetaMap.get(r);s&&this.nodeMetaMap.set(n,s)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function nT(){return new tT}function rT(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function oi(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:oi(e.parentNode,t,n,r+1)}function tu(e,t){return n=>{const r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(rT(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}const sn=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let nu={map:{},getId(){return console.error(sn),-1},getNode(){return console.error(sn),null},removeNodeFromMap(){console.error(sn)},has(){return console.error(sn),!1},reset(){console.error(sn)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(nu=new Proxy(nu,{get(e,t,n){return t==="map"&&console.error(sn),Reflect.get(e,t,n)}}));function aa(e,t,n,r,s=window){const o=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,r?n:{set(i){hf(()=>{n.set.call(this,i)},0),o&&o.set&&o.set.call(this,i)}}),()=>aa(e,t,o||{},!0)}function ca(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],s=n(r);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=s,()=>{e[t]=r}}catch{return()=>{}}}Date.now().toString();function sT(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function Vs(e,t,n,r,s){if(!e)return!1;const o=sT(e);if(!o)return!1;const i=tu(t,n),a=oi(o,i);let c=-1;return a<0?!1:(r&&(c=oi(o,tu(null,r))),a>-1&&c<0?!0:a<c)}const ru={};function pf(e){const t=ru[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const o=s.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(s)}catch{}return ru[e]=r.bind(window)}function Ot(...e){return pf("requestAnimationFrame")(...e)}function hf(...e){return pf("setTimeout")(...e)}var Rn=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Rn||{});let Jr;function oT(e){Jr=e}const wo=e=>Jr?(...n)=>{try{return e(...n)}catch(r){if(Jr&&Jr(r)===!0)return()=>{};throw r}}:e;var ln="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",iT=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Dr=0;Dr<ln.length;Dr++)iT[ln.charCodeAt(Dr)]=Dr;var aT=function(e){var t=new Uint8Array(e),n,r=t.length,s="";for(n=0;n<r;n+=3)s+=ln[t[n]>>2],s+=ln[(t[n]&3)<<4|t[n+1]>>4],s+=ln[(t[n+1]&15)<<2|t[n+2]>>6],s+=ln[t[n+2]&63];return r%3===2?s=s.substring(0,s.length-1)+"=":r%3===1&&(s=s.substring(0,s.length-2)+"=="),s};const su=new Map;function cT(e,t){let n=su.get(e);return n||(n=new Map,su.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}const mf=(e,t,n)=>{if(!e||!(_f(e,t)||typeof e=="object"))return;const r=e.constructor.name,s=cT(n,r);let o=s.indexOf(e);return o===-1&&(o=s.length,s.push(e)),o};function Zr(e,t,n){if(e instanceof Array)return e.map(r=>Zr(r,t,n));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const r=e.constructor.name,s=aT(e);return{rr_type:r,base64:s}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[Zr(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const r=e.constructor.name,{src:s}=e;return{rr_type:r,src:s}}else if(e instanceof HTMLCanvasElement){const r="HTMLImageElement",s=e.toDataURL();return{rr_type:r,src:s}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[Zr(e.data,t,n),e.width,e.height]};if(_f(e,t)||typeof e=="object"){const r=e.constructor.name,s=mf(e,t,n);return{rr_type:r,index:s}}}}return e}const gf=(e,t,n)=>e.map(r=>Zr(r,t,n)),_f=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(s=>typeof t[s]=="function").find(s=>e instanceof t[s]);function uT(e,t,n,r,s){const o=[],i=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of i)try{if(typeof t.CanvasRenderingContext2D.prototype[a]!="function")continue;const c=ca(t.CanvasRenderingContext2D.prototype,a,function(u){return function(...d){return Vs(this.canvas,n,r,s,!0)||hf(()=>{const l=gf(d,t,this);e(this.canvas,{type:Rn["2D"],property:a,args:l})},0),u.apply(this,d)}});o.push(c)}catch{const c=aa(t.CanvasRenderingContext2D.prototype,a,{set(u){e(this.canvas,{type:Rn["2D"],property:a,args:[u],setter:!0})}});o.push(c)}return()=>{o.forEach(a=>a())}}function lT(e){return e==="experimental-webgl"?"webgl":e}function ou(e,t,n,r,s){const o=[];try{const i=ca(e.HTMLCanvasElement.prototype,"getContext",function(a){return function(c,...u){if(!Vs(this,t,n,r,!0)){const d=lT(c);if("__context"in this||(this.__context=d),s&&["webgl","webgl2"].includes(d))if(u[0]&&typeof u[0]=="object"){const l=u[0];l.preserveDrawingBuffer||(l.preserveDrawingBuffer=!0)}else u.splice(0,1,{preserveDrawingBuffer:!0})}return a.apply(this,[c,...u])}});o.push(i)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{o.forEach(i=>i())}}function iu(e,t,n,r,s,o,i,a){const c=[],u=Object.getOwnPropertyNames(e);for(const d of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(d))try{if(typeof e[d]!="function")continue;const l=ca(e,d,function(f){return function(...p){const h=f.apply(this,p);if(mf(h,a,this),"tagName"in this.canvas&&!Vs(this.canvas,r,s,o,!0)){const m=gf(p,a,this),g={type:t,property:d,args:m};n(this.canvas,g)}return h}});c.push(l)}catch{const l=aa(e,d,{set(f){n(this.canvas,{type:t,property:d,args:[f],setter:!0})}});c.push(l)}return c}function dT(e,t,n,r,s,o){const i=[];return i.push(...iu(t.WebGLRenderingContext.prototype,Rn.WebGL,e,n,r,s,o,t)),typeof t.WebGL2RenderingContext<"u"&&i.push(...iu(t.WebGL2RenderingContext.prototype,Rn.WebGL2,e,n,r,s,o,t)),()=>{i.forEach(a=>a())}}const fT='for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};';function pT(){const e=new Blob([fT]);return URL.createObjectURL(e)}class hT{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.shadowDoms=new Set,this.windowsSet=new WeakSet,this.windows=[],this.restoreHandlers=[],this.frozen=!1,this.locked=!1,this.snapshotInProgressMap=new Map,this.worker=null,this.lastSnapshotTime=0,this.processMutation=(l,f)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(l)||this.pendingCanvasMutations.set(l,[]),this.pendingCanvasMutations.get(l).push(f)};const{sampling:n="all",win:r,blockClass:s,blockSelector:o,unblockSelector:i,maxCanvasSize:a,recordCanvas:c,dataURLOptions:u,errorHandler:d}=t;this.mutationCb=t.mutationCb,this.mirror=t.mirror,this.options=t,d&&oT(d),(c&&typeof n=="number"||t.enableManualSnapshot)&&(this.worker=this.initFPSWorker()),this.addWindow(r),!t.enableManualSnapshot&&wo(()=>{c&&n==="all"&&(this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher()),c&&typeof n=="number"&&this.initCanvasFPSObserver(n,s,o,i,a,{dataURLOptions:u})})()}reset(){this.pendingCanvasMutations.clear(),this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.windowsSet=new WeakSet,this.windows=[],this.shadowDoms=new Set,this.worker?.terminate(),this.worker=null,this.snapshotInProgressMap=new Map}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}addWindow(t){const{sampling:n="all",blockClass:r,blockSelector:s,unblockSelector:o,recordCanvas:i,enableManualSnapshot:a}=this.options;if(!this.windowsSet.has(t)){if(a){this.windowsSet.add(t),this.windows.push(new WeakRef(t));return}wo(()=>{if(i&&n==="all"&&this.initCanvasMutationObserver(t,r,s,o),i&&typeof n=="number"){const c=ou(t,r,s,o,!0);this.restoreHandlers.push(()=>{c()})}})(),this.windowsSet.add(t),this.windows.push(new WeakRef(t))}}addShadowRoot(t){this.shadowDoms.add(new WeakRef(t))}resetShadowRoots(){this.shadowDoms=new Set}initFPSWorker(){const t=new Worker(pT());return t.onmessage=n=>{const r=n.data,{id:s}=r;if(this.snapshotInProgressMap.set(s,!1),!("base64"in r))return;const{base64:o,type:i,width:a,height:c}=r;this.mutationCb({id:s,type:Rn["2D"],commands:[{property:"clearRect",args:[0,0,a,c]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:o}],type:i}]},0,0,a,c]}]})},t}initCanvasFPSObserver(t,n,r,s,o,i){const a=this.takeSnapshot(!1,t,n,r,s,o,i.dataURLOptions);this.restoreHandlers.push(()=>{cancelAnimationFrame(a)})}initCanvasMutationObserver(t,n,r,s){const o=ou(t,n,r,s,!1),i=uT(this.processMutation.bind(this),t,n,r,s),a=dT(this.processMutation.bind(this),t,n,r,s,this.mirror);this.restoreHandlers.push(()=>{o(),i(),a()})}snapshot(t){const{options:n}=this,r=this.takeSnapshot(!0,n.sampling==="all"?2:n.sampling||2,n.blockClass,n.blockSelector,n.unblockSelector,n.maxCanvasSize,n.dataURLOptions,t);this.restoreHandlers.push(()=>{cancelAnimationFrame(r)})}takeSnapshot(t,n,r,s,o,i,a,c){const u=1e3/n;let d;const l=p=>{if(p)return[p];const h=[],m=g=>{g.querySelectorAll("canvas").forEach(y=>{Vs(y,r,s,o)||h.push(y)})};for(const g of this.windows){const y=g.deref();let b;try{b=y&&y.document}catch{}b&&m(b)}for(const g of this.shadowDoms){const y=g.deref();y&&m(y)}return h},f=p=>{if(this.windows.length){if(this.lastSnapshotTime&&p-this.lastSnapshotTime<u){d=Ot(f);return}this.lastSnapshotTime=p,l(c).forEach(h=>{if(!this.mirror.hasNode(h))return;const m=this.mirror.getId(h);if(!this.snapshotInProgressMap.get(m)&&!(!h.width||!h.height)){if(this.snapshotInProgressMap.set(m,!0),!t&&["webgl","webgl2"].includes(h.__context)){const g=h.getContext(h.__context);g?.getContextAttributes()?.preserveDrawingBuffer===!1&&g.clear(g.COLOR_BUFFER_BIT)}createImageBitmap(h).then(g=>{this.worker?.postMessage({id:m,bitmap:g,width:h.width,height:h.height,dataURLOptions:a,maxCanvasSize:i},[g])}).catch(g=>{wo(()=>{throw g})()})}}),t||(d=Ot(f))}};return d=Ot(f),d}startPendingCanvasMutationFlusher(){Ot(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const t=n=>{this.rafStamps.latestId=n,Ot(t)};Ot(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,n)=>{const r=this.mirror.getId(n);this.flushPendingCanvasMutationFor(n,r)}),Ot(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,n){if(this.frozen||this.locked)return;const r=this.pendingCanvasMutations.get(t);if(!r||n===-1)return;const s=r.map(i=>{const{type:a,...c}=i;return c}),{type:o}=r[0];this.mutationCb({id:n,type:o,commands:s}),this.pendingCanvasMutations.delete(t)}}try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=e.contentWindow?.Array.from||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}nT();var au;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(au||(au={}));const cu={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},mT="ReplayCanvas",Pr=1280,gT=((e={})=>{const[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,Pr):Pr,n?Math.min(n,Pr):Pr]};let s;const o=new Promise(i=>s=i);return{name:mT,getOptions(){const{quality:i,enableManualSnapshot:a,maxCanvasSize:c}=r;return{enableManualSnapshot:a,recordCanvas:!0,getCanvasManager:u=>{const d=new hT({...u,enableManualSnapshot:a,maxCanvasSize:c,errorHandler:l=>{try{typeof l=="object"&&(l.__rrweb__=!0)}catch{}}});return s(d),d},...cu[i]||cu.medium}},async snapshot(i){(await o).snapshot(i)}}}),c1=gT;function Ke(e=0){return((Te()||performance.timeOrigin)+e)/1e3}function _T(e){const t=[];if(e.nextHopProtocol!=null){const{name:n,version:r}=cd(e.nextHopProtocol);t.push(["network.protocol.version",r],["network.protocol.name",n])}return Te()?[...t,["http.request.redirect_start",Ke(e.redirectStart)],["http.request.fetch_start",Ke(e.fetchStart)],["http.request.domain_lookup_start",Ke(e.domainLookupStart)],["http.request.domain_lookup_end",Ke(e.domainLookupEnd)],["http.request.connect_start",Ke(e.connectStart)],["http.request.secure_connection_start",Ke(e.secureConnectionStart)],["http.request.connection_end",Ke(e.connectEnd)],["http.request.request_start",Ke(e.requestStart)],["http.request.response_start",Ke(e.responseStart)],["http.request.response_end",Ke(e.responseEnd)]]:t}const uu=new WeakMap,To=new Map,yf={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function yT(e,t){const{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:s,shouldCreateSpanForRequest:o,enableHTTPTimings:i,tracePropagationTargets:a,onRequestSpanStart:c}={...yf,...t},u=typeof o=="function"?o:f=>!0,d=f=>bT(f,a),l={};n&&(e.addEventProcessor(f=>(f.type==="transaction"&&f.spans&&f.spans.forEach(p=>{if(p.op==="http.client"){const h=To.get(p.span_id);h&&(p.timestamp=h/1e3,To.delete(p.span_id))}}),f)),s&&$g(f=>{if(f.response){const p=uu.get(f.response);p&&f.endTimestamp&&To.set(p,f.endTimestamp)}}),Ri(f=>{const p=Ig(f,u,d,l);if(f.response&&f.fetchData.__span&&uu.set(f.response,f.fetchData.__span),p){const h=Sf(f.fetchData.url),m=h?Ht(h).host:void 0;p.setAttributes({"http.url":h,"server.address":m}),i&&lu(p),c?.(p,{headers:f.headers})}})),r&&zi(f=>{const p=ET(f,u,d,l);if(p){i&&lu(p);let h;try{h=new Headers(f.xhr.__sentry_xhr_v3__?.request_headers)}catch{}c?.(p,{headers:h})}})}function ST(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function lu(e){const{url:t}=q(e).data;if(!t||typeof t!="string")return;const n=jt("resource",({entries:r})=>{r.forEach(s=>{ST(s)&&s.name.endsWith(t)&&(_T(s).forEach(i=>e.setAttribute(...i)),setTimeout(n))})})}function bT(e,t){const n=qt();if(n){let r,s;try{r=new URL(e,n),s=new URL(n).origin}catch{return!1}const o=r.origin===s;return t?qe(r.toString(),t)||o&&qe(r.pathname,t):o}else{const r=!!e.match(/^\/(?!\/)/);return t?qe(e,t):r}}function ET(e,t,n,r){const s=e.xhr,o=s?.[nt];if(!s||s.__sentry_own_request__||!o)return;const{url:i,method:a}=o,c=It()&&t(i);if(e.endTimestamp&&c){const m=s.__sentry_xhr_span_id__;if(!m)return;const g=r[m];g&&o.status_code!==void 0&&(rs(g,o.status_code),g.end(),delete r[m]);return}const u=Sf(i),d=Ht(u||i),l=Ml(i),f=!!Ee(),p=c&&f?On({name:`${a} ${l}`,attributes:{url:i,type:"xhr","http.method":a,"http.url":u,"server.address":d?.host,[le]:"auto.http.browser",[He]:"http.client",...d?.search&&{"http.query":d?.search},...d?.hash&&{"http.fragment":d?.hash}}}):new ct;s.__sentry_xhr_span_id__=p.spanContext().spanId,r[s.__sentry_xhr_span_id__]=p,n(i)&&vT(s,It()&&f?p:void 0);const h=A();return h&&h.emit("beforeOutgoingRequestSpan",p,e),p}function vT(e,t){const{"sentry-trace":n,baggage:r}=El({span:t});n&&wT(e,n,r)}function wT(e,t,n){const r=e.__sentry_xhr_v3__?.request_headers;if(!r?.["sentry-trace"])try{if(e.setRequestHeader("sentry-trace",t),n){const s=r?.baggage;(!s||!TT(s))&&e.setRequestHeader("baggage",n)}}catch{}}function TT(e){return e.split(",").some(t=>t.trim().startsWith("sentry-"))}function Sf(e){try{return new URL(e,D.location.origin).href}catch{return}}function IT(){D.document?D.document.addEventListener("visibilitychange",()=>{const e=Ee();if(!e)return;const t=Se(e);if(D.document.hidden&&t){const n="cancelled",{op:r,status:s}=q(t);Y&&_.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${r}`),s||t.setStatus({code:fe,message:n}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):Y&&_.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const kT=3600,bf="sentry_previous_trace",CT="sentry.previous_trace";function RT(e,{linkPreviousTrace:t,consistentTraceSampling:n}){const r=t==="session-storage";let s=r?AT():void 0;e.on("spanStart",i=>{if(Se(i)!==i)return;const a=X().getPropagationContext();s=xT(s,i,a),r&&MT(s)});let o=!0;n&&e.on("beforeSampling",i=>{if(!s)return;const a=X(),c=a.getPropagationContext();if(o&&c.parentSpanId){o=!1;return}a.setPropagationContext({...c,dsc:{...c.dsc,sample_rate:String(s.sampleRate),sampled:String(ii(s.spanContext))},sampleRand:s.sampleRand}),i.parentSampled=ii(s.spanContext),i.parentSampleRate=s.sampleRate,i.spanAttributes={...i.spanAttributes,[Lu]:s.sampleRate}})}function xT(e,t,n){const r=q(t);function s(){try{return Number(n.dsc?.sample_rate)??Number(r.data?.[hi])}catch{return 0}}const o={spanContext:t.spanContext(),startTimestamp:r.start_timestamp,sampleRate:s(),sampleRand:n.sampleRand};if(!e)return o;const i=e.spanContext;return i.traceId===r.trace_id?e:(Date.now()/1e3-e.startTimestamp<=kT&&(Y&&_.log(`Adding previous_trace ${i} link to span ${{op:r.op,...t.spanContext()}}`),t.addLink({context:i,attributes:{[lp]:"previous_trace"}}),t.setAttribute(CT,`${i.traceId}-${i.spanId}-${ii(i)?1:0}`)),o)}function MT(e){try{D.sessionStorage.setItem(bf,JSON.stringify(e))}catch(t){Y&&_.warn("Could not store previous trace in sessionStorage",t)}}function AT(){try{const e=D.sessionStorage?.getItem(bf);return JSON.parse(e)}catch{return}}function ii(e){return e.traceFlags===1}const OT="BrowserTracing",NT={...Hr,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,_experiments:{},...yf},u1=((e={})=>{const t={name:void 0,source:void 0},n=D.document,{enableInp:r,enableElementTiming:s,enableLongTask:o,enableLongAnimationFrame:i,_experiments:{enableInteractions:a,enableStandaloneClsSpans:c,enableStandaloneLcpSpans:u},beforeStartSpan:d,idleTimeout:l,finalTimeout:f,childSpanTimeout:p,markBackgroundSpan:h,traceFetch:m,traceXHR:g,trackFetchStreamPerformance:y,shouldCreateSpanForRequest:b,enableHTTPTimings:L,ignoreResourceSpans:k,ignorePerformanceApiSpans:C,instrumentPageLoad:S,instrumentNavigation:w,detectRedirects:x,linkPreviousTrace:E,consistentTraceSampling:I,onRequestSpanStart:P}={...NT,...e};let v,M;function U(N,R,F=!0){const O=R.op==="pageload",z=d?d(R):R,K=z.attributes||{};if(R.name!==z.name&&(K[Fe]="custom",z.attributes=K),!F){const ge=Gt();On({...z,startTime:ge}).end(ge);return}t.name=z.name,t.source=K[Fe];const ae=nl(z,{idleTimeout:l,finalTimeout:f,childSpanTimeout:p,disableAutoFinish:O,beforeSpanEnd:ge=>{v?.(),_S(ge,{recordClsOnPageloadSpan:!c,recordLcpOnPageloadSpan:!u,ignoreResourceSpans:k,ignorePerformanceApiSpans:C}),fu(N,void 0);const me=X(),Oe=me.getPropagationContext();me.setPropagationContext({...Oe,traceId:ae.spanContext().traceId,sampled:Vt(ae),dsc:Ge(ge)})}});fu(N,ae);function Pe(){n&&["interactive","complete"].includes(n.readyState)&&N.emit("idleSpanEnableAutoFinish",ae)}O&&n&&(n.addEventListener("readystatechange",()=>{Pe()}),Pe())}return{name:OT,setup(N){if(Ip(),v=uS({recordClsStandaloneSpans:c||!1,recordLcpStandaloneSpans:u||!1,client:N}),r&&BS(),s&&CS(),i&&H.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?dS():o&&lS(),a&&fS(),x&&n){const F=()=>{M=he()};addEventListener("click",F,{capture:!0}),addEventListener("keydown",F,{capture:!0,passive:!0})}function R(){const F=Zn(N);F&&!q(F).timestamp&&(Y&&_.log(`[Tracing] Finishing current active span with op: ${q(F).op}`),F.setAttribute(ns,"cancelled"),F.end())}N.on("startNavigationSpan",(F,O)=>{if(A()!==N)return;if(O?.isRedirect){Y&&_.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),U(N,{op:"navigation.redirect",...F},!1);return}R(),be().setPropagationContext({traceId:at(),sampleRand:Math.random()});const z=X();z.setPropagationContext({traceId:at(),sampleRand:Math.random()}),z.setSDKProcessingMetadata({normalizedRequest:void 0}),U(N,{op:"navigation",...F})}),N.on("startPageLoadSpan",(F,O={})=>{if(A()!==N)return;R();const z=O.sentryTrace||du("sentry-trace"),K=O.baggage||du("baggage"),ae=Hu(z,K),Pe=X();Pe.setPropagationContext(ae),Pe.setSDKProcessingMetadata({normalizedRequest:Li()}),U(N,{op:"pageload",...F})})},afterAllSetup(N){let R=qt();if(E!=="off"&&RT(N,{linkPreviousTrace:E,consistentTraceSampling:I}),D.location){if(S){const F=Te();LT(N,{name:D.location.pathname,startTime:F?F/1e3:void 0,attributes:{[Fe]:"url",[le]:"auto.pageload.browser"}})}w&&Hs(({to:F,from:O})=>{if(O===void 0&&R?.indexOf(F)!==-1){R=void 0;return}R=void 0;const z=xl(F),K=Zn(N),ae=K&&x&&FT(K,M);DT(N,{name:z?.pathname||D.location.pathname,attributes:{[Fe]:"url",[le]:"auto.navigation.browser"}},{url:F,isRedirect:ae})})}h&&IT(),a&&PT(N,l,f,p,t),r&&WS(),yT(N,{traceFetch:m,traceXHR:g,trackFetchStreamPerformance:y,tracePropagationTargets:N.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:b,enableHTTPTimings:L,onRequestSpanStart:P})}}});function LT(e,t,n){e.emit("startPageLoadSpan",t,n),X().setTransactionName(t.name);const r=Zn(e);return r&&e.emit("afterStartPageLoadSpan",r),r}function DT(e,t,n){const{url:r,isRedirect:s}=n||{};e.emit("beforeStartNavigationSpan",t,{isRedirect:s}),e.emit("startNavigationSpan",t,{isRedirect:s});const o=X();return o.setTransactionName(t.name),r&&!s&&o.setSDKProcessingMetadata({normalizedRequest:{...Li(),url:r}}),Zn(e)}function du(e){return D.document?.querySelector(`meta[name=${e}]`)?.getAttribute("content")||void 0}function PT(e,t,n,r,s){const o=D.document;let i;const a=()=>{const c="ui.action.click",u=Zn(e);if(u){const d=q(u).op;if(["navigation","pageload"].includes(d)){Y&&_.warn(`[Tracing] Did not create ${c} span because a pageload or navigation span is in progress.`);return}}if(i&&(i.setAttribute(ns,"interactionInterrupted"),i.end(),i=void 0),!s.name){Y&&_.warn(`[Tracing] Did not create ${c} transaction because _latestRouteName is missing.`);return}i=nl({name:s.name,op:c,attributes:{[Fe]:s.source||"url"}},{idleTimeout:t,finalTimeout:n,childSpanTimeout:r})};o&&addEventListener("click",a,{capture:!0})}const Ef="_sentry_idleSpan";function Zn(e){return e[Ef]}function fu(e,t){Ae(e,Ef,t)}const pu=.3;function FT(e,t){const n=q(e),r=Gt(),s=n.start_timestamp;return!(r-s>pu||t&&r-t<=pu)}function xn(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function $T(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=xn(n);return s=>r.then(o=>s(o.transaction(t,"readwrite").objectStore(t)))}function ua(e){return xn(e.getAllKeys())}function BT(e,t,n){return e(r=>ua(r).then(s=>{if(!(s.length>=n))return r.put(t,Math.max(...s,0)+1),xn(r.transaction)}))}function HT(e,t,n){return e(r=>ua(r).then(s=>{if(!(s.length>=n))return r.put(t,Math.min(...s,0)-1),xn(r.transaction)}))}function UT(e){return e(t=>ua(t).then(n=>{const r=n[0];if(r!=null)return xn(t.get(r)).then(s=>(t.delete(r),xn(t.transaction).then(()=>s)))}))}function WT(e){let t;function n(){return t==null&&(t=$T(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{push:async r=>{try{const s=await is(r);await BT(n(),s,e.maxQueueSize||30)}catch{}},unshift:async r=>{try{const s=await is(r);await HT(n(),s,e.maxQueueSize||30)}catch{}},shift:async()=>{try{const r=await UT(n());if(r)return Bp(r)}catch{}}}}function zT(e){return t=>{const n=e({...t,createStore:WT});return D.addEventListener("online",async r=>{await n.flush()}),n}}function l1(e=pd){return zT(nm(e))}const hu=1e6,Qr=String(0),jT="main",ks=D.navigator;let vf="",wf="",Tf="",ai=ks?.userAgent||"",If="";const qT=ks?.language||ks?.languages?.[0]||"";function GT(e){return typeof e=="object"&&e!==null&&"getHighEntropyValues"in e}const mu=ks?.userAgentData;GT(mu)&&mu.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(e=>{if(vf=e.platform||"",Tf=e.architecture||"",If=e.model||"",wf=e.platformVersion||"",e.fullVersionList?.length){const t=e.fullVersionList[e.fullVersionList.length-1];ai=`${t.brand} ${t.version}`}}).catch(e=>{});function VT(e){return!("thread_metadata"in e)}function YT(e){return VT(e)?JT(e):e}function XT(e){const t=e.contexts?.trace?.trace_id;return typeof t=="string"&&t.length!==32&&Y&&_.log(`[Profiling] Invalid traceId: ${t} on profiled event`),typeof t!="string"?"":t}function KT(e,t,n,r){if(r.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(n==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const s=XT(r),o=YT(n),i=t||(typeof r.start_timestamp=="number"?r.start_timestamp*1e3:he()*1e3),a=typeof r.timestamp=="number"?r.timestamp*1e3:he()*1e3;return{event_id:e,timestamp:new Date(i).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||xs,runtime:{name:"javascript",version:D.navigator.userAgent},os:{name:vf,version:wf,build_number:ai},device:{locale:qT,model:If,manufacturer:ai,architecture:Tf,is_emulator:!1},debug_meta:{images:eI(n.resources)},profile:o,transactions:[{name:r.transaction||"",id:r.event_id||xe(),trace_id:s,active_thread_id:Qr,relative_start_ns:"0",relative_end_ns:((a-i)*1e6).toFixed(0)}]}}function kf(e){return q(e).op==="pageload"}function JT(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[Qr]:{name:jT}}},s=e.samples[0];if(!s)return r;const o=s.timestamp,i=Te(),a=typeof performance.timeOrigin=="number"?performance.timeOrigin:i||0,c=a-(i||a);return e.samples.forEach((u,d)=>{if(u.stackId===void 0){t===void 0&&(t=n,r.stacks[t]=[],n++),r.samples[d]={elapsed_since_start_ns:((u.timestamp+c-o)*hu).toFixed(0),stack_id:t,thread_id:Qr};return}let l=e.stacks[u.stackId];const f=[];for(;l;){f.push(l.frameId);const h=e.frames[l.frameId];h&&r.frames[l.frameId]===void 0&&(r.frames[l.frameId]={function:h.name,abs_path:typeof h.resourceId=="number"?e.resources[h.resourceId]:void 0,lineno:h.line,colno:h.column}),l=l.parentId===void 0?void 0:e.stacks[l.parentId]}const p={elapsed_since_start_ns:((u.timestamp+c-o)*hu).toFixed(0),stack_id:n,thread_id:Qr};r.stacks[n]=f,r.samples[d]=p,n++}),r}function ZT(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n]);return e}function QT(e){const t=[];return zt(e,(n,r)=>{if(r==="transaction")for(let s=1;s<n.length;s++)n[s]?.contexts?.profile?.profile_id&&t.push(n[s])}),t}function eI(e){const r=A()?.getOptions()?.stackParser;return r?fh(r,e):[]}function tI(e){return typeof e!="number"&&typeof e!="boolean"||typeof e=="number"&&isNaN(e)?(Y&&_.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e===!0||e===!1?!0:e<0||e>1?(Y&&_.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function nI(e){return e.samples.length<2?(Y&&_.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):e.frames.length?!0:(Y&&_.log("[Profiling] Discarding profile because it contains no frames"),!1)}let Cf=!1;const Rf=3e4;function rI(e){return typeof e=="function"}function sI(){const e=D.Profiler;if(!rI(e)){Y&&_.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}const t=10,n=Math.floor(Rf/t);try{return new e({sampleInterval:t,maxBufferSize:n})}catch{Y&&(_.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),_.log("[Profiling] Disabling profiling for current user session.")),Cf=!0}}function gu(e){if(Cf)return Y&&_.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return Y&&_.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const n=A()?.getOptions();if(!n)return Y&&_.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;return tI(r)?r?(r===!0?!0:Math.random()<r)?!0:(Y&&_.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1):(Y&&_.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(Y&&_.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}function oI(e,t,n,r){return nI(n)?KT(e,t,n,r):null}const Ft=new Map;function iI(){return Ft.size}function aI(e){const t=Ft.get(e);return t&&Ft.delete(e),t}function cI(e,t){if(Ft.set(e,t),Ft.size>30){const n=Ft.keys().next().value;Ft.delete(n)}}function _u(e){let t;kf(e)&&(t=he()*1e3);const n=sI();if(!n)return;Y&&_.log(`[Profiling] started profiling span: ${q(e).description}`);const r=xe();X().setContext("profile",{profile_id:r,start_timestamp:t});async function s(){if(e&&n)return n.stop().then(c=>{if(o&&(D.clearTimeout(o),o=void 0),Y&&_.log(`[Profiling] stopped profiling of span: ${q(e).description}`),!c){Y&&_.log(`[Profiling] profiler returned null profile for: ${q(e).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started");return}cI(r,c)}).catch(c=>{Y&&_.log("[Profiling] error while stopping profiler:",c)})}let o=D.setTimeout(()=>{Y&&_.log("[Profiling] max profile duration elapsed, stopping profiling for:",q(e).description),s()},Rf);const i=e.end.bind(e);function a(){return e?(s().then(()=>{i()},()=>{i()}),e):i()}e.end=a}const uI="BrowserProfiling",lI=(()=>({name:uI,setup(e){const t=Ee(),n=t&&Se(t);n&&kf(n)&&gu(n)&&_u(n),e.on("spanStart",r=>{r===Se(r)&&gu(r)&&_u(r)}),e.on("beforeEnvelope",r=>{if(!iI())return;const s=QT(r);if(!s.length)return;const o=[];for(const i of s){const a=i?.contexts,c=a?.profile?.profile_id,u=a?.profile?.start_timestamp;if(typeof c!="string"){Y&&_.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!c){Y&&_.log("[Profiling] cannot find profile for a span without a profile context");continue}a?.profile&&delete a.profile;const d=aI(c);if(!d){Y&&_.log(`[Profiling] Could not retrieve profile for span: ${c}`);continue}const l=oI(c,u,d,i);l&&o.push(l)}ZT(r,o)})}})),d1=lI,dI="SpotlightBrowser",fI=((e={})=>{const t=e.sidecarUrl||"http://localhost:8969/stream";return{name:dI,setup:()=>{Y&&_.log("Using Sidecar URL",t)},processEvent:n=>hI(n)?null:n,afterAllSetup:n=>{pI(n,t)}}});function pI(e,t){const n=Wi("fetch");let r=0;e.on("beforeEnvelope",s=>{if(r>3){_.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:",r);return}n(t,{method:"POST",body:is(s),headers:{"Content-Type":"application/x-sentry-envelope"},mode:"cors"}).then(o=>{o.status>=200&&o.status<400&&(r=0)},o=>{r++,_.error("Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/",o)})})}const f1=fI;function hI(e){return!!(e.type==="transaction"&&e.spans&&e.contexts?.trace&&e.contexts.trace.op==="ui.action.click"&&e.spans.some(({description:t})=>t?.includes("#sentry-spotlight")))}const p1=()=>({name:"LaunchDarkly",processEvent(e,t,n){return ar(e)}});function h1(){return{name:"sentry-flag-auditor",type:"flag-used",synchronous:!0,method:(e,t,n)=>{_n(e,t.value),yn(e,t.value)}}}const m1=()=>({name:"OpenFeature",processEvent(e,t,n){return ar(e)}});class g1{after(t,n){_n(n.flagKey,n.value),yn(n.flagKey,n.value)}error(t,n,r){_n(t.flagKey,t.defaultValue),yn(t.flagKey,t.defaultValue)}}const _1=({featureFlagClientClass:e})=>({name:"Unleash",setupOnce(){const t=e.prototype;Re(t,"isEnabled",mI)},processEvent(t,n,r){return ar(t)}});function mI(e){return function(...t){const n=t[0],r=e.apply(this,t);return typeof n=="string"&&typeof r=="boolean"?(_n(n,r),yn(n,r)):Y&&_.error(`[Feature Flags] UnleashClient.isEnabled does not match expected signature. arg0: ${n} (${typeof n}), result: ${r} (${typeof r})`),r}}const y1=({featureFlagClient:e})=>({name:"Statsig",setup(t){e.on("gate_evaluation",n=>{_n(n.gate.name,n.gate.value),yn(n.gate.name,n.gate.value)})},processEvent(t,n,r){return ar(t)}});async function S1(){const e=A();if(!e)return"no-client-active";if(!e.getDsn())return"no-dsn-configured";try{await fetch("https://o447951.ingest.sentry.io/api/4509632503087104/envelope/?sentry_version=7&sentry_key=c1dfb07d783ad5325c245c1fd3725390&sentry_client=sentry.javascript.browser%2F1.33.7",{body:"{}",method:"POST",mode:"cors",credentials:"omit"})}catch{return"sentry-unreachable"}}const gI="WebWorker",b1=({worker:e})=>({name:gI,setupOnce:()=>{(Array.isArray(e)?e:[e]).forEach(t=>yu(t))},addWorker:t=>yu(t)});function yu(e){e.addEventListener("message",t=>{_I(t.data)&&(t.stopImmediatePropagation(),Y&&_.log("Sentry debugId web worker message received",t.data),D._sentryDebugIds={...t.data._sentryDebugIds,...D._sentryDebugIds})})}function E1({self:e}){e.postMessage({_sentryMessage:!0,_sentryDebugIds:e._sentryDebugIds??void 0})}function _I(e){return ot(e)&&e._sentryMessage===!0&&"_sentryDebugIds"in e&&(ot(e._sentryDebugIds)||e._sentryDebugIds===void 0)}export{ky as BrowserClient,g1 as OpenFeatureIntegrationHook,Et as SDK_VERSION,He as SEMANTIC_ATTRIBUTE_SENTRY_OP,le as SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,hi as SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,Fe as SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,Qe as Scope,D as WINDOW,lt as addBreadcrumb,kh as addEventProcessor,Fa as addIntegration,hb as breadcrumbsIntegration,Ib as browserApiErrorsIntegration,d1 as browserProfilingIntegration,Ab as browserSessionIntegration,u1 as browserTracingIntegration,h1 as buildLaunchDarklyFlagUsedHandler,DI as captureConsoleIntegration,Os as captureEvent,gn as captureException,Ag as captureFeedback,No as captureMessage,La as captureSession,ZS as chromeStackLineParser,AI as close,WI as consoleLoggingIntegration,r1 as contextLinesIntegration,vI as continueTrace,em as createTransport,KI as createUserFeedbackEnvelope,$m as dedupeIntegration,yf as defaultRequestInstrumentationOptions,ub as defaultStackLineParsers,lb as defaultStackParser,S1 as diagnoseSdkConnectivity,ol as endSession,bm as eventFiltersIntegration,by as eventFromException,Ey as eventFromMessage,Di as exceptionFromError,PI as extraErrorDataIntegration,UI as featureFlagsIntegration,jI as feedbackAsyncIntegration,qI as feedbackIntegration,qI as feedbackSyncIntegration,MI as flush,ZI as forceLoad,_m as functionToStringIntegration,nb as geckoStackLineParser,Ee as getActiveSpan,A as getClient,X as getCurrentScope,Yb as getDefaultIntegrations,zI as getFeedback,pi as getGlobalScope,be as getIsolationScope,a1 as getReplay,Se as getRootSpan,$r as getSpanDescendants,fp as getSpanStatusFromHttpCode,El as getTraceData,Lb as globalHandlersIntegration,s1 as graphqlClientIntegration,n1 as httpClientIntegration,Hb as httpContextIntegration,Em as inboundFiltersIntegration,JI as init,yT as instrumentOutgoingRequests,cg as instrumentSupabaseClient,Ih as isEnabled,OI as isInitialized,Th as lastEventId,p1 as launchDarklyIntegration,iy as lazyLoadIntegration,qb as linkedErrorsIntegration,GI as logger,l1 as makeBrowserOfflineTransport,pd as makeFetchTransport,NI as makeMultiplexedTransport,LI as moduleMetadataIntegration,QI as onLoad,m1 as openFeatureIntegration,YI as opera10StackLineParser,XI as opera11StackLineParser,am as parameterize,Ip as registerSpanErrorInstrumentation,E1 as registerWebWorker,c1 as replayCanvasIntegration,i1 as replayIntegration,t1 as reportingObserverIntegration,FI as rewriteFramesIntegration,l_ as sendFeedback,wh as setContext,Xh as setCurrentClient,kI as setExtra,II as setExtras,rs as setHttpStatus,Xp as setMeasurement,RI as setTag,CI as setTags,xI as setUser,e1 as showReportDialog,bI as spanToBaggageHeader,q as spanToJSON,Ep as spanToTraceHeader,f1 as spotlightBrowserIntegration,DT as startBrowserTracingNavigationSpan,LT as startBrowserTracingPageLoadSpan,On as startInactiveSpan,TI as startNewTrace,Na as startSession,Ei as startSpan,EI as startSpanManual,y1 as statsigIntegration,$I as supabaseIntegration,wI as suppressTracing,HI as thirdPartyErrorFilterIntegration,_1 as unleashIntegration,SI as updateSpanName,b1 as webWorkerIntegration,VI as winjsStackLineParser,As as withActiveSpan,yI as withIsolationScope,Ve as withScope,BI as zodErrorsIntegration};
