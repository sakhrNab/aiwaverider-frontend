import{r as o,j as e,c0 as A,bX as k,as as F,bt as I,c1 as L,c2 as R,y as b}from"./index-CDuOHj3I.js";import{A as P}from"./AdminLayout-B2_HOb6I.js";import{H as D,g as W,u as Y,h as w,s as H,a as G}from"./emailService-BhUQ5SQa.js";import{R as x}from"./RichTextEditor-DhDbze3n.js";import"./MenuBar-Np-EM3wI.js";import"./purify.es-DxJI3Wx7.js";const J=()=>{const[l,E]=o.useState("welcome"),[n,r]=o.useState(!1),[t,S]=o.useState(""),[d,N]=o.useState({subject:"Welcome to AI Waverider!",content:"Thank you for joining our platform. We're excited to have you on board!"}),[c,f]=o.useState({subject:"New Updates Available",content:"We've made some exciting new updates to our platform.",updateType:"feature"}),[m,T]=o.useState({subject:"New AI Agents Available",content:"<p>We're excited to announce new AI agents on our platform!</p><ul><li><strong>Agent 1</strong>: Description of the first agent</li><li><strong>Agent 2</strong>: Description of the second agent</li></ul>"}),[u,y]=o.useState({subject:"New AI Tools Released",content:"<p>Check out our latest AI tools that have just been released:</p><ul><li><strong>Tool 1</strong>: Description of the first tool</li><li><strong>Tool 2</strong>: Description of the second tool</li></ul>"}),[h,C]=o.useState({subject:"Important Announcement",content:"We have an important announcement to share with all our users."}),[i,g]=o.useState({subject:"",content:"",recipients:"",recipientType:"all"}),p=a=>{E(a)},j=async a=>{if(!t||!t.trim()){b.error("Please enter a valid email address for testing");return}r(!0);try{let s={email:t};switch(a){case"welcome":s={email:t,firstName:"Test",lastName:"User",subject:d.subject,content:d.content};break;case"update":s={email:t,firstName:"Test",lastName:"User",subject:c.subject,content:c.content,updateType:c.updateType};break;case"agent":s={email:t,firstName:"Test",lastName:"User",subject:m.subject,content:m.content};break;case"tool":s={email:t,firstName:"Test",lastName:"User",subject:u.subject,content:u.content};break;case"global":s={email:t,firstName:"Test",lastName:"User",subject:h.subject,content:h.content};break;case"custom":s={email:t,subject:i.subject,content:i.content};break}const M=await H(t,a,s);b.success(`Test email sent successfully to ${t}`)}catch(s){w(s,"Failed to send test email")}finally{r(!1)}},v=async a=>{r(!0);try{let s={};switch(a){case"welcome":s=d;break;case"update":s=c;break;case"agent":s=m;break;case"tool":s=u;break;case"global":s=h;break;default:throw new Error("Invalid template type")}await Y(a,s),b.success(`${a.charAt(0).toUpperCase()+a.slice(1)} email template saved successfully`)}catch(s){w(s,"Failed to save template")}finally{r(!1)}},U=async()=>{if(!i.subject||!i.content){b.error("Please provide both subject and content for your email");return}r(!0);try{const a=await G(i);a.data&&a.data.recipientCount?b.success(`Emails scheduled to be sent to ${a.data.recipientCount} users`):b.success("Emails scheduled successfully"),g({subject:"",content:"",recipients:"",recipientType:"all"})}catch(a){w(a,"Failed to send emails")}finally{r(!1)}};return o.useEffect(()=>{(async()=>{if(!(!l||l==="custom")){r(!0);try{const s=await W(l);if(s.success&&s.data)switch(l){case"welcome":N(s.data);break;case"update":f(s.data);break;case"agent":T(s.data);break;case"tool":y(s.data);break;case"global":C(s.data);break}}catch(s){console.error(`Error loading ${l} template:`,s)}finally{r(!1)}}})()},[l]),e.jsx(P,{children:e.jsxs("div",{className:"email-management",children:[e.jsx("h1",{children:"Email Management"}),n&&e.jsxs("div",{className:"loading-container",children:[e.jsx(D,{color:"#4FD1C5",size:50}),e.jsx("p",{children:"Processing your request..."})]}),e.jsxs("div",{className:"email-test-section",children:[e.jsx("h2",{children:"Test Email Address"}),e.jsx("div",{className:"email-input-container",children:e.jsx("input",{type:"email",placeholder:"Enter email for testing",value:t,onChange:a=>S(a.target.value),"aria-label":"Test email address"})})]}),e.jsxs("div",{className:"email-tabs",role:"tablist",children:[e.jsxs("button",{className:l==="welcome"?"active":"",onClick:()=>p("welcome"),role:"tab","aria-selected":l==="welcome","aria-controls":"welcome-panel",children:[e.jsx(A,{})," Welcome Emails"]}),e.jsxs("button",{className:l==="update"?"active":"",onClick:()=>p("update"),role:"tab","aria-selected":l==="update","aria-controls":"update-panel",children:[e.jsx(k,{})," Update Notifications"]}),e.jsxs("button",{className:l==="agent"?"active":"",onClick:()=>p("agent"),role:"tab","aria-selected":l==="agent","aria-controls":"agent-panel",children:[e.jsx(F,{})," AI Agents"]}),e.jsxs("button",{className:l==="tool"?"active":"",onClick:()=>p("tool"),role:"tab","aria-selected":l==="tool","aria-controls":"tool-panel",children:[e.jsx(I,{})," AI Tools"]}),e.jsxs("button",{className:l==="global"?"active":"",onClick:()=>p("global"),role:"tab","aria-selected":l==="global","aria-controls":"global-panel",children:[e.jsx(L,{})," Global Announcements"]}),e.jsxs("button",{className:l==="custom"?"active":"",onClick:()=>p("custom"),role:"tab","aria-selected":l==="custom","aria-controls":"custom-panel",children:[e.jsx(R,{})," Custom Emails"]})]}),e.jsxs("div",{className:"email-content",children:[l==="welcome"&&e.jsxs("div",{className:"email-template-form",id:"welcome-panel",role:"tabpanel","aria-labelledby":"welcome-tab",children:[e.jsx("h2",{children:"Welcome Email Template"}),e.jsx("p",{className:"template-description",children:"This email is sent to users when they first register for an account."}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"welcome-subject",children:"Subject Line"}),e.jsx("input",{id:"welcome-subject",type:"text",value:d.subject,onChange:a=>N({...d,subject:a.target.value}),placeholder:"Email subject line"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email Content"}),e.jsx(x,{content:d.content,onChange:a=>N({...d,content:a})})]}),e.jsxs("div",{className:"template-placeholders",children:[e.jsx("h3",{children:"Available Placeholders:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("code",{children:"{{firstName}}"})," - User's first name"]}),e.jsxs("li",{children:[e.jsx("code",{children:"{{lastName}}"})," - User's last name"]}),e.jsxs("li",{children:[e.jsx("code",{children:"{{email}}"})," - User's email address"]}),e.jsxs("li",{children:[e.jsx("code",{children:"{{websiteUrl}}"})," - Your website URL"]})]})]}),e.jsxs("div",{className:"email-actions",children:[e.jsx("button",{className:"save-button",onClick:()=>v("welcome"),disabled:n,"aria-label":"Save welcome email template",children:"Save Template"}),e.jsx("button",{className:"test-button",onClick:()=>j("welcome"),disabled:n||!t,"aria-label":"Send test welcome email",children:"Send Test Email"})]})]}),l==="update"&&e.jsxs("div",{className:"email-template-form",id:"update-panel",role:"tabpanel","aria-labelledby":"update-tab",children:[e.jsx("h2",{children:"Update Notification Template"}),e.jsx("p",{className:"template-description",children:"This email is sent to notify users about new features, updates, or changes to the platform."}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"update-subject",children:"Subject Line"}),e.jsx("input",{id:"update-subject",type:"text",value:c.subject,onChange:a=>f({...c,subject:a.target.value}),placeholder:"Email subject line"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email Content"}),e.jsx(x,{content:c.content,onChange:a=>f({...c,content:a})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"update-type",children:"Update Type"}),e.jsxs("select",{id:"update-type",value:c.updateType,onChange:a=>f({...c,updateType:a.target.value}),children:[e.jsx("option",{value:"feature",children:"New Feature"}),e.jsx("option",{value:"improvement",children:"Improvement"}),e.jsx("option",{value:"bugfix",children:"Bug Fix"}),e.jsx("option",{value:"security",children:"Security Update"}),e.jsx("option",{value:"announcement",children:"General Announcement"})]})]}),e.jsxs("div",{className:"template-placeholders",children:[e.jsx("h3",{children:"Available Placeholders:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("code",{children:"{{firstName}}"})," - User's first name"]}),e.jsxs("li",{children:[e.jsx("code",{children:"{{lastName}}"})," - User's last name"]}),e.jsxs("li",{children:[e.jsx("code",{children:"{{updateType}}"})," - Type of update"]}),e.jsxs("li",{children:[e.jsx("code",{children:"{{websiteUrl}}"})," - Your website URL"]})]})]}),e.jsxs("div",{className:"email-actions",children:[e.jsx("button",{className:"save-button",onClick:()=>v("update"),disabled:n,"aria-label":"Save update notification template",children:"Save Template"}),e.jsx("button",{className:"test-button",onClick:()=>j("update"),disabled:n||!t,"aria-label":"Send test update notification",children:"Send Test Email"})]})]}),l==="agent"&&e.jsxs("div",{className:"email-template-form",id:"agent-panel",role:"tabpanel","aria-labelledby":"agent-tab",children:[e.jsx("h2",{children:"AI Agent Updates Template"}),e.jsx("p",{className:"template-description",children:"This email is sent to notify users about new AI Agents available on the platform."}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"agent-subject",children:"Subject Line"}),e.jsx("input",{id:"agent-subject",type:"text",value:m.subject,onChange:a=>T({...m,subject:a.target.value}),placeholder:"Email subject line"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email Content"}),e.jsx(x,{content:m.content,onChange:a=>T({...m,content:a})})]}),e.jsxs("div",{className:"template-placeholders",children:[e.jsx("h3",{children:"Available Placeholders:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("code",{children:"{{firstName}}"})," - User's first name"]}),e.jsxs("li",{children:[e.jsx("code",{children:"{{lastName}}"})," - User's last name"]}),e.jsxs("li",{children:[e.jsx("code",{children:"{{websiteUrl}}"})," - Your website URL"]}),e.jsxs("li",{children:[e.jsx("code",{children:"{{agentHtml}}"})," - Dynamic HTML content for agents"]})]})]}),e.jsxs("div",{className:"email-actions",children:[e.jsx("button",{className:"save-button",onClick:()=>v("agent"),disabled:n,"aria-label":"Save AI agent template",children:"Save Template"}),e.jsx("button",{className:"test-button",onClick:()=>j("agent"),disabled:n||!t,"aria-label":"Send test AI agent email",children:"Send Test Email"})]})]}),l==="tool"&&e.jsxs("div",{className:"email-template-form",id:"tool-panel",role:"tabpanel","aria-labelledby":"tool-tab",children:[e.jsx("h2",{children:"AI Tools Updates Template"}),e.jsx("p",{className:"template-description",children:"This email is sent to notify users about new AI Tools available on the platform."}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"tool-subject",children:"Subject Line"}),e.jsx("input",{id:"tool-subject",type:"text",value:u.subject,onChange:a=>y({...u,subject:a.target.value}),placeholder:"Email subject line"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email Content"}),e.jsx(x,{content:u.content,onChange:a=>y({...u,content:a})})]}),e.jsxs("div",{className:"template-placeholders",children:[e.jsx("h3",{children:"Available Placeholders:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("code",{children:"{{firstName}}"})," - User's first name"]}),e.jsxs("li",{children:[e.jsx("code",{children:"{{lastName}}"})," - User's last name"]}),e.jsxs("li",{children:[e.jsx("code",{children:"{{websiteUrl}}"})," - Your website URL"]}),e.jsxs("li",{children:[e.jsx("code",{children:"{{toolHtml}}"})," - Dynamic HTML content for tools"]})]})]}),e.jsxs("div",{className:"email-actions",children:[e.jsx("button",{className:"save-button",onClick:()=>v("tool"),disabled:n,"aria-label":"Save AI tool template",children:"Save Template"}),e.jsx("button",{className:"test-button",onClick:()=>j("tool"),disabled:n||!t,"aria-label":"Send test AI tool email",children:"Send Test Email"})]})]}),l==="global"&&e.jsxs("div",{className:"email-template-form",id:"global-panel",role:"tabpanel","aria-labelledby":"global-tab",children:[e.jsx("h2",{children:"Global Announcement Template"}),e.jsx("p",{className:"template-description",children:"This email is sent as a global announcement to all users."}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"global-subject",children:"Subject Line"}),e.jsx("input",{id:"global-subject",type:"text",value:h.subject,onChange:a=>C({...h,subject:a.target.value}),placeholder:"Email subject line"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email Content"}),e.jsx(x,{content:h.content,onChange:a=>C({...h,content:a})})]}),e.jsxs("div",{className:"template-placeholders",children:[e.jsx("h3",{children:"Available Placeholders:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("code",{children:"{{firstName}}"})," - User's first name"]}),e.jsxs("li",{children:[e.jsx("code",{children:"{{lastName}}"})," - User's last name"]}),e.jsxs("li",{children:[e.jsx("code",{children:"{{websiteUrl}}"})," - Your website URL"]}),e.jsxs("li",{children:[e.jsx("code",{children:"{{supportEmail}}"})," - Your support email"]})]})]}),e.jsxs("div",{className:"email-actions",children:[e.jsx("button",{className:"save-button",onClick:()=>v("global"),disabled:n,"aria-label":"Save global announcement template",children:"Save Template"}),e.jsx("button",{className:"test-button",onClick:()=>j("global"),disabled:n||!t,"aria-label":"Send test global announcement",children:"Send Test Email"})]})]}),l==="custom"&&e.jsxs("div",{className:"email-template-form",id:"custom-panel",role:"tabpanel","aria-labelledby":"custom-tab",children:[e.jsx("h2",{children:"Custom Email Campaign"}),e.jsx("p",{className:"template-description",children:"Send a custom email to specific users or user groups."}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"custom-subject",children:"Subject Line"}),e.jsx("input",{id:"custom-subject",type:"text",value:i.subject,onChange:a=>g({...i,subject:a.target.value}),placeholder:"Email subject line"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email Content"}),e.jsx(x,{content:i.content,onChange:a=>g({...i,content:a})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"recipient-type",children:"Recipient Type"}),e.jsxs("select",{id:"recipient-type",value:i.recipientType,onChange:a=>g({...i,recipientType:a.target.value}),children:[e.jsx("option",{value:"all",children:"All Users"}),e.jsx("option",{value:"premium",children:"Premium Users Only"}),e.jsx("option",{value:"free",children:"Free Users Only"}),e.jsx("option",{value:"specific",children:"Specific Emails"})]})]}),i.recipientType==="specific"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"recipient-emails",children:"Recipient Emails (comma separated)"}),e.jsx("textarea",{id:"recipient-emails",value:i.recipients,onChange:a=>g({...i,recipients:a.target.value}),placeholder:"email1@example.com, email2@example.com",rows:3})]}),e.jsxs("div",{className:"template-placeholders",children:[e.jsx("h3",{children:"Available Placeholders:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("code",{children:"{{firstName}}"})," - User's first name"]}),e.jsxs("li",{children:[e.jsx("code",{children:"{{lastName}}"})," - User's last name"]}),e.jsxs("li",{children:[e.jsx("code",{children:"{{email}}"})," - User's email address"]}),e.jsxs("li",{children:[e.jsx("code",{children:"{{websiteUrl}}"})," - Your website URL"]})]})]}),e.jsxs("div",{className:"email-actions",children:[e.jsx("button",{className:"send-button",onClick:U,disabled:n||!i.subject||!i.content,"aria-label":"Send custom email campaign",children:"Send Email Campaign"}),e.jsx("button",{className:"test-button",onClick:()=>j("custom"),disabled:n||!t||!i.subject||!i.content,"aria-label":"Send test custom email",children:"Send Test Email"})]})]})]})]})})};export{J as default};
