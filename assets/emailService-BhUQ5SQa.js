import{a$ as J,g as W,y as M}from"./index-CDuOHj3I.js";var h={},x={},P;function G(){if(P)return x;P=1,Object.defineProperty(x,"__esModule",{value:!0}),x.calculateRgba=void 0;var r;(function(e){e.maroon="#800000",e.red="#FF0000",e.orange="#FFA500",e.yellow="#FFFF00",e.olive="#808000",e.green="#008000",e.purple="#800080",e.fuchsia="#FF00FF",e.lime="#00FF00",e.teal="#008080",e.aqua="#00FFFF",e.blue="#0000FF",e.navy="#000080",e.black="#000000",e.gray="#808080",e.silver="#C0C0C0",e.white="#FFFFFF"})(r||(r={}));var o=function(e,t){if(e.includes("/"))return e.replace("rgb(","rgba(");var a=e.substring(e.startsWith("rgba(")?5:4,e.length-1).trim(),s=a.split(",");return s.length===4?e.replace("rgb(","rgba("):s.length===3?"rgba(".concat(a,", ").concat(t,")"):"rgba(".concat(a," / ").concat(t,")")},c=function(e,t){if(e.startsWith("rgb"))return o(e,t);if(Object.keys(r).includes(e)&&(e=r[e]),e[0]==="#"&&(e=e.slice(1)),e.length===3){var a="";e.split("").forEach(function(f){a+=f,a+=f}),e=a}var s=(e.match(/.{2}/g)||[]).map(function(f){return parseInt(f,16)}).join(", ");return"rgba(".concat(s,", ").concat(t,")")};return x.calculateRgba=c,x}var E={},I;function K(){if(I)return E;I=1,Object.defineProperty(E,"__esModule",{value:!0}),E.parseLengthAndUnit=o,E.cssValue=c;var r={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function o(e){if(typeof e=="number")return{value:e,unit:"px"};var t,a=(e.match(/^[0-9.]*/)||"").toString();a.includes(".")?t=parseFloat(a):t=parseInt(a,10);var s=(e.match(/[^0-9]*$/)||"").toString();return r[s]?{value:t,unit:s}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}function c(e){var t=o(e);return"".concat(t.value).concat(t.unit)}return E}var F={},S;function Q(){if(S)return F;S=1,Object.defineProperty(F,"__esModule",{value:!0}),F.createAnimation=void 0;var r=function(o,c,e){var t="react-spinners-".concat(o,"-").concat(e);if(typeof window>"u"||!window.document)return t;var a=document.createElement("style");document.head.appendChild(a);var s=a.sheet,f=`
    @keyframes `.concat(t,` {
      `).concat(c,`
    }
  `);return s&&s.insertRule(f,0),t};return F.createAnimation=r,F}var R;function X(){if(R)return h;R=1;var r=h&&h.__assign||function(){return r=Object.assign||function(n){for(var u,p=1,l=arguments.length;p<l;p++){u=arguments[p];for(var i in u)Object.prototype.hasOwnProperty.call(u,i)&&(n[i]=u[i])}return n},r.apply(this,arguments)},o=h&&h.__createBinding||(Object.create?(function(n,u,p,l){l===void 0&&(l=p);var i=Object.getOwnPropertyDescriptor(u,p);(!i||("get"in i?!u.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return u[p]}}),Object.defineProperty(n,l,i)}):(function(n,u,p,l){l===void 0&&(l=p),n[l]=u[p]})),c=h&&h.__setModuleDefault||(Object.create?(function(n,u){Object.defineProperty(n,"default",{enumerable:!0,value:u})}):function(n,u){n.default=u}),e=h&&h.__importStar||function(n){if(n&&n.__esModule)return n;var u={};if(n!=null)for(var p in n)p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)&&o(u,n,p);return c(u,n),u},t=h&&h.__rest||function(n,u){var p={};for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&u.indexOf(l)<0&&(p[l]=n[l]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,l=Object.getOwnPropertySymbols(n);i<l.length;i++)u.indexOf(l[i])<0&&Object.prototype.propertyIsEnumerable.call(n,l[i])&&(p[l[i]]=n[l[i]]);return p};Object.defineProperty(h,"__esModule",{value:!0});var a=e(J()),s=G(),f=K(),j=Q();function U(n){var u=n.loading,p=u===void 0?!0:u,l=n.color,i=l===void 0?"#000000":l,_=n.speedMultiplier,q=_===void 0?1:_,O=n.cssOverride,L=O===void 0?{}:O,T=n.size,b=T===void 0?50:T,H=t(n,["loading","color","speedMultiplier","cssOverride","size"]),A=(0,f.parseLengthAndUnit)(b),y=A.value,$=A.unit,N=r({display:"inherit",position:"relative",width:(0,f.cssValue)(b),height:(0,f.cssValue)(b),transform:"rotate(165deg)"},L),w=y/5,g=(y-w)/2,d=g-w,v=(0,s.calculateRgba)(i,.75),V=(0,j.createAnimation)("HashLoader","0% {width: ".concat(w,"px; box-shadow: ").concat(g,"px ").concat(-d,"px ").concat(v,", ").concat(-g,"px ").concat(d,"px ").concat(v,`}
    35% {width: `).concat((0,f.cssValue)(b),"; box-shadow: 0 ").concat(-d,"px ").concat(v,", 0 ").concat(d,"px ").concat(v,`}
    70% {width: `).concat(w,"px; box-shadow: ").concat(-g,"px ").concat(-d,"px ").concat(v,", ").concat(g,"px ").concat(d,"px ").concat(v,`}
    100% {box-shadow: `).concat(g,"px ").concat(-d,"px ").concat(v,", ").concat(-g,"px ").concat(d,"px ").concat(v,"}"),"before"),C=(0,j.createAnimation)("HashLoader","0% {height: ".concat(w,"px; box-shadow: ").concat(d,"px ").concat(g,"px ").concat(i,", ").concat(-d,"px ").concat(-g,"px ").concat(i,`}
    35% {height: `).concat((0,f.cssValue)(b),"; box-shadow: ").concat(d,"px 0 ").concat(i,", ").concat(-d,"px 0 ").concat(i,`}
    70% {height: `).concat(w,"px; box-shadow: ").concat(d,"px ").concat(-g,"px ").concat(i,", ").concat(-d,"px ").concat(g,"px ").concat(i,`}
    100% {box-shadow: `).concat(d,"px ").concat(g,"px ").concat(i,", ").concat(-d,"px ").concat(-g,"px ").concat(i,"}"),"after"),k=function(z){return{position:"absolute",top:"50%",left:"50%",display:"block",width:"".concat(y/5).concat($),height:"".concat(y/5).concat($),borderRadius:"".concat(y/10).concat($),transform:"translate(-50%, -50%)",animationFillMode:"none",animation:"".concat(z===1?V:C," ").concat(2/q,"s infinite")}};return p?a.createElement("span",r({style:N},H),a.createElement("span",{style:k(1)}),a.createElement("span",{style:k(2)})):null}return h.default=U,h}var Y=X();const B=W(Y),m="https://api.aiwaverider.com",D=async(r,o="",c={})=>{try{const e=localStorage.getItem("authToken");if(!e)throw new Error("Authentication token not found");let t=`${m}/api/email/test`;switch(o){case"welcome":t=`${m}/api/email/test-welcome`;break;case"update":t=`${m}/api/email/test-update`;break;case"global":t=`${m}/api/email/test-global`;break;case"agent":t=`${m}/api/email/test-agent`;break;case"send-agent-update":t=`${m}/api/email/test-agent-update`;break;case"tool":t=`${m}/api/email/test-tool`;break;case"custom":t=`${m}/api/email/test-custom`;break;default:console.warn(`Unknown email type: ${o}. Using default test endpoint.`)}const a={email:r,...c};try{const s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(a)});if(!s.ok){const f=await s.json().catch(()=>({}));throw new Error(f.message||`Failed to send test email: ${s.status} ${s.statusText}`)}return await s.json()}catch(s){throw s.message.includes("Failed to fetch")||s.message.includes("NetworkError")?new Error(`API endpoint not available: ${t}. Ensure the backend supports this email type.`):s}}catch(e){throw console.error(`Test ${o} email error:`,e),e}},ee=async r=>{try{const o=localStorage.getItem("authToken");if(!o)throw new Error("Authentication token not found");let c=`${m}/api/email/send-custom`,e={...r};if(r.emailType==="agent"){if(c=`${m}/api/email/send-agent-update`,!r.title||!r.content||!r.updateType)throw new Error("Title, content, and update type are required for agent updates");if(r.subject&&!r.title&&(e.title=r.subject),r.recipients&&e.recipientType==="specific"){if(r.userIds)e.userIds=r.userIds;else if(r.recipients&&typeof r.recipients=="string"){if(r.recipientUsersData&&Array.isArray(r.recipientUsersData))e.userIds=r.recipientUsersData.filter(t=>t&&t.id).map(t=>t.id);else if(e.emailAddresses=r.recipients.split(",").filter(Boolean),delete e.recipients,e.emailAddresses.length===0)throw new Error("No valid email addresses provided")}}}else if(r.emailType==="tool"){if(c=`${m}/api/email/send-tool-update`,!r.title||!r.content||!r.updateType)throw new Error("Title, content, and update type are required for tool updates");r.subject&&!r.title&&(e.title=r.subject)}else r.emailType&&console.warn(`Using default endpoint for email type: ${r.emailType}`);try{const t=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(e)});if(!t.ok){const a=await t.json().catch(()=>({}));throw console.error("API Error Response:",a),t.status===404?new Error(`Endpoint not found: ${c}. Check if the API route is configured correctly.`):new Error(a.message||`Failed to send email (${t.status}): ${t.statusText}`)}return await t.json()}catch(t){throw t.message.includes("Failed to fetch")||t.message.includes("NetworkError")?new Error(`API endpoint not available: ${c}. Ensure the backend supports this email type.`):t}}catch(o){throw console.error("Custom email error:",o),M.error(`Email sending failed: ${o.message}`),o}},te=async r=>{try{const o=localStorage.getItem("authToken");if(!o)throw new Error("Authentication token not found");if(!["welcome","update","agent","tool","global","custom"].includes(r))throw new Error(`Invalid template type: ${r}`);const e=`${m}/api/email/templates/${r}`;try{const t=await fetch(e,{method:"GET",headers:{Authorization:`Bearer ${o}`}});if(!t.ok){const a=await t.json().catch(()=>({}));throw new Error(a.message||"Failed to get email template")}return await t.json()}catch(t){throw t.message.includes("Failed to fetch")||t.message.includes("NetworkError")?new Error(`API endpoint not available: ${e}. Ensure the backend supports this template type.`):t}}catch(o){throw console.error("Template fetch error:",o),o}},re=async(r,o)=>{try{const c=localStorage.getItem("authToken");if(!c)throw new Error("Authentication token not found");if(!["welcome","update","agent","tool","global","custom"].includes(r))throw new Error(`Invalid template type: ${r}`);if(!o.subject||!o.content)throw new Error("Template must include subject and content");const t=`${m}/api/email/templates/${r}`;try{const a=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify(o)});if(!a.ok){const s=await a.json().catch(()=>({}));throw new Error(s.message||"Failed to update email template")}return await a.json()}catch(a){throw a.message.includes("Failed to fetch")||a.message.includes("NetworkError")?new Error(`API endpoint not available: ${t}. Ensure the backend supports this template type.`):a}}catch(c){throw console.error("Template update error:",c),c}},ne=(r,o="An error occurred with the email service")=>{const c=r.message||o;return M.error(c),{success:!1,message:c}};export{B as H,ee as a,te as g,ne as h,D as s,re as u};
