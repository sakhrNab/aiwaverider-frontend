import{t as T,r,aA as D,j as e,H as M,L as S,aB as F,aC as E,o as $,a5 as I,aD as H}from"./index-CDuOHj3I.js";const B=()=>{const{darkMode:v}=T(),{fetchAllPosts:x,posts:i,loadingPosts:N,errorPosts:m}=r.useContext(D),[l,y]=r.useState("All"),[n,h]=r.useState("latest"),[u,p]=r.useState(null),[o,g]=r.useState([]),[f,d]=r.useState(!0),[c,b]=r.useState(!1),C=["All","Trends","Tools","AI","Blockchain","Web3","Startups"];r.useEffect(()=>{w()},[l,n]),r.useEffect(()=>{if(i&&i.length>0){const a=[...i.filter(s=>l==="All"||s.category===l)].sort((s,j)=>n==="latest"?new Date(j.createdAt)-new Date(s.createdAt):(j.views||0)-(s.views||0));g(a),a.length>0&&p(a[a.length-1].id),d(i.length>=12)}else g([]),d(!1)},[i,l,n]);const w=async()=>{p(null),await x(l,12,null,!0)},k=async()=>{if(!(!f||c||!u)){b(!0);try{const t=o.length;await x(l,12,u),o.length<=t&&d(!1)}catch(t){console.error("Error loading more posts:",t)}finally{b(!1)}}},A=t=>{if(!t)return"N/A";const a=new Date(t),s={year:"numeric",month:"short",day:"numeric"};return a.toLocaleDateString("en-US",s)},L="bg-gradient-to-br from-[#4158D0] via-[#C850C0] to-[#FFCC70] stars-pattern";if(N&&!c)return e.jsxs("div",{className:"flex flex-col justify-center items-center h-screen bg-gradient-to-b from-gray-900 to-blue-900",children:[e.jsx("div",{className:"mb-8",children:e.jsx(M,{color:"#4FD1C5",size:70,speedMultiplier:.8})}),e.jsx("div",{className:"text-white text-xl font-semibold mt-4",children:"Loading Latest News & Tutorials"}),e.jsx("div",{className:"text-blue-300 text-sm mt-2",children:"Fetching the latest articles for you..."})]});const P=(t,a)=>{H(a).then(s=>{s.success===!1&&console.warn("[LatestTech] View increment failed but continuing navigation:",s.error)}).catch(s=>{console.error("[LatestTech] Error incrementing view:",s)})};return e.jsx("div",{className:`min-h-screen pb-16 ${v?"dark bg-[#2D1846]":"bg-gray-50"} ${L}`,children:e.jsx("main",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto mt-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/70 via-[#2D1846]/80 to-indigo-900/70 backdrop-blur-lg rounded-3xl p-8 mb-8 shadow-2xl border border-white/20 transition-all duration-700 hover:border-white/30 transform hover:translate-y-[-5px] relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-pattern opacity-30"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h1",{className:"text-4xl sm:text-5xl font-bold text-center mb-4 tracking-tight",children:e.jsx("span",{className:"bg-gradient-to-r from-purple-300 via-pink-300 to-yellow-200 text-transparent bg-clip-text",children:"Latest Tech News"})}),e.jsx("p",{className:"text-white/80 text-center text-lg mb-2",children:"Stay updated with the latest trends in AI and technology"}),e.jsx("div",{className:"w-20 h-1 bg-gradient-to-r from-purple-500 to-pink-500 mx-auto mt-4 rounded-full"})]})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:C.map(t=>e.jsx("button",{onClick:()=>y(t),className:`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${l===t?"bg-gradient-to-r from-purple-500/60 to-indigo-500/60 text-white shadow-md border border-white/30":"bg-white/10 backdrop-blur-sm border border-white/10 text-white/70 hover:bg-white/15"}`,children:t},t))})}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex justify-center bg-white/10 backdrop-blur-md rounded-full p-1 max-w-xs mx-auto",children:[e.jsx("button",{onClick:()=>h("latest"),className:`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${n==="latest"?"bg-gradient-to-r from-purple-500/60 to-indigo-500/60 text-white shadow-md":"text-white/70 hover:text-white"}`,children:"Latest"}),e.jsx("button",{onClick:()=>h("popular"),className:`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${n==="popular"?"bg-gradient-to-r from-purple-500/60 to-indigo-500/60 text-white shadow-md":"text-white/70 hover:text-white"}`,children:"Most Popular"})]})}),m?e.jsxs("div",{className:"text-center py-12 bg-white/10 backdrop-blur-md rounded-2xl p-6",children:[e.jsx("p",{className:"text-red-400 text-lg mb-4",children:m}),e.jsx("button",{onClick:w,className:"px-4 py-2 bg-white/20 rounded-lg hover:bg-white/30 text-white transition-all",children:"Try Again"})]}):e.jsxs(e.Fragment,{children:[o&&o.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map((t,a)=>e.jsxs(S,{to:`/posts/${t.id}`,className:"glass-effect rounded-2xl overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 flex flex-col animate-fade-in",style:{animationDelay:`${a*50}ms`},onClick:s=>P(s,t.id),children:[e.jsxs("div",{className:"h-48 overflow-hidden relative",children:[e.jsx("img",{src:t.imageUrl||"https://placehold.co/600x400/indigo/white?text=AI+Tech",alt:t.title,className:"w-full h-full object-cover transition-transform duration-500 hover:scale-105",onError:s=>{s.target.src="https://placehold.co/600x400/indigo/white?text=AI+Tech"}}),e.jsx("div",{className:"absolute top-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded-full",children:t.category})]}),e.jsxs("div",{className:"p-6 flex-grow flex flex-col",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2 line-clamp-2",children:t.title}),e.jsx("p",{className:"text-white/70 text-sm mb-4 line-clamp-3",children:t.description}),e.jsxs("div",{className:"mt-auto flex items-center justify-between text-xs text-white/60",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{className:"mr-1"}),e.jsx("span",{children:A(t.createdAt)})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{className:"mr-1"}),e.jsx("span",{children:t.views||0})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx($,{className:"mr-1"}),e.jsx("span",{children:t.likes?.length||0})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{className:"mr-1"}),e.jsx("span",{children:t.comments?.length||0})]})]})]})]})]},t.id))}):e.jsx("div",{className:"text-center py-12 bg-white/10 backdrop-blur-md rounded-2xl p-6",children:e.jsx("p",{className:"text-white/70 mb-4",children:"No posts found in this category."})}),f&&e.jsx("div",{className:"text-center mt-10",children:e.jsx("button",{onClick:k,disabled:c,className:`px-6 py-3 bg-gradient-to-r from-purple-500/60 to-indigo-500/60 rounded-lg text-white font-medium hover:from-purple-500/80 hover:to-indigo-500/80 transition-all duration-300 ${c?"opacity-50 cursor-not-allowed":""}`,children:c?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):"Load More"})})]})]})})})};export{B as default};
