import{B as We,g as at,C as ot,D as lt,r as ne,A as Je,t as Qe,u as ct,d as Le,j as a,L as Te,E as Ye,G as Me,I as et,J as dt,y as de,o as rt,p as it,K as ut,M as ht,N as nt,c as qe,O as Ue,P as Ke,Q as Ze,q as ft,R as pt,S as mt,T as gt,U as st,V as Ve,W as vt,X as wt,Y as yt,Z as bt,_ as _t,$ as xt,a0 as kt,a1 as Ct,a2 as St,a3 as jt,a4 as At,a5 as Et,a6 as Nt,a7 as It}from"./index-CDuOHj3I.js";import{p as Rt}from"./purify.es-DxJI3Wx7.js";import{n as He}from"./n8nworkflow-CWoPLlXr.js";function $e(z){throw new Error('Could not dynamically require "'+z+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ge={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var tt;function zt(){return tt||(tt=1,(function(z,ee){(function(m){z.exports=m()})(function(){return(function m(R,x,t){function l(y,b){if(!x[y]){if(!R[y]){var g=typeof $e=="function"&&$e;if(!b&&g)return g(y,!0);if(n)return n(y,!0);var v=new Error("Cannot find module '"+y+"'");throw v.code="MODULE_NOT_FOUND",v}var s=x[y]={exports:{}};R[y][0].call(s.exports,function(p){var i=R[y][1][p];return l(i||p)},s,s.exports,m,R,x,t)}return x[y].exports}for(var n=typeof $e=="function"&&$e,d=0;d<t.length;d++)l(t[d]);return l})({1:[function(m,R,x){var t=m("./utils"),l=m("./support"),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";x.encode=function(d){for(var y,b,g,v,s,p,i,u=[],o=0,h=d.length,_=h,A=t.getTypeOf(d)!=="string";o<d.length;)_=h-o,g=A?(y=d[o++],b=o<h?d[o++]:0,o<h?d[o++]:0):(y=d.charCodeAt(o++),b=o<h?d.charCodeAt(o++):0,o<h?d.charCodeAt(o++):0),v=y>>2,s=(3&y)<<4|b>>4,p=1<_?(15&b)<<2|g>>6:64,i=2<_?63&g:64,u.push(n.charAt(v)+n.charAt(s)+n.charAt(p)+n.charAt(i));return u.join("")},x.decode=function(d){var y,b,g,v,s,p,i=0,u=0,o="data:";if(d.substr(0,o.length)===o)throw new Error("Invalid base64 input, it looks like a data url.");var h,_=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===n.charAt(64)&&_--,d.charAt(d.length-2)===n.charAt(64)&&_--,_%1!=0)throw new Error("Invalid base64 input, bad content length.");for(h=l.uint8array?new Uint8Array(0|_):new Array(0|_);i<d.length;)y=n.indexOf(d.charAt(i++))<<2|(v=n.indexOf(d.charAt(i++)))>>4,b=(15&v)<<4|(s=n.indexOf(d.charAt(i++)))>>2,g=(3&s)<<6|(p=n.indexOf(d.charAt(i++))),h[u++]=y,s!==64&&(h[u++]=b),p!==64&&(h[u++]=g);return h}},{"./support":30,"./utils":32}],2:[function(m,R,x){var t=m("./external"),l=m("./stream/DataWorker"),n=m("./stream/Crc32Probe"),d=m("./stream/DataLengthProbe");function y(b,g,v,s,p){this.compressedSize=b,this.uncompressedSize=g,this.crc32=v,this.compression=s,this.compressedContent=p}y.prototype={getContentWorker:function(){var b=new l(t.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),g=this;return b.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),b},getCompressedWorker:function(){return new l(t.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},y.createWorkerFrom=function(b,g,v){return b.pipe(new n).pipe(new d("uncompressedSize")).pipe(g.compressWorker(v)).pipe(new d("compressedSize")).withStreamInfo("compression",g)},R.exports=y},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(m,R,x){var t=m("./stream/GenericWorker");x.STORE={magic:"\0\0",compressWorker:function(){return new t("STORE compression")},uncompressWorker:function(){return new t("STORE decompression")}},x.DEFLATE=m("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(m,R,x){var t=m("./utils"),l=(function(){for(var n,d=[],y=0;y<256;y++){n=y;for(var b=0;b<8;b++)n=1&n?3988292384^n>>>1:n>>>1;d[y]=n}return d})();R.exports=function(n,d){return n!==void 0&&n.length?t.getTypeOf(n)!=="string"?(function(y,b,g,v){var s=l,p=v+g;y^=-1;for(var i=v;i<p;i++)y=y>>>8^s[255&(y^b[i])];return-1^y})(0|d,n,n.length,0):(function(y,b,g,v){var s=l,p=v+g;y^=-1;for(var i=v;i<p;i++)y=y>>>8^s[255&(y^b.charCodeAt(i))];return-1^y})(0|d,n,n.length,0):0}},{"./utils":32}],5:[function(m,R,x){x.base64=!1,x.binary=!1,x.dir=!1,x.createFolders=!0,x.date=null,x.compression=null,x.compressionOptions=null,x.comment=null,x.unixPermissions=null,x.dosPermissions=null},{}],6:[function(m,R,x){var t=null;t=typeof Promise<"u"?Promise:m("lie"),R.exports={Promise:t}},{lie:37}],7:[function(m,R,x){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=m("pako"),n=m("./utils"),d=m("./stream/GenericWorker"),y=t?"uint8array":"array";function b(g,v){d.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=v,this.meta={}}x.magic="\b\0",n.inherits(b,d),b.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(n.transformTo(y,g.data),!1)},b.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},b.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},b.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(v){g.push({data:v,meta:g.meta})}},x.compressWorker=function(g){return new b("Deflate",g)},x.uncompressWorker=function(){return new b("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(m,R,x){function t(s,p){var i,u="";for(i=0;i<p;i++)u+=String.fromCharCode(255&s),s>>>=8;return u}function l(s,p,i,u,o,h){var _,A,k=s.file,T=s.compression,D=h!==y.utf8encode,$=n.transformTo("string",h(k.name)),F=n.transformTo("string",y.utf8encode(k.name)),O=k.comment,te=n.transformTo("string",h(O)),w=n.transformTo("string",y.utf8encode(O)),P=F.length!==k.name.length,r=w.length!==O.length,U="",oe="",Z="",le=k.dir,H=k.date,ae={crc32:0,compressedSize:0,uncompressedSize:0};p&&!i||(ae.crc32=s.crc32,ae.compressedSize=s.compressedSize,ae.uncompressedSize=s.uncompressedSize);var I=0;p&&(I|=8),D||!P&&!r||(I|=2048);var S=0,Q=0;le&&(S|=16),o==="UNIX"?(Q=798,S|=(function(G,fe){var we=G;return G||(we=fe?16893:33204),(65535&we)<<16})(k.unixPermissions,le)):(Q=20,S|=(function(G){return 63&(G||0)})(k.dosPermissions)),_=H.getUTCHours(),_<<=6,_|=H.getUTCMinutes(),_<<=5,_|=H.getUTCSeconds()/2,A=H.getUTCFullYear()-1980,A<<=4,A|=H.getUTCMonth()+1,A<<=5,A|=H.getUTCDate(),P&&(oe=t(1,1)+t(b($),4)+F,U+="up"+t(oe.length,2)+oe),r&&(Z=t(1,1)+t(b(te),4)+w,U+="uc"+t(Z.length,2)+Z);var Y="";return Y+=`
\0`,Y+=t(I,2),Y+=T.magic,Y+=t(_,2),Y+=t(A,2),Y+=t(ae.crc32,4),Y+=t(ae.compressedSize,4),Y+=t(ae.uncompressedSize,4),Y+=t($.length,2),Y+=t(U.length,2),{fileRecord:g.LOCAL_FILE_HEADER+Y+$+U,dirRecord:g.CENTRAL_FILE_HEADER+t(Q,2)+Y+t(te.length,2)+"\0\0\0\0"+t(S,4)+t(u,4)+$+U+te}}var n=m("../utils"),d=m("../stream/GenericWorker"),y=m("../utf8"),b=m("../crc32"),g=m("../signature");function v(s,p,i,u){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=i,this.encodeFileName=u,this.streamFiles=s,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}n.inherits(v,d),v.prototype.push=function(s){var p=s.meta.percent||0,i=this.entriesCount,u=this._sources.length;this.accumulate?this.contentBuffer.push(s):(this.bytesWritten+=s.data.length,d.prototype.push.call(this,{data:s.data,meta:{currentFile:this.currentFile,percent:i?(p+100*(i-u-1))/i:100}}))},v.prototype.openedSource=function(s){this.currentSourceOffset=this.bytesWritten,this.currentFile=s.file.name;var p=this.streamFiles&&!s.file.dir;if(p){var i=l(s,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:i.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(s){this.accumulate=!1;var p=this.streamFiles&&!s.file.dir,i=l(s,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(i.dirRecord),p)this.push({data:(function(u){return g.DATA_DESCRIPTOR+t(u.crc32,4)+t(u.compressedSize,4)+t(u.uncompressedSize,4)})(s),meta:{percent:100}});else for(this.push({data:i.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var s=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var i=this.bytesWritten-s,u=(function(o,h,_,A,k){var T=n.transformTo("string",k(A));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+t(o,2)+t(o,2)+t(h,4)+t(_,4)+t(T.length,2)+T})(this.dirRecords.length,i,s,this.zipComment,this.encodeFileName);this.push({data:u,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(s){this._sources.push(s);var p=this;return s.on("data",function(i){p.processChunk(i)}),s.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),s.on("error",function(i){p.error(i)}),this},v.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(s){var p=this._sources;if(!d.prototype.error.call(this,s))return!1;for(var i=0;i<p.length;i++)try{p[i].error(s)}catch{}return!0},v.prototype.lock=function(){d.prototype.lock.call(this);for(var s=this._sources,p=0;p<s.length;p++)s[p].lock()},R.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(m,R,x){var t=m("../compressions"),l=m("./ZipFileWorker");x.generateWorker=function(n,d,y){var b=new l(d.streamFiles,y,d.platform,d.encodeFileName),g=0;try{n.forEach(function(v,s){g++;var p=(function(h,_){var A=h||_,k=t[A];if(!k)throw new Error(A+" is not a valid compression method !");return k})(s.options.compression,d.compression),i=s.options.compressionOptions||d.compressionOptions||{},u=s.dir,o=s.date;s._compressWorker(p,i).withStreamInfo("file",{name:v,dir:u,date:o,comment:s.comment||"",unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions}).pipe(b)}),b.entriesCount=g}catch(v){b.error(v)}return b}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(m,R,x){function t(){if(!(this instanceof t))return new t;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new t;for(var n in this)typeof this[n]!="function"&&(l[n]=this[n]);return l}}(t.prototype=m("./object")).loadAsync=m("./load"),t.support=m("./support"),t.defaults=m("./defaults"),t.version="3.10.1",t.loadAsync=function(l,n){return new t().loadAsync(l,n)},t.external=m("./external"),R.exports=t},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(m,R,x){var t=m("./utils"),l=m("./external"),n=m("./utf8"),d=m("./zipEntries"),y=m("./stream/Crc32Probe"),b=m("./nodejsUtils");function g(v){return new l.Promise(function(s,p){var i=v.decompressed.getContentWorker().pipe(new y);i.on("error",function(u){p(u)}).on("end",function(){i.streamInfo.crc32!==v.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):s()}).resume()})}R.exports=function(v,s){var p=this;return s=t.extend(s||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:n.utf8decode}),b.isNode&&b.isStream(v)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):t.prepareContent("the loaded zip file",v,!0,s.optimizedBinaryString,s.base64).then(function(i){var u=new d(s);return u.load(i),u}).then(function(i){var u=[l.Promise.resolve(i)],o=i.files;if(s.checkCRC32)for(var h=0;h<o.length;h++)u.push(g(o[h]));return l.Promise.all(u)}).then(function(i){for(var u=i.shift(),o=u.files,h=0;h<o.length;h++){var _=o[h],A=_.fileNameStr,k=t.resolve(_.fileNameStr);p.file(k,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:s.createFolders}),_.dir||(p.file(k).unsafeOriginalName=A)}return u.zipComment.length&&(p.comment=u.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(m,R,x){var t=m("../utils"),l=m("../stream/GenericWorker");function n(d,y){l.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(y)}t.inherits(n,l),n.prototype._bindStream=function(d){var y=this;(this._stream=d).pause(),d.on("data",function(b){y.push({data:b,meta:{percent:0}})}).on("error",function(b){y.isPaused?this.generatedError=b:y.error(b)}).on("end",function(){y.isPaused?y._upstreamEnded=!0:y.end()})},n.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},n.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},R.exports=n},{"../stream/GenericWorker":28,"../utils":32}],13:[function(m,R,x){var t=m("readable-stream").Readable;function l(n,d,y){t.call(this,d),this._helper=n;var b=this;n.on("data",function(g,v){b.push(g)||b._helper.pause(),y&&y(v)}).on("error",function(g){b.emit("error",g)}).on("end",function(){b.push(null)})}m("../utils").inherits(l,t),l.prototype._read=function(){this._helper.resume()},R.exports=l},{"../utils":32,"readable-stream":16}],14:[function(m,R,x){R.exports={isNode:typeof Buffer<"u",newBufferFrom:function(t,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,l);if(typeof t=="number")throw new Error('The "data" argument must not be a number');return new Buffer(t,l)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var l=new Buffer(t);return l.fill(0),l},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&typeof t.on=="function"&&typeof t.pause=="function"&&typeof t.resume=="function"}}},{}],15:[function(m,R,x){function t(k,T,D){var $,F=n.getTypeOf(T),O=n.extend(D||{},b);O.date=O.date||new Date,O.compression!==null&&(O.compression=O.compression.toUpperCase()),typeof O.unixPermissions=="string"&&(O.unixPermissions=parseInt(O.unixPermissions,8)),O.unixPermissions&&16384&O.unixPermissions&&(O.dir=!0),O.dosPermissions&&16&O.dosPermissions&&(O.dir=!0),O.dir&&(k=o(k)),O.createFolders&&($=u(k))&&h.call(this,$,!0);var te=F==="string"&&O.binary===!1&&O.base64===!1;D&&D.binary!==void 0||(O.binary=!te),(T instanceof g&&T.uncompressedSize===0||O.dir||!T||T.length===0)&&(O.base64=!1,O.binary=!0,T="",O.compression="STORE",F="string");var w=null;w=T instanceof g||T instanceof d?T:p.isNode&&p.isStream(T)?new i(k,T):n.prepareContent(k,T,O.binary,O.optimizedBinaryString,O.base64);var P=new v(k,w,O);this.files[k]=P}var l=m("./utf8"),n=m("./utils"),d=m("./stream/GenericWorker"),y=m("./stream/StreamHelper"),b=m("./defaults"),g=m("./compressedObject"),v=m("./zipObject"),s=m("./generate"),p=m("./nodejsUtils"),i=m("./nodejs/NodejsStreamInputAdapter"),u=function(k){k.slice(-1)==="/"&&(k=k.substring(0,k.length-1));var T=k.lastIndexOf("/");return 0<T?k.substring(0,T):""},o=function(k){return k.slice(-1)!=="/"&&(k+="/"),k},h=function(k,T){return T=T!==void 0?T:b.createFolders,k=o(k),this.files[k]||t.call(this,k,null,{dir:!0,createFolders:T}),this.files[k]};function _(k){return Object.prototype.toString.call(k)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(k){var T,D,$;for(T in this.files)$=this.files[T],(D=T.slice(this.root.length,T.length))&&T.slice(0,this.root.length)===this.root&&k(D,$)},filter:function(k){var T=[];return this.forEach(function(D,$){k(D,$)&&T.push($)}),T},file:function(k,T,D){if(arguments.length!==1)return k=this.root+k,t.call(this,k,T,D),this;if(_(k)){var $=k;return this.filter(function(O,te){return!te.dir&&$.test(O)})}var F=this.files[this.root+k];return F&&!F.dir?F:null},folder:function(k){if(!k)return this;if(_(k))return this.filter(function(F,O){return O.dir&&k.test(F)});var T=this.root+k,D=h.call(this,T),$=this.clone();return $.root=D.name,$},remove:function(k){k=this.root+k;var T=this.files[k];if(T||(k.slice(-1)!=="/"&&(k+="/"),T=this.files[k]),T&&!T.dir)delete this.files[k];else for(var D=this.filter(function(F,O){return O.name.slice(0,k.length)===k}),$=0;$<D.length;$++)delete this.files[D[$].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(k){var T,D={};try{if((D=n.extend(k||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=D.type.toLowerCase(),D.compression=D.compression.toUpperCase(),D.type==="binarystring"&&(D.type="string"),!D.type)throw new Error("No output type specified.");n.checkSupport(D.type),D.platform!=="darwin"&&D.platform!=="freebsd"&&D.platform!=="linux"&&D.platform!=="sunos"||(D.platform="UNIX"),D.platform==="win32"&&(D.platform="DOS");var $=D.comment||this.comment||"";T=s.generateWorker(this,D,$)}catch(F){(T=new d("error")).error(F)}return new y(T,D.type||"string",D.mimeType)},generateAsync:function(k,T){return this.generateInternalStream(k).accumulate(T)},generateNodeStream:function(k,T){return(k=k||{}).type||(k.type="nodebuffer"),this.generateInternalStream(k).toNodejsStream(T)}};R.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(m,R,x){R.exports=m("stream")},{stream:void 0}],17:[function(m,R,x){var t=m("./DataReader");function l(n){t.call(this,n);for(var d=0;d<this.data.length;d++)n[d]=255&n[d]}m("../utils").inherits(l,t),l.prototype.byteAt=function(n){return this.data[this.zero+n]},l.prototype.lastIndexOfSignature=function(n){for(var d=n.charCodeAt(0),y=n.charCodeAt(1),b=n.charCodeAt(2),g=n.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===d&&this.data[v+1]===y&&this.data[v+2]===b&&this.data[v+3]===g)return v-this.zero;return-1},l.prototype.readAndCheckSignature=function(n){var d=n.charCodeAt(0),y=n.charCodeAt(1),b=n.charCodeAt(2),g=n.charCodeAt(3),v=this.readData(4);return d===v[0]&&y===v[1]&&b===v[2]&&g===v[3]},l.prototype.readData=function(n){if(this.checkOffset(n),n===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,d},R.exports=l},{"../utils":32,"./DataReader":18}],18:[function(m,R,x){var t=m("../utils");function l(n){this.data=n,this.length=n.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(n){this.checkIndex(this.index+n)},checkIndex:function(n){if(this.length<this.zero+n||n<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+n+"). Corrupted zip ?")},setIndex:function(n){this.checkIndex(n),this.index=n},skip:function(n){this.setIndex(this.index+n)},byteAt:function(){},readInt:function(n){var d,y=0;for(this.checkOffset(n),d=this.index+n-1;d>=this.index;d--)y=(y<<8)+this.byteAt(d);return this.index+=n,y},readString:function(n){return t.transformTo("string",this.readData(n))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var n=this.readInt(4);return new Date(Date.UTC(1980+(n>>25&127),(n>>21&15)-1,n>>16&31,n>>11&31,n>>5&63,(31&n)<<1))}},R.exports=l},{"../utils":32}],19:[function(m,R,x){var t=m("./Uint8ArrayReader");function l(n){t.call(this,n)}m("../utils").inherits(l,t),l.prototype.readData=function(n){this.checkOffset(n);var d=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,d},R.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(m,R,x){var t=m("./DataReader");function l(n){t.call(this,n)}m("../utils").inherits(l,t),l.prototype.byteAt=function(n){return this.data.charCodeAt(this.zero+n)},l.prototype.lastIndexOfSignature=function(n){return this.data.lastIndexOf(n)-this.zero},l.prototype.readAndCheckSignature=function(n){return n===this.readData(4)},l.prototype.readData=function(n){this.checkOffset(n);var d=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,d},R.exports=l},{"../utils":32,"./DataReader":18}],21:[function(m,R,x){var t=m("./ArrayReader");function l(n){t.call(this,n)}m("../utils").inherits(l,t),l.prototype.readData=function(n){if(this.checkOffset(n),n===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+n);return this.index+=n,d},R.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(m,R,x){var t=m("../utils"),l=m("../support"),n=m("./ArrayReader"),d=m("./StringReader"),y=m("./NodeBufferReader"),b=m("./Uint8ArrayReader");R.exports=function(g){var v=t.getTypeOf(g);return t.checkSupport(v),v!=="string"||l.uint8array?v==="nodebuffer"?new y(g):l.uint8array?new b(t.transformTo("uint8array",g)):new n(t.transformTo("array",g)):new d(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(m,R,x){x.LOCAL_FILE_HEADER="PK",x.CENTRAL_FILE_HEADER="PK",x.CENTRAL_DIRECTORY_END="PK",x.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",x.ZIP64_CENTRAL_DIRECTORY_END="PK",x.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(m,R,x){var t=m("./GenericWorker"),l=m("../utils");function n(d){t.call(this,"ConvertWorker to "+d),this.destType=d}l.inherits(n,t),n.prototype.processChunk=function(d){this.push({data:l.transformTo(this.destType,d.data),meta:d.meta})},R.exports=n},{"../utils":32,"./GenericWorker":28}],25:[function(m,R,x){var t=m("./GenericWorker"),l=m("../crc32");function n(){t.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}m("../utils").inherits(n,t),n.prototype.processChunk=function(d){this.streamInfo.crc32=l(d.data,this.streamInfo.crc32||0),this.push(d)},R.exports=n},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(m,R,x){var t=m("../utils"),l=m("./GenericWorker");function n(d){l.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}t.inherits(n,l),n.prototype.processChunk=function(d){if(d){var y=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=y+d.data.length}l.prototype.processChunk.call(this,d)},R.exports=n},{"../utils":32,"./GenericWorker":28}],27:[function(m,R,x){var t=m("../utils"),l=m("./GenericWorker");function n(d){l.call(this,"DataWorker");var y=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(b){y.dataIsReady=!0,y.data=b,y.max=b&&b.length||0,y.type=t.getTypeOf(b),y.isPaused||y._tickAndRepeat()},function(b){y.error(b)})}t.inherits(n,l),n.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},n.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,t.delay(this._tickAndRepeat,[],this)),!0)},n.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(t.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},n.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,y=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,y);break;case"uint8array":d=this.data.subarray(this.index,y);break;case"array":case"nodebuffer":d=this.data.slice(this.index,y)}return this.index=y,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},R.exports=n},{"../utils":32,"./GenericWorker":28}],28:[function(m,R,x){function t(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}t.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,n){return this._listeners[l].push(n),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,n){if(this._listeners[l])for(var d=0;d<this._listeners[l].length;d++)this._listeners[l][d].call(this,n)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var n=this;return l.on("data",function(d){n.processChunk(d)}),l.on("end",function(){n.end()}),l.on("error",function(d){n.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,n){return this.extraStreamInfo[l]=n,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},R.exports=t},{}],29:[function(m,R,x){var t=m("../utils"),l=m("./ConvertWorker"),n=m("./GenericWorker"),d=m("../base64"),y=m("../support"),b=m("../external"),g=null;if(y.nodestream)try{g=m("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(p,i){return new b.Promise(function(u,o){var h=[],_=p._internalType,A=p._outputType,k=p._mimeType;p.on("data",function(T,D){h.push(T),i&&i(D)}).on("error",function(T){h=[],o(T)}).on("end",function(){try{var T=(function(D,$,F){switch(D){case"blob":return t.newBlob(t.transformTo("arraybuffer",$),F);case"base64":return d.encode($);default:return t.transformTo(D,$)}})(A,(function(D,$){var F,O=0,te=null,w=0;for(F=0;F<$.length;F++)w+=$[F].length;switch(D){case"string":return $.join("");case"array":return Array.prototype.concat.apply([],$);case"uint8array":for(te=new Uint8Array(w),F=0;F<$.length;F++)te.set($[F],O),O+=$[F].length;return te;case"nodebuffer":return Buffer.concat($);default:throw new Error("concat : unsupported type '"+D+"'")}})(_,h),k);u(T)}catch(D){o(D)}h=[]}).resume()})}function s(p,i,u){var o=i;switch(i){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=i,this._mimeType=u,t.checkSupport(o),this._worker=p.pipe(new l(o)),p.lock()}catch(h){this._worker=new n("error"),this._worker.error(h)}}s.prototype={accumulate:function(p){return v(this,p)},on:function(p,i){var u=this;return p==="data"?this._worker.on(p,function(o){i.call(u,o.data,o.meta)}):this._worker.on(p,function(){t.delay(i,arguments,u)}),this},resume:function(){return t.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(t.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},p)}},R.exports=s},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(m,R,x){if(x.base64=!0,x.array=!0,x.string=!0,x.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",x.nodebuffer=typeof Buffer<"u",x.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")x.blob=!1;else{var t=new ArrayBuffer(0);try{x.blob=new Blob([t],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(t),x.blob=l.getBlob("application/zip").size===0}catch{x.blob=!1}}}try{x.nodestream=!!m("readable-stream").Readable}catch{x.nodestream=!1}},{"readable-stream":16}],31:[function(m,R,x){for(var t=m("./utils"),l=m("./support"),n=m("./nodejsUtils"),d=m("./stream/GenericWorker"),y=new Array(256),b=0;b<256;b++)y[b]=252<=b?6:248<=b?5:240<=b?4:224<=b?3:192<=b?2:1;y[254]=y[254]=1;function g(){d.call(this,"utf-8 decode"),this.leftOver=null}function v(){d.call(this,"utf-8 encode")}x.utf8encode=function(s){return l.nodebuffer?n.newBufferFrom(s,"utf-8"):(function(p){var i,u,o,h,_,A=p.length,k=0;for(h=0;h<A;h++)(64512&(u=p.charCodeAt(h)))==55296&&h+1<A&&(64512&(o=p.charCodeAt(h+1)))==56320&&(u=65536+(u-55296<<10)+(o-56320),h++),k+=u<128?1:u<2048?2:u<65536?3:4;for(i=l.uint8array?new Uint8Array(k):new Array(k),h=_=0;_<k;h++)(64512&(u=p.charCodeAt(h)))==55296&&h+1<A&&(64512&(o=p.charCodeAt(h+1)))==56320&&(u=65536+(u-55296<<10)+(o-56320),h++),u<128?i[_++]=u:(u<2048?i[_++]=192|u>>>6:(u<65536?i[_++]=224|u>>>12:(i[_++]=240|u>>>18,i[_++]=128|u>>>12&63),i[_++]=128|u>>>6&63),i[_++]=128|63&u);return i})(s)},x.utf8decode=function(s){return l.nodebuffer?t.transformTo("nodebuffer",s).toString("utf-8"):(function(p){var i,u,o,h,_=p.length,A=new Array(2*_);for(i=u=0;i<_;)if((o=p[i++])<128)A[u++]=o;else if(4<(h=y[o]))A[u++]=65533,i+=h-1;else{for(o&=h===2?31:h===3?15:7;1<h&&i<_;)o=o<<6|63&p[i++],h--;1<h?A[u++]=65533:o<65536?A[u++]=o:(o-=65536,A[u++]=55296|o>>10&1023,A[u++]=56320|1023&o)}return A.length!==u&&(A.subarray?A=A.subarray(0,u):A.length=u),t.applyFromCharCode(A)})(s=t.transformTo(l.uint8array?"uint8array":"array",s))},t.inherits(g,d),g.prototype.processChunk=function(s){var p=t.transformTo(l.uint8array?"uint8array":"array",s.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var i=p;(p=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),p.set(i,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var u=(function(h,_){var A;for((_=_||h.length)>h.length&&(_=h.length),A=_-1;0<=A&&(192&h[A])==128;)A--;return A<0||A===0?_:A+y[h[A]]>_?A:_})(p),o=p;u!==p.length&&(l.uint8array?(o=p.subarray(0,u),this.leftOver=p.subarray(u,p.length)):(o=p.slice(0,u),this.leftOver=p.slice(u,p.length))),this.push({data:x.utf8decode(o),meta:s.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:x.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},x.Utf8DecodeWorker=g,t.inherits(v,d),v.prototype.processChunk=function(s){this.push({data:x.utf8encode(s.data),meta:s.meta})},x.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(m,R,x){var t=m("./support"),l=m("./base64"),n=m("./nodejsUtils"),d=m("./external");function y(i){return i}function b(i,u){for(var o=0;o<i.length;++o)u[o]=255&i.charCodeAt(o);return u}m("setimmediate"),x.newBlob=function(i,u){x.checkSupport("blob");try{return new Blob([i],{type:u})}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return o.append(i),o.getBlob(u)}catch{throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(i,u,o){var h=[],_=0,A=i.length;if(A<=o)return String.fromCharCode.apply(null,i);for(;_<A;)u==="array"||u==="nodebuffer"?h.push(String.fromCharCode.apply(null,i.slice(_,Math.min(_+o,A)))):h.push(String.fromCharCode.apply(null,i.subarray(_,Math.min(_+o,A)))),_+=o;return h.join("")},stringifyByChar:function(i){for(var u="",o=0;o<i.length;o++)u+=String.fromCharCode(i[o]);return u},applyCanBeUsed:{uint8array:(function(){try{return t.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return t.nodebuffer&&String.fromCharCode.apply(null,n.allocBuffer(1)).length===1}catch{return!1}})()}};function v(i){var u=65536,o=x.getTypeOf(i),h=!0;if(o==="uint8array"?h=g.applyCanBeUsed.uint8array:o==="nodebuffer"&&(h=g.applyCanBeUsed.nodebuffer),h)for(;1<u;)try{return g.stringifyByChunk(i,o,u)}catch{u=Math.floor(u/2)}return g.stringifyByChar(i)}function s(i,u){for(var o=0;o<i.length;o++)u[o]=i[o];return u}x.applyFromCharCode=v;var p={};p.string={string:y,array:function(i){return b(i,new Array(i.length))},arraybuffer:function(i){return p.string.uint8array(i).buffer},uint8array:function(i){return b(i,new Uint8Array(i.length))},nodebuffer:function(i){return b(i,n.allocBuffer(i.length))}},p.array={string:v,array:y,arraybuffer:function(i){return new Uint8Array(i).buffer},uint8array:function(i){return new Uint8Array(i)},nodebuffer:function(i){return n.newBufferFrom(i)}},p.arraybuffer={string:function(i){return v(new Uint8Array(i))},array:function(i){return s(new Uint8Array(i),new Array(i.byteLength))},arraybuffer:y,uint8array:function(i){return new Uint8Array(i)},nodebuffer:function(i){return n.newBufferFrom(new Uint8Array(i))}},p.uint8array={string:v,array:function(i){return s(i,new Array(i.length))},arraybuffer:function(i){return i.buffer},uint8array:y,nodebuffer:function(i){return n.newBufferFrom(i)}},p.nodebuffer={string:v,array:function(i){return s(i,new Array(i.length))},arraybuffer:function(i){return p.nodebuffer.uint8array(i).buffer},uint8array:function(i){return s(i,new Uint8Array(i.length))},nodebuffer:y},x.transformTo=function(i,u){if(u=u||"",!i)return u;x.checkSupport(i);var o=x.getTypeOf(u);return p[o][i](u)},x.resolve=function(i){for(var u=i.split("/"),o=[],h=0;h<u.length;h++){var _=u[h];_==="."||_===""&&h!==0&&h!==u.length-1||(_===".."?o.pop():o.push(_))}return o.join("/")},x.getTypeOf=function(i){return typeof i=="string"?"string":Object.prototype.toString.call(i)==="[object Array]"?"array":t.nodebuffer&&n.isBuffer(i)?"nodebuffer":t.uint8array&&i instanceof Uint8Array?"uint8array":t.arraybuffer&&i instanceof ArrayBuffer?"arraybuffer":void 0},x.checkSupport=function(i){if(!t[i.toLowerCase()])throw new Error(i+" is not supported by this platform")},x.MAX_VALUE_16BITS=65535,x.MAX_VALUE_32BITS=-1,x.pretty=function(i){var u,o,h="";for(o=0;o<(i||"").length;o++)h+="\\x"+((u=i.charCodeAt(o))<16?"0":"")+u.toString(16).toUpperCase();return h},x.delay=function(i,u,o){setImmediate(function(){i.apply(o||null,u||[])})},x.inherits=function(i,u){function o(){}o.prototype=u.prototype,i.prototype=new o},x.extend=function(){var i,u,o={};for(i=0;i<arguments.length;i++)for(u in arguments[i])Object.prototype.hasOwnProperty.call(arguments[i],u)&&o[u]===void 0&&(o[u]=arguments[i][u]);return o},x.prepareContent=function(i,u,o,h,_){return d.Promise.resolve(u).then(function(A){return t.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader<"u"?new d.Promise(function(k,T){var D=new FileReader;D.onload=function($){k($.target.result)},D.onerror=function($){T($.target.error)},D.readAsArrayBuffer(A)}):A}).then(function(A){var k=x.getTypeOf(A);return k?(k==="arraybuffer"?A=x.transformTo("uint8array",A):k==="string"&&(_?A=l.decode(A):o&&h!==!0&&(A=(function(T){return b(T,t.uint8array?new Uint8Array(T.length):new Array(T.length))})(A))),A):d.Promise.reject(new Error("Can't read the data of '"+i+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(m,R,x){var t=m("./reader/readerFor"),l=m("./utils"),n=m("./signature"),d=m("./zipEntry"),y=m("./support");function b(g){this.files=[],this.loadOptions=g}b.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(v)+", expected "+l.pretty(g)+")")}},isSignature:function(g,v){var s=this.reader.index;this.reader.setIndex(g);var p=this.reader.readString(4)===v;return this.reader.setIndex(s),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),v=y.uint8array?"uint8array":"array",s=l.transformTo(v,g);this.zipComment=this.loadOptions.decodeFileName(s)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,v,s,p=this.zip64EndOfCentralSize-44;0<p;)g=this.reader.readInt(2),v=this.reader.readInt(4),s=this.reader.readData(v),this.zip64ExtensibleData[g]={id:g,length:v,value:s}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,v;for(g=0;g<this.files.length;g++)v=this.files[g],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(n.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(n.CENTRAL_FILE_HEADER);)(g=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(n.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,n.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var v=g;if(this.checkSignature(n.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,n.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var s=this.centralDirOffset+this.centralDirSize;this.zip64&&(s+=20,s+=12+this.zip64EndOfCentralSize);var p=v-s;if(0<p)this.isSignature(v,n.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(g){this.reader=t(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},R.exports=b},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(m,R,x){var t=m("./reader/readerFor"),l=m("./utils"),n=m("./compressedObject"),d=m("./crc32"),y=m("./utf8"),b=m("./compressions"),g=m("./support");function v(s,p){this.options=s,this.loadOptions=p}v.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(s){var p,i;if(s.skip(22),this.fileNameLength=s.readInt(2),i=s.readInt(2),this.fileName=s.readData(this.fileNameLength),s.skip(i),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=(function(u){for(var o in b)if(Object.prototype.hasOwnProperty.call(b,o)&&b[o].magic===u)return b[o];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new n(this.compressedSize,this.uncompressedSize,this.crc32,p,s.readData(this.compressedSize))},readCentralPart:function(s){this.versionMadeBy=s.readInt(2),s.skip(2),this.bitFlag=s.readInt(2),this.compressionMethod=s.readString(2),this.date=s.readDate(),this.crc32=s.readInt(4),this.compressedSize=s.readInt(4),this.uncompressedSize=s.readInt(4);var p=s.readInt(2);if(this.extraFieldsLength=s.readInt(2),this.fileCommentLength=s.readInt(2),this.diskNumberStart=s.readInt(2),this.internalFileAttributes=s.readInt(2),this.externalFileAttributes=s.readInt(4),this.localHeaderOffset=s.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");s.skip(p),this.readExtraFields(s),this.parseZIP64ExtraField(s),this.fileComment=s.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var s=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),s==0&&(this.dosPermissions=63&this.externalFileAttributes),s==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var s=t(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=s.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=s.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=s.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=s.readInt(4))}},readExtraFields:function(s){var p,i,u,o=s.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});s.index+4<o;)p=s.readInt(2),i=s.readInt(2),u=s.readData(i),this.extraFields[p]={id:p,length:i,value:u};s.setIndex(o)},handleUTF8:function(){var s=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=y.utf8decode(this.fileName),this.fileCommentStr=y.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var i=l.transformTo(s,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(i)}var u=this.findExtraFieldUnicodeComment();if(u!==null)this.fileCommentStr=u;else{var o=l.transformTo(s,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var s=this.extraFields[28789];if(s){var p=t(s.value);return p.readInt(1)!==1||d(this.fileName)!==p.readInt(4)?null:y.utf8decode(p.readData(s.length-5))}return null},findExtraFieldUnicodeComment:function(){var s=this.extraFields[25461];if(s){var p=t(s.value);return p.readInt(1)!==1||d(this.fileComment)!==p.readInt(4)?null:y.utf8decode(p.readData(s.length-5))}return null}},R.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(m,R,x){function t(p,i,u){this.name=p,this.dir=u.dir,this.date=u.date,this.comment=u.comment,this.unixPermissions=u.unixPermissions,this.dosPermissions=u.dosPermissions,this._data=i,this._dataBinary=u.binary,this.options={compression:u.compression,compressionOptions:u.compressionOptions}}var l=m("./stream/StreamHelper"),n=m("./stream/DataWorker"),d=m("./utf8"),y=m("./compressedObject"),b=m("./stream/GenericWorker");t.prototype={internalStream:function(p){var i=null,u="string";try{if(!p)throw new Error("No output type specified.");var o=(u=p.toLowerCase())==="string"||u==="text";u!=="binarystring"&&u!=="text"||(u="string"),i=this._decompressWorker();var h=!this._dataBinary;h&&!o&&(i=i.pipe(new d.Utf8EncodeWorker)),!h&&o&&(i=i.pipe(new d.Utf8DecodeWorker))}catch(_){(i=new b("error")).error(_)}return new l(i,u,"")},async:function(p,i){return this.internalStream(p).accumulate(i)},nodeStream:function(p,i){return this.internalStream(p||"nodebuffer").toNodejsStream(i)},_compressWorker:function(p,i){if(this._data instanceof y&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var u=this._decompressWorker();return this._dataBinary||(u=u.pipe(new d.Utf8EncodeWorker)),y.createWorkerFrom(u,p,i)},_decompressWorker:function(){return this._data instanceof y?this._data.getContentWorker():this._data instanceof b?this._data:new n(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},s=0;s<g.length;s++)t.prototype[g[s]]=v;R.exports=t},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(m,R,x){(function(t){var l,n,d=t.MutationObserver||t.WebKitMutationObserver;if(d){var y=0,b=new d(p),g=t.document.createTextNode("");b.observe(g,{characterData:!0}),l=function(){g.data=y=++y%2}}else if(t.setImmediate||t.MessageChannel===void 0)l="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var i=t.document.createElement("script");i.onreadystatechange=function(){p(),i.onreadystatechange=null,i.parentNode.removeChild(i),i=null},t.document.documentElement.appendChild(i)}:function(){setTimeout(p,0)};else{var v=new t.MessageChannel;v.port1.onmessage=p,l=function(){v.port2.postMessage(0)}}var s=[];function p(){var i,u;n=!0;for(var o=s.length;o;){for(u=s,s=[],i=-1;++i<o;)u[i]();o=s.length}n=!1}R.exports=function(i){s.push(i)!==1||n||l()}}).call(this,typeof We<"u"?We:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(m,R,x){var t=m("immediate");function l(){}var n={},d=["REJECTED"],y=["FULFILLED"],b=["PENDING"];function g(o){if(typeof o!="function")throw new TypeError("resolver must be a function");this.state=b,this.queue=[],this.outcome=void 0,o!==l&&i(this,o)}function v(o,h,_){this.promise=o,typeof h=="function"&&(this.onFulfilled=h,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}function s(o,h,_){t(function(){var A;try{A=h(_)}catch(k){return n.reject(o,k)}A===o?n.reject(o,new TypeError("Cannot resolve promise with itself")):n.resolve(o,A)})}function p(o){var h=o&&o.then;if(o&&(typeof o=="object"||typeof o=="function")&&typeof h=="function")return function(){h.apply(o,arguments)}}function i(o,h){var _=!1;function A(D){_||(_=!0,n.reject(o,D))}function k(D){_||(_=!0,n.resolve(o,D))}var T=u(function(){h(k,A)});T.status==="error"&&A(T.value)}function u(o,h){var _={};try{_.value=o(h),_.status="success"}catch(A){_.status="error",_.value=A}return _}(R.exports=g).prototype.finally=function(o){if(typeof o!="function")return this;var h=this.constructor;return this.then(function(_){return h.resolve(o()).then(function(){return _})},function(_){return h.resolve(o()).then(function(){throw _})})},g.prototype.catch=function(o){return this.then(null,o)},g.prototype.then=function(o,h){if(typeof o!="function"&&this.state===y||typeof h!="function"&&this.state===d)return this;var _=new this.constructor(l);return this.state!==b?s(_,this.state===y?o:h,this.outcome):this.queue.push(new v(_,o,h)),_},v.prototype.callFulfilled=function(o){n.resolve(this.promise,o)},v.prototype.otherCallFulfilled=function(o){s(this.promise,this.onFulfilled,o)},v.prototype.callRejected=function(o){n.reject(this.promise,o)},v.prototype.otherCallRejected=function(o){s(this.promise,this.onRejected,o)},n.resolve=function(o,h){var _=u(p,h);if(_.status==="error")return n.reject(o,_.value);var A=_.value;if(A)i(o,A);else{o.state=y,o.outcome=h;for(var k=-1,T=o.queue.length;++k<T;)o.queue[k].callFulfilled(h)}return o},n.reject=function(o,h){o.state=d,o.outcome=h;for(var _=-1,A=o.queue.length;++_<A;)o.queue[_].callRejected(h);return o},g.resolve=function(o){return o instanceof this?o:n.resolve(new this(l),o)},g.reject=function(o){var h=new this(l);return n.reject(h,o)},g.all=function(o){var h=this;if(Object.prototype.toString.call(o)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=o.length,A=!1;if(!_)return this.resolve([]);for(var k=new Array(_),T=0,D=-1,$=new this(l);++D<_;)F(o[D],D);return $;function F(O,te){h.resolve(O).then(function(w){k[te]=w,++T!==_||A||(A=!0,n.resolve($,k))},function(w){A||(A=!0,n.reject($,w))})}},g.race=function(o){var h=this;if(Object.prototype.toString.call(o)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=o.length,A=!1;if(!_)return this.resolve([]);for(var k=-1,T=new this(l);++k<_;)D=o[k],h.resolve(D).then(function($){A||(A=!0,n.resolve(T,$))},function($){A||(A=!0,n.reject(T,$))});var D;return T}},{immediate:36}],38:[function(m,R,x){var t={};(0,m("./lib/utils/common").assign)(t,m("./lib/deflate"),m("./lib/inflate"),m("./lib/zlib/constants")),R.exports=t},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(m,R,x){var t=m("./zlib/deflate"),l=m("./utils/common"),n=m("./utils/strings"),d=m("./zlib/messages"),y=m("./zlib/zstream"),b=Object.prototype.toString,g=0,v=-1,s=0,p=8;function i(o){if(!(this instanceof i))return new i(o);this.options=l.assign({level:v,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:s,to:""},o||{});var h=this.options;h.raw&&0<h.windowBits?h.windowBits=-h.windowBits:h.gzip&&0<h.windowBits&&h.windowBits<16&&(h.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var _=t.deflateInit2(this.strm,h.level,h.method,h.windowBits,h.memLevel,h.strategy);if(_!==g)throw new Error(d[_]);if(h.header&&t.deflateSetHeader(this.strm,h.header),h.dictionary){var A;if(A=typeof h.dictionary=="string"?n.string2buf(h.dictionary):b.call(h.dictionary)==="[object ArrayBuffer]"?new Uint8Array(h.dictionary):h.dictionary,(_=t.deflateSetDictionary(this.strm,A))!==g)throw new Error(d[_]);this._dict_set=!0}}function u(o,h){var _=new i(h);if(_.push(o,!0),_.err)throw _.msg||d[_.err];return _.result}i.prototype.push=function(o,h){var _,A,k=this.strm,T=this.options.chunkSize;if(this.ended)return!1;A=h===~~h?h:h===!0?4:0,typeof o=="string"?k.input=n.string2buf(o):b.call(o)==="[object ArrayBuffer]"?k.input=new Uint8Array(o):k.input=o,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new l.Buf8(T),k.next_out=0,k.avail_out=T),(_=t.deflate(k,A))!==1&&_!==g)return this.onEnd(_),!(this.ended=!0);k.avail_out!==0&&(k.avail_in!==0||A!==4&&A!==2)||(this.options.to==="string"?this.onData(n.buf2binstring(l.shrinkBuf(k.output,k.next_out))):this.onData(l.shrinkBuf(k.output,k.next_out)))}while((0<k.avail_in||k.avail_out===0)&&_!==1);return A===4?(_=t.deflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===g):A!==2||(this.onEnd(g),!(k.avail_out=0))},i.prototype.onData=function(o){this.chunks.push(o)},i.prototype.onEnd=function(o){o===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=o,this.msg=this.strm.msg},x.Deflate=i,x.deflate=u,x.deflateRaw=function(o,h){return(h=h||{}).raw=!0,u(o,h)},x.gzip=function(o,h){return(h=h||{}).gzip=!0,u(o,h)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(m,R,x){var t=m("./zlib/inflate"),l=m("./utils/common"),n=m("./utils/strings"),d=m("./zlib/constants"),y=m("./zlib/messages"),b=m("./zlib/zstream"),g=m("./zlib/gzheader"),v=Object.prototype.toString;function s(i){if(!(this instanceof s))return new s(i);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},i||{});var u=this.options;u.raw&&0<=u.windowBits&&u.windowBits<16&&(u.windowBits=-u.windowBits,u.windowBits===0&&(u.windowBits=-15)),!(0<=u.windowBits&&u.windowBits<16)||i&&i.windowBits||(u.windowBits+=32),15<u.windowBits&&u.windowBits<48&&(15&u.windowBits)==0&&(u.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new b,this.strm.avail_out=0;var o=t.inflateInit2(this.strm,u.windowBits);if(o!==d.Z_OK)throw new Error(y[o]);this.header=new g,t.inflateGetHeader(this.strm,this.header)}function p(i,u){var o=new s(u);if(o.push(i,!0),o.err)throw o.msg||y[o.err];return o.result}s.prototype.push=function(i,u){var o,h,_,A,k,T,D=this.strm,$=this.options.chunkSize,F=this.options.dictionary,O=!1;if(this.ended)return!1;h=u===~~u?u:u===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof i=="string"?D.input=n.binstring2buf(i):v.call(i)==="[object ArrayBuffer]"?D.input=new Uint8Array(i):D.input=i,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new l.Buf8($),D.next_out=0,D.avail_out=$),(o=t.inflate(D,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&F&&(T=typeof F=="string"?n.string2buf(F):v.call(F)==="[object ArrayBuffer]"?new Uint8Array(F):F,o=t.inflateSetDictionary(this.strm,T)),o===d.Z_BUF_ERROR&&O===!0&&(o=d.Z_OK,O=!1),o!==d.Z_STREAM_END&&o!==d.Z_OK)return this.onEnd(o),!(this.ended=!0);D.next_out&&(D.avail_out!==0&&o!==d.Z_STREAM_END&&(D.avail_in!==0||h!==d.Z_FINISH&&h!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(_=n.utf8border(D.output,D.next_out),A=D.next_out-_,k=n.buf2string(D.output,_),D.next_out=A,D.avail_out=$-A,A&&l.arraySet(D.output,D.output,_,A,0),this.onData(k)):this.onData(l.shrinkBuf(D.output,D.next_out)))),D.avail_in===0&&D.avail_out===0&&(O=!0)}while((0<D.avail_in||D.avail_out===0)&&o!==d.Z_STREAM_END);return o===d.Z_STREAM_END&&(h=d.Z_FINISH),h===d.Z_FINISH?(o=t.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===d.Z_OK):h!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(D.avail_out=0))},s.prototype.onData=function(i){this.chunks.push(i)},s.prototype.onEnd=function(i){i===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg},x.Inflate=s,x.inflate=p,x.inflateRaw=function(i,u){return(u=u||{}).raw=!0,p(i,u)},x.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(m,R,x){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";x.assign=function(d){for(var y=Array.prototype.slice.call(arguments,1);y.length;){var b=y.shift();if(b){if(typeof b!="object")throw new TypeError(b+"must be non-object");for(var g in b)b.hasOwnProperty(g)&&(d[g]=b[g])}}return d},x.shrinkBuf=function(d,y){return d.length===y?d:d.subarray?d.subarray(0,y):(d.length=y,d)};var l={arraySet:function(d,y,b,g,v){if(y.subarray&&d.subarray)d.set(y.subarray(b,b+g),v);else for(var s=0;s<g;s++)d[v+s]=y[b+s]},flattenChunks:function(d){var y,b,g,v,s,p;for(y=g=0,b=d.length;y<b;y++)g+=d[y].length;for(p=new Uint8Array(g),y=v=0,b=d.length;y<b;y++)s=d[y],p.set(s,v),v+=s.length;return p}},n={arraySet:function(d,y,b,g,v){for(var s=0;s<g;s++)d[v+s]=y[b+s]},flattenChunks:function(d){return[].concat.apply([],d)}};x.setTyped=function(d){d?(x.Buf8=Uint8Array,x.Buf16=Uint16Array,x.Buf32=Int32Array,x.assign(x,l)):(x.Buf8=Array,x.Buf16=Array,x.Buf32=Array,x.assign(x,n))},x.setTyped(t)},{}],42:[function(m,R,x){var t=m("./common"),l=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var d=new t.Buf8(256),y=0;y<256;y++)d[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;function b(g,v){if(v<65537&&(g.subarray&&n||!g.subarray&&l))return String.fromCharCode.apply(null,t.shrinkBuf(g,v));for(var s="",p=0;p<v;p++)s+=String.fromCharCode(g[p]);return s}d[254]=d[254]=1,x.string2buf=function(g){var v,s,p,i,u,o=g.length,h=0;for(i=0;i<o;i++)(64512&(s=g.charCodeAt(i)))==55296&&i+1<o&&(64512&(p=g.charCodeAt(i+1)))==56320&&(s=65536+(s-55296<<10)+(p-56320),i++),h+=s<128?1:s<2048?2:s<65536?3:4;for(v=new t.Buf8(h),i=u=0;u<h;i++)(64512&(s=g.charCodeAt(i)))==55296&&i+1<o&&(64512&(p=g.charCodeAt(i+1)))==56320&&(s=65536+(s-55296<<10)+(p-56320),i++),s<128?v[u++]=s:(s<2048?v[u++]=192|s>>>6:(s<65536?v[u++]=224|s>>>12:(v[u++]=240|s>>>18,v[u++]=128|s>>>12&63),v[u++]=128|s>>>6&63),v[u++]=128|63&s);return v},x.buf2binstring=function(g){return b(g,g.length)},x.binstring2buf=function(g){for(var v=new t.Buf8(g.length),s=0,p=v.length;s<p;s++)v[s]=g.charCodeAt(s);return v},x.buf2string=function(g,v){var s,p,i,u,o=v||g.length,h=new Array(2*o);for(s=p=0;s<o;)if((i=g[s++])<128)h[p++]=i;else if(4<(u=d[i]))h[p++]=65533,s+=u-1;else{for(i&=u===2?31:u===3?15:7;1<u&&s<o;)i=i<<6|63&g[s++],u--;1<u?h[p++]=65533:i<65536?h[p++]=i:(i-=65536,h[p++]=55296|i>>10&1023,h[p++]=56320|1023&i)}return b(h,p)},x.utf8border=function(g,v){var s;for((v=v||g.length)>g.length&&(v=g.length),s=v-1;0<=s&&(192&g[s])==128;)s--;return s<0||s===0?v:s+d[g[s]]>v?s:v}},{"./common":41}],43:[function(m,R,x){R.exports=function(t,l,n,d){for(var y=65535&t|0,b=t>>>16&65535|0,g=0;n!==0;){for(n-=g=2e3<n?2e3:n;b=b+(y=y+l[d++]|0)|0,--g;);y%=65521,b%=65521}return y|b<<16|0}},{}],44:[function(m,R,x){R.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(m,R,x){var t=(function(){for(var l,n=[],d=0;d<256;d++){l=d;for(var y=0;y<8;y++)l=1&l?3988292384^l>>>1:l>>>1;n[d]=l}return n})();R.exports=function(l,n,d,y){var b=t,g=y+d;l^=-1;for(var v=y;v<g;v++)l=l>>>8^b[255&(l^n[v])];return-1^l}},{}],46:[function(m,R,x){var t,l=m("../utils/common"),n=m("./trees"),d=m("./adler32"),y=m("./crc32"),b=m("./messages"),g=0,v=4,s=0,p=-2,i=-1,u=4,o=2,h=8,_=9,A=286,k=30,T=19,D=2*A+1,$=15,F=3,O=258,te=O+F+1,w=42,P=113,r=1,U=2,oe=3,Z=4;function le(e,B){return e.msg=b[B],B}function H(e){return(e<<1)-(4<e?9:0)}function ae(e){for(var B=e.length;0<=--B;)e[B]=0}function I(e){var B=e.state,N=B.pending;N>e.avail_out&&(N=e.avail_out),N!==0&&(l.arraySet(e.output,B.pending_buf,B.pending_out,N,e.next_out),e.next_out+=N,B.pending_out+=N,e.total_out+=N,e.avail_out-=N,B.pending-=N,B.pending===0&&(B.pending_out=0))}function S(e,B){n._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,B),e.block_start=e.strstart,I(e.strm)}function Q(e,B){e.pending_buf[e.pending++]=B}function Y(e,B){e.pending_buf[e.pending++]=B>>>8&255,e.pending_buf[e.pending++]=255&B}function G(e,B){var N,f,c=e.max_chain_length,C=e.strstart,W=e.prev_length,M=e.nice_match,E=e.strstart>e.w_size-te?e.strstart-(e.w_size-te):0,q=e.window,re=e.w_mask,V=e.prev,se=e.strstart+O,me=q[C+W-1],he=q[C+W];e.prev_length>=e.good_match&&(c>>=2),M>e.lookahead&&(M=e.lookahead);do if(q[(N=B)+W]===he&&q[N+W-1]===me&&q[N]===q[C]&&q[++N]===q[C+1]){C+=2,N++;do;while(q[++C]===q[++N]&&q[++C]===q[++N]&&q[++C]===q[++N]&&q[++C]===q[++N]&&q[++C]===q[++N]&&q[++C]===q[++N]&&q[++C]===q[++N]&&q[++C]===q[++N]&&C<se);if(f=O-(se-C),C=se-O,W<f){if(e.match_start=B,M<=(W=f))break;me=q[C+W-1],he=q[C+W]}}while((B=V[B&re])>E&&--c!=0);return W<=e.lookahead?W:e.lookahead}function fe(e){var B,N,f,c,C,W,M,E,q,re,V=e.w_size;do{if(c=e.window_size-e.lookahead-e.strstart,e.strstart>=V+(V-te)){for(l.arraySet(e.window,e.window,V,V,0),e.match_start-=V,e.strstart-=V,e.block_start-=V,B=N=e.hash_size;f=e.head[--B],e.head[B]=V<=f?f-V:0,--N;);for(B=N=V;f=e.prev[--B],e.prev[B]=V<=f?f-V:0,--N;);c+=V}if(e.strm.avail_in===0)break;if(W=e.strm,M=e.window,E=e.strstart+e.lookahead,q=c,re=void 0,re=W.avail_in,q<re&&(re=q),N=re===0?0:(W.avail_in-=re,l.arraySet(M,W.input,W.next_in,re,E),W.state.wrap===1?W.adler=d(W.adler,M,re,E):W.state.wrap===2&&(W.adler=y(W.adler,M,re,E)),W.next_in+=re,W.total_in+=re,re),e.lookahead+=N,e.lookahead+e.insert>=F)for(C=e.strstart-e.insert,e.ins_h=e.window[C],e.ins_h=(e.ins_h<<e.hash_shift^e.window[C+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[C+F-1])&e.hash_mask,e.prev[C&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=C,C++,e.insert--,!(e.lookahead+e.insert<F)););}while(e.lookahead<te&&e.strm.avail_in!==0)}function we(e,B){for(var N,f;;){if(e.lookahead<te){if(fe(e),e.lookahead<te&&B===g)return r;if(e.lookahead===0)break}if(N=0,e.lookahead>=F&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+F-1])&e.hash_mask,N=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),N!==0&&e.strstart-N<=e.w_size-te&&(e.match_length=G(e,N)),e.match_length>=F)if(f=n._tr_tally(e,e.strstart-e.match_start,e.match_length-F),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=F){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+F-1])&e.hash_mask,N=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,--e.match_length!=0;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else f=n._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(f&&(S(e,!1),e.strm.avail_out===0))return r}return e.insert=e.strstart<F-1?e.strstart:F-1,B===v?(S(e,!0),e.strm.avail_out===0?oe:Z):e.last_lit&&(S(e,!1),e.strm.avail_out===0)?r:U}function ue(e,B){for(var N,f,c;;){if(e.lookahead<te){if(fe(e),e.lookahead<te&&B===g)return r;if(e.lookahead===0)break}if(N=0,e.lookahead>=F&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+F-1])&e.hash_mask,N=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=F-1,N!==0&&e.prev_length<e.max_lazy_match&&e.strstart-N<=e.w_size-te&&(e.match_length=G(e,N),e.match_length<=5&&(e.strategy===1||e.match_length===F&&4096<e.strstart-e.match_start)&&(e.match_length=F-1)),e.prev_length>=F&&e.match_length<=e.prev_length){for(c=e.strstart+e.lookahead-F,f=n._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-F),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=c&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+F-1])&e.hash_mask,N=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),--e.prev_length!=0;);if(e.match_available=0,e.match_length=F-1,e.strstart++,f&&(S(e,!1),e.strm.avail_out===0))return r}else if(e.match_available){if((f=n._tr_tally(e,0,e.window[e.strstart-1]))&&S(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return r}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(f=n._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<F-1?e.strstart:F-1,B===v?(S(e,!0),e.strm.avail_out===0?oe:Z):e.last_lit&&(S(e,!1),e.strm.avail_out===0)?r:U}function pe(e,B,N,f,c){this.good_length=e,this.max_lazy=B,this.nice_length=N,this.max_chain=f,this.func=c}function ke(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=h,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*D),this.dyn_dtree=new l.Buf16(2*(2*k+1)),this.bl_tree=new l.Buf16(2*(2*T+1)),ae(this.dyn_ltree),ae(this.dyn_dtree),ae(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16($+1),this.heap=new l.Buf16(2*A+1),ae(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*A+1),ae(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ye(e){var B;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=o,(B=e.state).pending=0,B.pending_out=0,B.wrap<0&&(B.wrap=-B.wrap),B.status=B.wrap?w:P,e.adler=B.wrap===2?0:1,B.last_flush=g,n._tr_init(B),s):le(e,p)}function Ae(e){var B=ye(e);return B===s&&(function(N){N.window_size=2*N.w_size,ae(N.head),N.max_lazy_match=t[N.level].max_lazy,N.good_match=t[N.level].good_length,N.nice_match=t[N.level].nice_length,N.max_chain_length=t[N.level].max_chain,N.strstart=0,N.block_start=0,N.lookahead=0,N.insert=0,N.match_length=N.prev_length=F-1,N.match_available=0,N.ins_h=0})(e.state),B}function Ee(e,B,N,f,c,C){if(!e)return p;var W=1;if(B===i&&(B=6),f<0?(W=0,f=-f):15<f&&(W=2,f-=16),c<1||_<c||N!==h||f<8||15<f||B<0||9<B||C<0||u<C)return le(e,p);f===8&&(f=9);var M=new ke;return(e.state=M).strm=e,M.wrap=W,M.gzhead=null,M.w_bits=f,M.w_size=1<<M.w_bits,M.w_mask=M.w_size-1,M.hash_bits=c+7,M.hash_size=1<<M.hash_bits,M.hash_mask=M.hash_size-1,M.hash_shift=~~((M.hash_bits+F-1)/F),M.window=new l.Buf8(2*M.w_size),M.head=new l.Buf16(M.hash_size),M.prev=new l.Buf16(M.w_size),M.lit_bufsize=1<<c+6,M.pending_buf_size=4*M.lit_bufsize,M.pending_buf=new l.Buf8(M.pending_buf_size),M.d_buf=1*M.lit_bufsize,M.l_buf=3*M.lit_bufsize,M.level=B,M.strategy=C,M.method=N,Ae(e)}t=[new pe(0,0,0,0,function(e,B){var N=65535;for(N>e.pending_buf_size-5&&(N=e.pending_buf_size-5);;){if(e.lookahead<=1){if(fe(e),e.lookahead===0&&B===g)return r;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var f=e.block_start+N;if((e.strstart===0||e.strstart>=f)&&(e.lookahead=e.strstart-f,e.strstart=f,S(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-te&&(S(e,!1),e.strm.avail_out===0))return r}return e.insert=0,B===v?(S(e,!0),e.strm.avail_out===0?oe:Z):(e.strstart>e.block_start&&(S(e,!1),e.strm.avail_out),r)}),new pe(4,4,8,4,we),new pe(4,5,16,8,we),new pe(4,6,32,32,we),new pe(4,4,16,16,ue),new pe(8,16,32,32,ue),new pe(8,16,128,128,ue),new pe(8,32,128,256,ue),new pe(32,128,258,1024,ue),new pe(32,258,258,4096,ue)],x.deflateInit=function(e,B){return Ee(e,B,h,15,8,0)},x.deflateInit2=Ee,x.deflateReset=Ae,x.deflateResetKeep=ye,x.deflateSetHeader=function(e,B){return e&&e.state?e.state.wrap!==2?p:(e.state.gzhead=B,s):p},x.deflate=function(e,B){var N,f,c,C;if(!e||!e.state||5<B||B<0)return e?le(e,p):p;if(f=e.state,!e.output||!e.input&&e.avail_in!==0||f.status===666&&B!==v)return le(e,e.avail_out===0?-5:p);if(f.strm=e,N=f.last_flush,f.last_flush=B,f.status===w)if(f.wrap===2)e.adler=0,Q(f,31),Q(f,139),Q(f,8),f.gzhead?(Q(f,(f.gzhead.text?1:0)+(f.gzhead.hcrc?2:0)+(f.gzhead.extra?4:0)+(f.gzhead.name?8:0)+(f.gzhead.comment?16:0)),Q(f,255&f.gzhead.time),Q(f,f.gzhead.time>>8&255),Q(f,f.gzhead.time>>16&255),Q(f,f.gzhead.time>>24&255),Q(f,f.level===9?2:2<=f.strategy||f.level<2?4:0),Q(f,255&f.gzhead.os),f.gzhead.extra&&f.gzhead.extra.length&&(Q(f,255&f.gzhead.extra.length),Q(f,f.gzhead.extra.length>>8&255)),f.gzhead.hcrc&&(e.adler=y(e.adler,f.pending_buf,f.pending,0)),f.gzindex=0,f.status=69):(Q(f,0),Q(f,0),Q(f,0),Q(f,0),Q(f,0),Q(f,f.level===9?2:2<=f.strategy||f.level<2?4:0),Q(f,3),f.status=P);else{var W=h+(f.w_bits-8<<4)<<8;W|=(2<=f.strategy||f.level<2?0:f.level<6?1:f.level===6?2:3)<<6,f.strstart!==0&&(W|=32),W+=31-W%31,f.status=P,Y(f,W),f.strstart!==0&&(Y(f,e.adler>>>16),Y(f,65535&e.adler)),e.adler=1}if(f.status===69)if(f.gzhead.extra){for(c=f.pending;f.gzindex<(65535&f.gzhead.extra.length)&&(f.pending!==f.pending_buf_size||(f.gzhead.hcrc&&f.pending>c&&(e.adler=y(e.adler,f.pending_buf,f.pending-c,c)),I(e),c=f.pending,f.pending!==f.pending_buf_size));)Q(f,255&f.gzhead.extra[f.gzindex]),f.gzindex++;f.gzhead.hcrc&&f.pending>c&&(e.adler=y(e.adler,f.pending_buf,f.pending-c,c)),f.gzindex===f.gzhead.extra.length&&(f.gzindex=0,f.status=73)}else f.status=73;if(f.status===73)if(f.gzhead.name){c=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>c&&(e.adler=y(e.adler,f.pending_buf,f.pending-c,c)),I(e),c=f.pending,f.pending===f.pending_buf_size)){C=1;break}C=f.gzindex<f.gzhead.name.length?255&f.gzhead.name.charCodeAt(f.gzindex++):0,Q(f,C)}while(C!==0);f.gzhead.hcrc&&f.pending>c&&(e.adler=y(e.adler,f.pending_buf,f.pending-c,c)),C===0&&(f.gzindex=0,f.status=91)}else f.status=91;if(f.status===91)if(f.gzhead.comment){c=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>c&&(e.adler=y(e.adler,f.pending_buf,f.pending-c,c)),I(e),c=f.pending,f.pending===f.pending_buf_size)){C=1;break}C=f.gzindex<f.gzhead.comment.length?255&f.gzhead.comment.charCodeAt(f.gzindex++):0,Q(f,C)}while(C!==0);f.gzhead.hcrc&&f.pending>c&&(e.adler=y(e.adler,f.pending_buf,f.pending-c,c)),C===0&&(f.status=103)}else f.status=103;if(f.status===103&&(f.gzhead.hcrc?(f.pending+2>f.pending_buf_size&&I(e),f.pending+2<=f.pending_buf_size&&(Q(f,255&e.adler),Q(f,e.adler>>8&255),e.adler=0,f.status=P)):f.status=P),f.pending!==0){if(I(e),e.avail_out===0)return f.last_flush=-1,s}else if(e.avail_in===0&&H(B)<=H(N)&&B!==v)return le(e,-5);if(f.status===666&&e.avail_in!==0)return le(e,-5);if(e.avail_in!==0||f.lookahead!==0||B!==g&&f.status!==666){var M=f.strategy===2?(function(E,q){for(var re;;){if(E.lookahead===0&&(fe(E),E.lookahead===0)){if(q===g)return r;break}if(E.match_length=0,re=n._tr_tally(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++,re&&(S(E,!1),E.strm.avail_out===0))return r}return E.insert=0,q===v?(S(E,!0),E.strm.avail_out===0?oe:Z):E.last_lit&&(S(E,!1),E.strm.avail_out===0)?r:U})(f,B):f.strategy===3?(function(E,q){for(var re,V,se,me,he=E.window;;){if(E.lookahead<=O){if(fe(E),E.lookahead<=O&&q===g)return r;if(E.lookahead===0)break}if(E.match_length=0,E.lookahead>=F&&0<E.strstart&&(V=he[se=E.strstart-1])===he[++se]&&V===he[++se]&&V===he[++se]){me=E.strstart+O;do;while(V===he[++se]&&V===he[++se]&&V===he[++se]&&V===he[++se]&&V===he[++se]&&V===he[++se]&&V===he[++se]&&V===he[++se]&&se<me);E.match_length=O-(me-se),E.match_length>E.lookahead&&(E.match_length=E.lookahead)}if(E.match_length>=F?(re=n._tr_tally(E,1,E.match_length-F),E.lookahead-=E.match_length,E.strstart+=E.match_length,E.match_length=0):(re=n._tr_tally(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++),re&&(S(E,!1),E.strm.avail_out===0))return r}return E.insert=0,q===v?(S(E,!0),E.strm.avail_out===0?oe:Z):E.last_lit&&(S(E,!1),E.strm.avail_out===0)?r:U})(f,B):t[f.level].func(f,B);if(M!==oe&&M!==Z||(f.status=666),M===r||M===oe)return e.avail_out===0&&(f.last_flush=-1),s;if(M===U&&(B===1?n._tr_align(f):B!==5&&(n._tr_stored_block(f,0,0,!1),B===3&&(ae(f.head),f.lookahead===0&&(f.strstart=0,f.block_start=0,f.insert=0))),I(e),e.avail_out===0))return f.last_flush=-1,s}return B!==v?s:f.wrap<=0?1:(f.wrap===2?(Q(f,255&e.adler),Q(f,e.adler>>8&255),Q(f,e.adler>>16&255),Q(f,e.adler>>24&255),Q(f,255&e.total_in),Q(f,e.total_in>>8&255),Q(f,e.total_in>>16&255),Q(f,e.total_in>>24&255)):(Y(f,e.adler>>>16),Y(f,65535&e.adler)),I(e),0<f.wrap&&(f.wrap=-f.wrap),f.pending!==0?s:1)},x.deflateEnd=function(e){var B;return e&&e.state?(B=e.state.status)!==w&&B!==69&&B!==73&&B!==91&&B!==103&&B!==P&&B!==666?le(e,p):(e.state=null,B===P?le(e,-3):s):p},x.deflateSetDictionary=function(e,B){var N,f,c,C,W,M,E,q,re=B.length;if(!e||!e.state||(C=(N=e.state).wrap)===2||C===1&&N.status!==w||N.lookahead)return p;for(C===1&&(e.adler=d(e.adler,B,re,0)),N.wrap=0,re>=N.w_size&&(C===0&&(ae(N.head),N.strstart=0,N.block_start=0,N.insert=0),q=new l.Buf8(N.w_size),l.arraySet(q,B,re-N.w_size,N.w_size,0),B=q,re=N.w_size),W=e.avail_in,M=e.next_in,E=e.input,e.avail_in=re,e.next_in=0,e.input=B,fe(N);N.lookahead>=F;){for(f=N.strstart,c=N.lookahead-(F-1);N.ins_h=(N.ins_h<<N.hash_shift^N.window[f+F-1])&N.hash_mask,N.prev[f&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=f,f++,--c;);N.strstart=f,N.lookahead=F-1,fe(N)}return N.strstart+=N.lookahead,N.block_start=N.strstart,N.insert=N.lookahead,N.lookahead=0,N.match_length=N.prev_length=F-1,N.match_available=0,e.next_in=M,e.input=E,e.avail_in=W,N.wrap=C,s},x.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(m,R,x){R.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(m,R,x){R.exports=function(t,l){var n,d,y,b,g,v,s,p,i,u,o,h,_,A,k,T,D,$,F,O,te,w,P,r,U;n=t.state,d=t.next_in,r=t.input,y=d+(t.avail_in-5),b=t.next_out,U=t.output,g=b-(l-t.avail_out),v=b+(t.avail_out-257),s=n.dmax,p=n.wsize,i=n.whave,u=n.wnext,o=n.window,h=n.hold,_=n.bits,A=n.lencode,k=n.distcode,T=(1<<n.lenbits)-1,D=(1<<n.distbits)-1;e:do{_<15&&(h+=r[d++]<<_,_+=8,h+=r[d++]<<_,_+=8),$=A[h&T];t:for(;;){if(h>>>=F=$>>>24,_-=F,(F=$>>>16&255)===0)U[b++]=65535&$;else{if(!(16&F)){if((64&F)==0){$=A[(65535&$)+(h&(1<<F)-1)];continue t}if(32&F){n.mode=12;break e}t.msg="invalid literal/length code",n.mode=30;break e}O=65535&$,(F&=15)&&(_<F&&(h+=r[d++]<<_,_+=8),O+=h&(1<<F)-1,h>>>=F,_-=F),_<15&&(h+=r[d++]<<_,_+=8,h+=r[d++]<<_,_+=8),$=k[h&D];r:for(;;){if(h>>>=F=$>>>24,_-=F,!(16&(F=$>>>16&255))){if((64&F)==0){$=k[(65535&$)+(h&(1<<F)-1)];continue r}t.msg="invalid distance code",n.mode=30;break e}if(te=65535&$,_<(F&=15)&&(h+=r[d++]<<_,(_+=8)<F&&(h+=r[d++]<<_,_+=8)),s<(te+=h&(1<<F)-1)){t.msg="invalid distance too far back",n.mode=30;break e}if(h>>>=F,_-=F,(F=b-g)<te){if(i<(F=te-F)&&n.sane){t.msg="invalid distance too far back",n.mode=30;break e}if(P=o,(w=0)===u){if(w+=p-F,F<O){for(O-=F;U[b++]=o[w++],--F;);w=b-te,P=U}}else if(u<F){if(w+=p+u-F,(F-=u)<O){for(O-=F;U[b++]=o[w++],--F;);if(w=0,u<O){for(O-=F=u;U[b++]=o[w++],--F;);w=b-te,P=U}}}else if(w+=u-F,F<O){for(O-=F;U[b++]=o[w++],--F;);w=b-te,P=U}for(;2<O;)U[b++]=P[w++],U[b++]=P[w++],U[b++]=P[w++],O-=3;O&&(U[b++]=P[w++],1<O&&(U[b++]=P[w++]))}else{for(w=b-te;U[b++]=U[w++],U[b++]=U[w++],U[b++]=U[w++],2<(O-=3););O&&(U[b++]=U[w++],1<O&&(U[b++]=U[w++]))}break}}break}}while(d<y&&b<v);d-=O=_>>3,h&=(1<<(_-=O<<3))-1,t.next_in=d,t.next_out=b,t.avail_in=d<y?y-d+5:5-(d-y),t.avail_out=b<v?v-b+257:257-(b-v),n.hold=h,n.bits=_}},{}],49:[function(m,R,x){var t=m("../utils/common"),l=m("./adler32"),n=m("./crc32"),d=m("./inffast"),y=m("./inftrees"),b=1,g=2,v=0,s=-2,p=1,i=852,u=592;function o(w){return(w>>>24&255)+(w>>>8&65280)+((65280&w)<<8)+((255&w)<<24)}function h(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new t.Buf16(320),this.work=new t.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(w){var P;return w&&w.state?(P=w.state,w.total_in=w.total_out=P.total=0,w.msg="",P.wrap&&(w.adler=1&P.wrap),P.mode=p,P.last=0,P.havedict=0,P.dmax=32768,P.head=null,P.hold=0,P.bits=0,P.lencode=P.lendyn=new t.Buf32(i),P.distcode=P.distdyn=new t.Buf32(u),P.sane=1,P.back=-1,v):s}function A(w){var P;return w&&w.state?((P=w.state).wsize=0,P.whave=0,P.wnext=0,_(w)):s}function k(w,P){var r,U;return w&&w.state?(U=w.state,P<0?(r=0,P=-P):(r=1+(P>>4),P<48&&(P&=15)),P&&(P<8||15<P)?s:(U.window!==null&&U.wbits!==P&&(U.window=null),U.wrap=r,U.wbits=P,A(w))):s}function T(w,P){var r,U;return w?(U=new h,(w.state=U).window=null,(r=k(w,P))!==v&&(w.state=null),r):s}var D,$,F=!0;function O(w){if(F){var P;for(D=new t.Buf32(512),$=new t.Buf32(32),P=0;P<144;)w.lens[P++]=8;for(;P<256;)w.lens[P++]=9;for(;P<280;)w.lens[P++]=7;for(;P<288;)w.lens[P++]=8;for(y(b,w.lens,0,288,D,0,w.work,{bits:9}),P=0;P<32;)w.lens[P++]=5;y(g,w.lens,0,32,$,0,w.work,{bits:5}),F=!1}w.lencode=D,w.lenbits=9,w.distcode=$,w.distbits=5}function te(w,P,r,U){var oe,Z=w.state;return Z.window===null&&(Z.wsize=1<<Z.wbits,Z.wnext=0,Z.whave=0,Z.window=new t.Buf8(Z.wsize)),U>=Z.wsize?(t.arraySet(Z.window,P,r-Z.wsize,Z.wsize,0),Z.wnext=0,Z.whave=Z.wsize):(U<(oe=Z.wsize-Z.wnext)&&(oe=U),t.arraySet(Z.window,P,r-U,oe,Z.wnext),(U-=oe)?(t.arraySet(Z.window,P,r-U,U,0),Z.wnext=U,Z.whave=Z.wsize):(Z.wnext+=oe,Z.wnext===Z.wsize&&(Z.wnext=0),Z.whave<Z.wsize&&(Z.whave+=oe))),0}x.inflateReset=A,x.inflateReset2=k,x.inflateResetKeep=_,x.inflateInit=function(w){return T(w,15)},x.inflateInit2=T,x.inflate=function(w,P){var r,U,oe,Z,le,H,ae,I,S,Q,Y,G,fe,we,ue,pe,ke,ye,Ae,Ee,e,B,N,f,c=0,C=new t.Buf8(4),W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!w||!w.state||!w.output||!w.input&&w.avail_in!==0)return s;(r=w.state).mode===12&&(r.mode=13),le=w.next_out,oe=w.output,ae=w.avail_out,Z=w.next_in,U=w.input,H=w.avail_in,I=r.hold,S=r.bits,Q=H,Y=ae,B=v;e:for(;;)switch(r.mode){case p:if(r.wrap===0){r.mode=13;break}for(;S<16;){if(H===0)break e;H--,I+=U[Z++]<<S,S+=8}if(2&r.wrap&&I===35615){C[r.check=0]=255&I,C[1]=I>>>8&255,r.check=n(r.check,C,2,0),S=I=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&I)<<8)+(I>>8))%31){w.msg="incorrect header check",r.mode=30;break}if((15&I)!=8){w.msg="unknown compression method",r.mode=30;break}if(S-=4,e=8+(15&(I>>>=4)),r.wbits===0)r.wbits=e;else if(e>r.wbits){w.msg="invalid window size",r.mode=30;break}r.dmax=1<<e,w.adler=r.check=1,r.mode=512&I?10:12,S=I=0;break;case 2:for(;S<16;){if(H===0)break e;H--,I+=U[Z++]<<S,S+=8}if(r.flags=I,(255&r.flags)!=8){w.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){w.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=I>>8&1),512&r.flags&&(C[0]=255&I,C[1]=I>>>8&255,r.check=n(r.check,C,2,0)),S=I=0,r.mode=3;case 3:for(;S<32;){if(H===0)break e;H--,I+=U[Z++]<<S,S+=8}r.head&&(r.head.time=I),512&r.flags&&(C[0]=255&I,C[1]=I>>>8&255,C[2]=I>>>16&255,C[3]=I>>>24&255,r.check=n(r.check,C,4,0)),S=I=0,r.mode=4;case 4:for(;S<16;){if(H===0)break e;H--,I+=U[Z++]<<S,S+=8}r.head&&(r.head.xflags=255&I,r.head.os=I>>8),512&r.flags&&(C[0]=255&I,C[1]=I>>>8&255,r.check=n(r.check,C,2,0)),S=I=0,r.mode=5;case 5:if(1024&r.flags){for(;S<16;){if(H===0)break e;H--,I+=U[Z++]<<S,S+=8}r.length=I,r.head&&(r.head.extra_len=I),512&r.flags&&(C[0]=255&I,C[1]=I>>>8&255,r.check=n(r.check,C,2,0)),S=I=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(H<(G=r.length)&&(G=H),G&&(r.head&&(e=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),t.arraySet(r.head.extra,U,Z,G,e)),512&r.flags&&(r.check=n(r.check,U,G,Z)),H-=G,Z+=G,r.length-=G),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(H===0)break e;for(G=0;e=U[Z+G++],r.head&&e&&r.length<65536&&(r.head.name+=String.fromCharCode(e)),e&&G<H;);if(512&r.flags&&(r.check=n(r.check,U,G,Z)),H-=G,Z+=G,e)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(H===0)break e;for(G=0;e=U[Z+G++],r.head&&e&&r.length<65536&&(r.head.comment+=String.fromCharCode(e)),e&&G<H;);if(512&r.flags&&(r.check=n(r.check,U,G,Z)),H-=G,Z+=G,e)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;S<16;){if(H===0)break e;H--,I+=U[Z++]<<S,S+=8}if(I!==(65535&r.check)){w.msg="header crc mismatch",r.mode=30;break}S=I=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),w.adler=r.check=0,r.mode=12;break;case 10:for(;S<32;){if(H===0)break e;H--,I+=U[Z++]<<S,S+=8}w.adler=r.check=o(I),S=I=0,r.mode=11;case 11:if(r.havedict===0)return w.next_out=le,w.avail_out=ae,w.next_in=Z,w.avail_in=H,r.hold=I,r.bits=S,2;w.adler=r.check=1,r.mode=12;case 12:if(P===5||P===6)break e;case 13:if(r.last){I>>>=7&S,S-=7&S,r.mode=27;break}for(;S<3;){if(H===0)break e;H--,I+=U[Z++]<<S,S+=8}switch(r.last=1&I,S-=1,3&(I>>>=1)){case 0:r.mode=14;break;case 1:if(O(r),r.mode=20,P!==6)break;I>>>=2,S-=2;break e;case 2:r.mode=17;break;case 3:w.msg="invalid block type",r.mode=30}I>>>=2,S-=2;break;case 14:for(I>>>=7&S,S-=7&S;S<32;){if(H===0)break e;H--,I+=U[Z++]<<S,S+=8}if((65535&I)!=(I>>>16^65535)){w.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&I,S=I=0,r.mode=15,P===6)break e;case 15:r.mode=16;case 16:if(G=r.length){if(H<G&&(G=H),ae<G&&(G=ae),G===0)break e;t.arraySet(oe,U,Z,G,le),H-=G,Z+=G,ae-=G,le+=G,r.length-=G;break}r.mode=12;break;case 17:for(;S<14;){if(H===0)break e;H--,I+=U[Z++]<<S,S+=8}if(r.nlen=257+(31&I),I>>>=5,S-=5,r.ndist=1+(31&I),I>>>=5,S-=5,r.ncode=4+(15&I),I>>>=4,S-=4,286<r.nlen||30<r.ndist){w.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;S<3;){if(H===0)break e;H--,I+=U[Z++]<<S,S+=8}r.lens[W[r.have++]]=7&I,I>>>=3,S-=3}for(;r.have<19;)r.lens[W[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,N={bits:r.lenbits},B=y(0,r.lens,0,19,r.lencode,0,r.work,N),r.lenbits=N.bits,B){w.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;pe=(c=r.lencode[I&(1<<r.lenbits)-1])>>>16&255,ke=65535&c,!((ue=c>>>24)<=S);){if(H===0)break e;H--,I+=U[Z++]<<S,S+=8}if(ke<16)I>>>=ue,S-=ue,r.lens[r.have++]=ke;else{if(ke===16){for(f=ue+2;S<f;){if(H===0)break e;H--,I+=U[Z++]<<S,S+=8}if(I>>>=ue,S-=ue,r.have===0){w.msg="invalid bit length repeat",r.mode=30;break}e=r.lens[r.have-1],G=3+(3&I),I>>>=2,S-=2}else if(ke===17){for(f=ue+3;S<f;){if(H===0)break e;H--,I+=U[Z++]<<S,S+=8}S-=ue,e=0,G=3+(7&(I>>>=ue)),I>>>=3,S-=3}else{for(f=ue+7;S<f;){if(H===0)break e;H--,I+=U[Z++]<<S,S+=8}S-=ue,e=0,G=11+(127&(I>>>=ue)),I>>>=7,S-=7}if(r.have+G>r.nlen+r.ndist){w.msg="invalid bit length repeat",r.mode=30;break}for(;G--;)r.lens[r.have++]=e}}if(r.mode===30)break;if(r.lens[256]===0){w.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,N={bits:r.lenbits},B=y(b,r.lens,0,r.nlen,r.lencode,0,r.work,N),r.lenbits=N.bits,B){w.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,N={bits:r.distbits},B=y(g,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,N),r.distbits=N.bits,B){w.msg="invalid distances set",r.mode=30;break}if(r.mode=20,P===6)break e;case 20:r.mode=21;case 21:if(6<=H&&258<=ae){w.next_out=le,w.avail_out=ae,w.next_in=Z,w.avail_in=H,r.hold=I,r.bits=S,d(w,Y),le=w.next_out,oe=w.output,ae=w.avail_out,Z=w.next_in,U=w.input,H=w.avail_in,I=r.hold,S=r.bits,r.mode===12&&(r.back=-1);break}for(r.back=0;pe=(c=r.lencode[I&(1<<r.lenbits)-1])>>>16&255,ke=65535&c,!((ue=c>>>24)<=S);){if(H===0)break e;H--,I+=U[Z++]<<S,S+=8}if(pe&&(240&pe)==0){for(ye=ue,Ae=pe,Ee=ke;pe=(c=r.lencode[Ee+((I&(1<<ye+Ae)-1)>>ye)])>>>16&255,ke=65535&c,!(ye+(ue=c>>>24)<=S);){if(H===0)break e;H--,I+=U[Z++]<<S,S+=8}I>>>=ye,S-=ye,r.back+=ye}if(I>>>=ue,S-=ue,r.back+=ue,r.length=ke,pe===0){r.mode=26;break}if(32&pe){r.back=-1,r.mode=12;break}if(64&pe){w.msg="invalid literal/length code",r.mode=30;break}r.extra=15&pe,r.mode=22;case 22:if(r.extra){for(f=r.extra;S<f;){if(H===0)break e;H--,I+=U[Z++]<<S,S+=8}r.length+=I&(1<<r.extra)-1,I>>>=r.extra,S-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;pe=(c=r.distcode[I&(1<<r.distbits)-1])>>>16&255,ke=65535&c,!((ue=c>>>24)<=S);){if(H===0)break e;H--,I+=U[Z++]<<S,S+=8}if((240&pe)==0){for(ye=ue,Ae=pe,Ee=ke;pe=(c=r.distcode[Ee+((I&(1<<ye+Ae)-1)>>ye)])>>>16&255,ke=65535&c,!(ye+(ue=c>>>24)<=S);){if(H===0)break e;H--,I+=U[Z++]<<S,S+=8}I>>>=ye,S-=ye,r.back+=ye}if(I>>>=ue,S-=ue,r.back+=ue,64&pe){w.msg="invalid distance code",r.mode=30;break}r.offset=ke,r.extra=15&pe,r.mode=24;case 24:if(r.extra){for(f=r.extra;S<f;){if(H===0)break e;H--,I+=U[Z++]<<S,S+=8}r.offset+=I&(1<<r.extra)-1,I>>>=r.extra,S-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){w.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(ae===0)break e;if(G=Y-ae,r.offset>G){if((G=r.offset-G)>r.whave&&r.sane){w.msg="invalid distance too far back",r.mode=30;break}fe=G>r.wnext?(G-=r.wnext,r.wsize-G):r.wnext-G,G>r.length&&(G=r.length),we=r.window}else we=oe,fe=le-r.offset,G=r.length;for(ae<G&&(G=ae),ae-=G,r.length-=G;oe[le++]=we[fe++],--G;);r.length===0&&(r.mode=21);break;case 26:if(ae===0)break e;oe[le++]=r.length,ae--,r.mode=21;break;case 27:if(r.wrap){for(;S<32;){if(H===0)break e;H--,I|=U[Z++]<<S,S+=8}if(Y-=ae,w.total_out+=Y,r.total+=Y,Y&&(w.adler=r.check=r.flags?n(r.check,oe,Y,le-Y):l(r.check,oe,Y,le-Y)),Y=ae,(r.flags?I:o(I))!==r.check){w.msg="incorrect data check",r.mode=30;break}S=I=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;S<32;){if(H===0)break e;H--,I+=U[Z++]<<S,S+=8}if(I!==(4294967295&r.total)){w.msg="incorrect length check",r.mode=30;break}S=I=0}r.mode=29;case 29:B=1;break e;case 30:B=-3;break e;case 31:return-4;case 32:default:return s}return w.next_out=le,w.avail_out=ae,w.next_in=Z,w.avail_in=H,r.hold=I,r.bits=S,(r.wsize||Y!==w.avail_out&&r.mode<30&&(r.mode<27||P!==4))&&te(w,w.output,w.next_out,Y-w.avail_out)?(r.mode=31,-4):(Q-=w.avail_in,Y-=w.avail_out,w.total_in+=Q,w.total_out+=Y,r.total+=Y,r.wrap&&Y&&(w.adler=r.check=r.flags?n(r.check,oe,Y,w.next_out-Y):l(r.check,oe,Y,w.next_out-Y)),w.data_type=r.bits+(r.last?64:0)+(r.mode===12?128:0)+(r.mode===20||r.mode===15?256:0),(Q==0&&Y===0||P===4)&&B===v&&(B=-5),B)},x.inflateEnd=function(w){if(!w||!w.state)return s;var P=w.state;return P.window&&(P.window=null),w.state=null,v},x.inflateGetHeader=function(w,P){var r;return w&&w.state?(2&(r=w.state).wrap)==0?s:((r.head=P).done=!1,v):s},x.inflateSetDictionary=function(w,P){var r,U=P.length;return w&&w.state?(r=w.state).wrap!==0&&r.mode!==11?s:r.mode===11&&l(1,P,U,0)!==r.check?-3:te(w,P,U,U)?(r.mode=31,-4):(r.havedict=1,v):s},x.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(m,R,x){var t=m("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],n=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],y=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];R.exports=function(b,g,v,s,p,i,u,o){var h,_,A,k,T,D,$,F,O,te=o.bits,w=0,P=0,r=0,U=0,oe=0,Z=0,le=0,H=0,ae=0,I=0,S=null,Q=0,Y=new t.Buf16(16),G=new t.Buf16(16),fe=null,we=0;for(w=0;w<=15;w++)Y[w]=0;for(P=0;P<s;P++)Y[g[v+P]]++;for(oe=te,U=15;1<=U&&Y[U]===0;U--);if(U<oe&&(oe=U),U===0)return p[i++]=20971520,p[i++]=20971520,o.bits=1,0;for(r=1;r<U&&Y[r]===0;r++);for(oe<r&&(oe=r),w=H=1;w<=15;w++)if(H<<=1,(H-=Y[w])<0)return-1;if(0<H&&(b===0||U!==1))return-1;for(G[1]=0,w=1;w<15;w++)G[w+1]=G[w]+Y[w];for(P=0;P<s;P++)g[v+P]!==0&&(u[G[g[v+P]]++]=P);if(D=b===0?(S=fe=u,19):b===1?(S=l,Q-=257,fe=n,we-=257,256):(S=d,fe=y,-1),w=r,T=i,le=P=I=0,A=-1,k=(ae=1<<(Z=oe))-1,b===1&&852<ae||b===2&&592<ae)return 1;for(;;){for($=w-le,O=u[P]<D?(F=0,u[P]):u[P]>D?(F=fe[we+u[P]],S[Q+u[P]]):(F=96,0),h=1<<w-le,r=_=1<<Z;p[T+(I>>le)+(_-=h)]=$<<24|F<<16|O|0,_!==0;);for(h=1<<w-1;I&h;)h>>=1;if(h!==0?(I&=h-1,I+=h):I=0,P++,--Y[w]==0){if(w===U)break;w=g[v+u[P]]}if(oe<w&&(I&k)!==A){for(le===0&&(le=oe),T+=r,H=1<<(Z=w-le);Z+le<U&&!((H-=Y[Z+le])<=0);)Z++,H<<=1;if(ae+=1<<Z,b===1&&852<ae||b===2&&592<ae)return 1;p[A=I&k]=oe<<24|Z<<16|T-i|0}}return I!==0&&(p[T+I]=w-le<<24|64<<16|0),o.bits=oe,0}},{"../utils/common":41}],51:[function(m,R,x){R.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(m,R,x){var t=m("../utils/common"),l=0,n=1;function d(c){for(var C=c.length;0<=--C;)c[C]=0}var y=0,b=29,g=256,v=g+1+b,s=30,p=19,i=2*v+1,u=15,o=16,h=7,_=256,A=16,k=17,T=18,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],$=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],te=new Array(2*(v+2));d(te);var w=new Array(2*s);d(w);var P=new Array(512);d(P);var r=new Array(256);d(r);var U=new Array(b);d(U);var oe,Z,le,H=new Array(s);function ae(c,C,W,M,E){this.static_tree=c,this.extra_bits=C,this.extra_base=W,this.elems=M,this.max_length=E,this.has_stree=c&&c.length}function I(c,C){this.dyn_tree=c,this.max_code=0,this.stat_desc=C}function S(c){return c<256?P[c]:P[256+(c>>>7)]}function Q(c,C){c.pending_buf[c.pending++]=255&C,c.pending_buf[c.pending++]=C>>>8&255}function Y(c,C,W){c.bi_valid>o-W?(c.bi_buf|=C<<c.bi_valid&65535,Q(c,c.bi_buf),c.bi_buf=C>>o-c.bi_valid,c.bi_valid+=W-o):(c.bi_buf|=C<<c.bi_valid&65535,c.bi_valid+=W)}function G(c,C,W){Y(c,W[2*C],W[2*C+1])}function fe(c,C){for(var W=0;W|=1&c,c>>>=1,W<<=1,0<--C;);return W>>>1}function we(c,C,W){var M,E,q=new Array(u+1),re=0;for(M=1;M<=u;M++)q[M]=re=re+W[M-1]<<1;for(E=0;E<=C;E++){var V=c[2*E+1];V!==0&&(c[2*E]=fe(q[V]++,V))}}function ue(c){var C;for(C=0;C<v;C++)c.dyn_ltree[2*C]=0;for(C=0;C<s;C++)c.dyn_dtree[2*C]=0;for(C=0;C<p;C++)c.bl_tree[2*C]=0;c.dyn_ltree[2*_]=1,c.opt_len=c.static_len=0,c.last_lit=c.matches=0}function pe(c){8<c.bi_valid?Q(c,c.bi_buf):0<c.bi_valid&&(c.pending_buf[c.pending++]=c.bi_buf),c.bi_buf=0,c.bi_valid=0}function ke(c,C,W,M){var E=2*C,q=2*W;return c[E]<c[q]||c[E]===c[q]&&M[C]<=M[W]}function ye(c,C,W){for(var M=c.heap[W],E=W<<1;E<=c.heap_len&&(E<c.heap_len&&ke(C,c.heap[E+1],c.heap[E],c.depth)&&E++,!ke(C,M,c.heap[E],c.depth));)c.heap[W]=c.heap[E],W=E,E<<=1;c.heap[W]=M}function Ae(c,C,W){var M,E,q,re,V=0;if(c.last_lit!==0)for(;M=c.pending_buf[c.d_buf+2*V]<<8|c.pending_buf[c.d_buf+2*V+1],E=c.pending_buf[c.l_buf+V],V++,M===0?G(c,E,C):(G(c,(q=r[E])+g+1,C),(re=D[q])!==0&&Y(c,E-=U[q],re),G(c,q=S(--M),W),(re=$[q])!==0&&Y(c,M-=H[q],re)),V<c.last_lit;);G(c,_,C)}function Ee(c,C){var W,M,E,q=C.dyn_tree,re=C.stat_desc.static_tree,V=C.stat_desc.has_stree,se=C.stat_desc.elems,me=-1;for(c.heap_len=0,c.heap_max=i,W=0;W<se;W++)q[2*W]!==0?(c.heap[++c.heap_len]=me=W,c.depth[W]=0):q[2*W+1]=0;for(;c.heap_len<2;)q[2*(E=c.heap[++c.heap_len]=me<2?++me:0)]=1,c.depth[E]=0,c.opt_len--,V&&(c.static_len-=re[2*E+1]);for(C.max_code=me,W=c.heap_len>>1;1<=W;W--)ye(c,q,W);for(E=se;W=c.heap[1],c.heap[1]=c.heap[c.heap_len--],ye(c,q,1),M=c.heap[1],c.heap[--c.heap_max]=W,c.heap[--c.heap_max]=M,q[2*E]=q[2*W]+q[2*M],c.depth[E]=(c.depth[W]>=c.depth[M]?c.depth[W]:c.depth[M])+1,q[2*W+1]=q[2*M+1]=E,c.heap[1]=E++,ye(c,q,1),2<=c.heap_len;);c.heap[--c.heap_max]=c.heap[1],(function(he,je){var ze,Ne,Fe,be,De,Oe,j=je.dyn_tree,L=je.max_code,J=je.stat_desc.static_tree,K=je.stat_desc.has_stree,X=je.stat_desc.extra_bits,ie=je.stat_desc.extra_base,ce=je.stat_desc.max_length,ge=0;for(be=0;be<=u;be++)he.bl_count[be]=0;for(j[2*he.heap[he.heap_max]+1]=0,ze=he.heap_max+1;ze<i;ze++)ce<(be=j[2*j[2*(Ne=he.heap[ze])+1]+1]+1)&&(be=ce,ge++),j[2*Ne+1]=be,L<Ne||(he.bl_count[be]++,De=0,ie<=Ne&&(De=X[Ne-ie]),Oe=j[2*Ne],he.opt_len+=Oe*(be+De),K&&(he.static_len+=Oe*(J[2*Ne+1]+De)));if(ge!==0){do{for(be=ce-1;he.bl_count[be]===0;)be--;he.bl_count[be]--,he.bl_count[be+1]+=2,he.bl_count[ce]--,ge-=2}while(0<ge);for(be=ce;be!==0;be--)for(Ne=he.bl_count[be];Ne!==0;)L<(Fe=he.heap[--ze])||(j[2*Fe+1]!==be&&(he.opt_len+=(be-j[2*Fe+1])*j[2*Fe],j[2*Fe+1]=be),Ne--)}})(c,C),we(q,me,c.bl_count)}function e(c,C,W){var M,E,q=-1,re=C[1],V=0,se=7,me=4;for(re===0&&(se=138,me=3),C[2*(W+1)+1]=65535,M=0;M<=W;M++)E=re,re=C[2*(M+1)+1],++V<se&&E===re||(V<me?c.bl_tree[2*E]+=V:E!==0?(E!==q&&c.bl_tree[2*E]++,c.bl_tree[2*A]++):V<=10?c.bl_tree[2*k]++:c.bl_tree[2*T]++,q=E,me=(V=0)===re?(se=138,3):E===re?(se=6,3):(se=7,4))}function B(c,C,W){var M,E,q=-1,re=C[1],V=0,se=7,me=4;for(re===0&&(se=138,me=3),M=0;M<=W;M++)if(E=re,re=C[2*(M+1)+1],!(++V<se&&E===re)){if(V<me)for(;G(c,E,c.bl_tree),--V!=0;);else E!==0?(E!==q&&(G(c,E,c.bl_tree),V--),G(c,A,c.bl_tree),Y(c,V-3,2)):V<=10?(G(c,k,c.bl_tree),Y(c,V-3,3)):(G(c,T,c.bl_tree),Y(c,V-11,7));q=E,me=(V=0)===re?(se=138,3):E===re?(se=6,3):(se=7,4)}}d(H);var N=!1;function f(c,C,W,M){Y(c,(y<<1)+(M?1:0),3),(function(E,q,re,V){pe(E),Q(E,re),Q(E,~re),t.arraySet(E.pending_buf,E.window,q,re,E.pending),E.pending+=re})(c,C,W)}x._tr_init=function(c){N||((function(){var C,W,M,E,q,re=new Array(u+1);for(E=M=0;E<b-1;E++)for(U[E]=M,C=0;C<1<<D[E];C++)r[M++]=E;for(r[M-1]=E,E=q=0;E<16;E++)for(H[E]=q,C=0;C<1<<$[E];C++)P[q++]=E;for(q>>=7;E<s;E++)for(H[E]=q<<7,C=0;C<1<<$[E]-7;C++)P[256+q++]=E;for(W=0;W<=u;W++)re[W]=0;for(C=0;C<=143;)te[2*C+1]=8,C++,re[8]++;for(;C<=255;)te[2*C+1]=9,C++,re[9]++;for(;C<=279;)te[2*C+1]=7,C++,re[7]++;for(;C<=287;)te[2*C+1]=8,C++,re[8]++;for(we(te,v+1,re),C=0;C<s;C++)w[2*C+1]=5,w[2*C]=fe(C,5);oe=new ae(te,D,g+1,v,u),Z=new ae(w,$,0,s,u),le=new ae(new Array(0),F,0,p,h)})(),N=!0),c.l_desc=new I(c.dyn_ltree,oe),c.d_desc=new I(c.dyn_dtree,Z),c.bl_desc=new I(c.bl_tree,le),c.bi_buf=0,c.bi_valid=0,ue(c)},x._tr_stored_block=f,x._tr_flush_block=function(c,C,W,M){var E,q,re=0;0<c.level?(c.strm.data_type===2&&(c.strm.data_type=(function(V){var se,me=4093624447;for(se=0;se<=31;se++,me>>>=1)if(1&me&&V.dyn_ltree[2*se]!==0)return l;if(V.dyn_ltree[18]!==0||V.dyn_ltree[20]!==0||V.dyn_ltree[26]!==0)return n;for(se=32;se<g;se++)if(V.dyn_ltree[2*se]!==0)return n;return l})(c)),Ee(c,c.l_desc),Ee(c,c.d_desc),re=(function(V){var se;for(e(V,V.dyn_ltree,V.l_desc.max_code),e(V,V.dyn_dtree,V.d_desc.max_code),Ee(V,V.bl_desc),se=p-1;3<=se&&V.bl_tree[2*O[se]+1]===0;se--);return V.opt_len+=3*(se+1)+5+5+4,se})(c),E=c.opt_len+3+7>>>3,(q=c.static_len+3+7>>>3)<=E&&(E=q)):E=q=W+5,W+4<=E&&C!==-1?f(c,C,W,M):c.strategy===4||q===E?(Y(c,2+(M?1:0),3),Ae(c,te,w)):(Y(c,4+(M?1:0),3),(function(V,se,me,he){var je;for(Y(V,se-257,5),Y(V,me-1,5),Y(V,he-4,4),je=0;je<he;je++)Y(V,V.bl_tree[2*O[je]+1],3);B(V,V.dyn_ltree,se-1),B(V,V.dyn_dtree,me-1)})(c,c.l_desc.max_code+1,c.d_desc.max_code+1,re+1),Ae(c,c.dyn_ltree,c.dyn_dtree)),ue(c),M&&pe(c)},x._tr_tally=function(c,C,W){return c.pending_buf[c.d_buf+2*c.last_lit]=C>>>8&255,c.pending_buf[c.d_buf+2*c.last_lit+1]=255&C,c.pending_buf[c.l_buf+c.last_lit]=255&W,c.last_lit++,C===0?c.dyn_ltree[2*W]++:(c.matches++,C--,c.dyn_ltree[2*(r[W]+g+1)]++,c.dyn_dtree[2*S(C)]++),c.last_lit===c.lit_bufsize-1},x._tr_align=function(c){Y(c,2,3),G(c,_,te),(function(C){C.bi_valid===16?(Q(C,C.bi_buf),C.bi_buf=0,C.bi_valid=0):8<=C.bi_valid&&(C.pending_buf[C.pending++]=255&C.bi_buf,C.bi_buf>>=8,C.bi_valid-=8)})(c)}},{"../utils/common":41}],53:[function(m,R,x){R.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(m,R,x){(function(t){(function(l,n){if(!l.setImmediate){var d,y,b,g,v=1,s={},p=!1,i=l.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(l);u=u&&u.setTimeout?u:l,d={}.toString.call(l.process)==="[object process]"?function(A){process.nextTick(function(){h(A)})}:(function(){if(l.postMessage&&!l.importScripts){var A=!0,k=l.onmessage;return l.onmessage=function(){A=!1},l.postMessage("","*"),l.onmessage=k,A}})()?(g="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",_,!1):l.attachEvent("onmessage",_),function(A){l.postMessage(g+A,"*")}):l.MessageChannel?((b=new MessageChannel).port1.onmessage=function(A){h(A.data)},function(A){b.port2.postMessage(A)}):i&&"onreadystatechange"in i.createElement("script")?(y=i.documentElement,function(A){var k=i.createElement("script");k.onreadystatechange=function(){h(A),k.onreadystatechange=null,y.removeChild(k),k=null},y.appendChild(k)}):function(A){setTimeout(h,0,A)},u.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var k=new Array(arguments.length-1),T=0;T<k.length;T++)k[T]=arguments[T+1];var D={callback:A,args:k};return s[v]=D,d(v),v++},u.clearImmediate=o}function o(A){delete s[A]}function h(A){if(p)setTimeout(h,0,A);else{var k=s[A];if(k){p=!0;try{(function(T){var D=T.callback,$=T.args;switch($.length){case 0:D();break;case 1:D($[0]);break;case 2:D($[0],$[1]);break;case 3:D($[0],$[1],$[2]);break;default:D.apply(n,$)}})(k)}finally{o(A),p=!1}}}}function _(A){A.source===l&&typeof A.data=="string"&&A.data.indexOf(g)===0&&h(+A.data.slice(g.length))}})(typeof self>"u"?t===void 0?this:t:self)}).call(this,typeof We<"u"?We:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Ge)),Ge.exports}var Ft=zt();const Dt=at(Ft),Be=z=>{if(z==null||z===""||z===0||z==="0"||z==="Free"||z==="free"||z==="$0")return"Free";if(z&&typeof z=="object"){if(z.priceDetails){const ee=z.priceDetails;if(ee.isFree)return"Free";const m=ee.currency==="EUR"?"":ee.currency==="GBP"?"":"$";if(ee.discountedPrice!==void 0&&ee.basePrice!==void 0&&ee.discountedPrice<ee.basePrice)return`${m}${ee.discountedPrice.toFixed(2)}`;if(ee.basePrice!==void 0)return ee.basePrice===0?"Free":`${m}${ee.basePrice.toFixed(2)}`;if(ee.discountedPrice!==void 0)return ee.discountedPrice===0?"Free":`${m}${ee.discountedPrice.toFixed(2)}`}if(z.basePrice!==void 0){const ee=z.currency==="EUR"?"":z.currency==="GBP"?"":"$";return z.basePrice===0||z.isFree?"Free":z.discountedPrice!==void 0&&z.discountedPrice<z.basePrice?`${ee}${z.discountedPrice.toFixed(2)}`:`${ee}${z.basePrice.toFixed(2)}`}if(z.price!==void 0){const ee=parseFloat(z.price);return isNaN(ee)||ee===0?"Free":`$${ee.toFixed(2)}`}for(const ee in z)if(typeof z[ee]=="number"){const m=z[ee];return m===0?"Free":`$${m.toFixed(2)}`}}if(typeof z=="string"){if(z.toLowerCase()==="free")return"Free";if(z.startsWith("$")||z.startsWith("")||z.startsWith(""))return z;const ee=parseFloat(z.replace(/[^0-9.]/g,""));return isNaN(ee)?`$${z}`:ee===0?"Free":`$${ee.toFixed(2)}`}return typeof z=="number"?z===0?"Free":`$${z.toFixed(2)}`:"Price unavailable"},Pt=z=>{if(z===0)return"0 Bytes";const ee=1024,m=["Bytes","KB","MB","GB"],R=Math.floor(Math.log(z)/Math.log(ee));return parseFloat((z/Math.pow(ee,R)).toFixed(2))+" "+m[R]},Tt=(z,ee)=>z.endsWith(".json")||ee==="application/json"?a.jsx(st,{className:"file-icon json",title:"JSON File"}):z.endsWith(".txt")||ee==="text/plain"?a.jsx(Ve,{className:"file-icon txt",title:"Text File"}):z.endsWith(".pdf")||ee==="application/pdf"?a.jsx(_t,{className:"file-icon pdf",title:"PDF File"}):z.endsWith(".doc")||z.endsWith(".docx")||ee?.includes("word")?a.jsx(xt,{className:"file-icon doc",title:"Word Document"}):z.endsWith(".xls")||z.endsWith(".xlsx")||ee?.includes("excel")?a.jsx(kt,{className:"file-icon xls",title:"Excel File"}):z.endsWith(".zip")||z.endsWith(".rar")||ee?.includes("zip")?a.jsx(Ct,{className:"file-icon zip",title:"Archive File"}):z.endsWith(".png")||z.endsWith(".jpg")||z.endsWith(".jpeg")||ee?.includes("image")?a.jsx(St,{className:"file-icon image",title:"Image File"}):a.jsx(Ve,{className:"file-icon default",title:"File"}),Ot=z=>({Productivity:"#10B981",Business:"#3B82F6",Marketing:"#F59E0B",Analytics:"#8B5CF6",Communication:"#06B6D4",Content:"#EF4444","E-commerce":"#F97316",Social:"#EC4899",Development:"#6366F1",Design:"#84CC16",Automation:"#059669","AI/ML":"#7C3AED",Finance:"#DC2626",Healthcare:"#0891B2",Education:"#CA8A04"})[z]||"#6B7280",Xe=({rating:z,onRatingChange:ee,size:m="large",interactive:R=!1})=>{const x=Number(z)||0,t=m==="small"?"star-small":"star-large",l=n=>{R&&ee&&ee(n)};return a.jsx("div",{className:`star-rating ${R?"interactive":""}`,children:[1,2,3,4,5].map(n=>a.jsx("span",{onClick:()=>l(n),className:R?"star-clickable":"",style:{cursor:R?"pointer":"default"},children:n<=x?a.jsx(qe,{className:`star-filled ${t}-filled`}):a.jsx(gt,{className:`star-empty ${t}-empty`})},n))})},Bt=({agentId:z,initialLikes:ee=0,onLikeUpdate:m})=>{const{user:R}=ne.useContext(Je),{darkMode:x}=Qe(),[t,l]=ne.useState(!1),[n,d]=ne.useState(0),[y,b]=ne.useState(!1),[g,v]=ne.useState(!1);ne.useRef(null),ne.useEffect(()=>{Array.isArray(ee)?d(ee.length):typeof ee=="number"&&d(ee),R&&z?(async()=>{try{const h=localStorage.getItem("authToken");if(!R||!h){v(!0);return}if(Array.isArray(ee)){const k=ee.includes(R.uid)||ee.some(T=>typeof T=="object"&&T.userId===R.uid||T===R.uid);l(k),v(!0);return}try{const k=localStorage.getItem(`like_status_${z}`);if(k){const T=JSON.parse(k),D=T._cacheTime||0;if(Date.now()-D<3e5){l(T.liked||!1),T.likesCount!==void 0&&d(T.likesCount),v(!0);return}}}catch(k){console.warn("Error reading from like status cache:",k)}const _=await bt(z),A=_.liked||!1;l(A),_.likesCount!==void 0&&d(_.likesCount);try{localStorage.setItem(`like_status_${z}`,JSON.stringify({..._,_cacheTime:Date.now()}))}catch{}}catch(h){console.error("Error checking like status:",h),l(!1)}v(!0)})():v(!0)},[R,z]);const s=(o,h,_={})=>{const k={...{position:"bottom-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:x?"dark":"light",style:{background:x?"var(--background-card)":"#ffffff",color:x?"var(--text-primary)":"#333333",borderRadius:"12px",border:`1px solid ${x?"var(--border-color)":"#e2e8f0"}`,boxShadow:x?"var(--shadow-lg)":"0 10px 25px rgba(0, 0, 0, 0.15)",fontSize:"14px",fontWeight:"600",fontFamily:"var(--font-family)"}},..._};switch(o){case"success":de.success(h,k);break;case"error":de.error(h,k);break;case"warning":de.warning(h,k);break;case"info":de.info(h,k);break;default:de(h,k)}},p=()=>{de.dismiss(),de(({closeToast:o})=>a.jsxs("div",{className:"confirm-toast-container",children:[a.jsxs("div",{className:"confirm-toast-message",children:[a.jsx("span",{role:"img","aria-label":"question",children:""})," Remove your like from this amazing agent?"]}),a.jsxs("div",{className:"confirm-toast-actions",children:[a.jsx("button",{onClick:()=>{o(),i()},className:"confirm-toast-button confirm",children:"Yes, remove like"}),a.jsx("button",{onClick:()=>{o()},className:"confirm-toast-button cancel",children:"Keep it "})]})]}),{position:"bottom-right",autoClose:!1,closeOnClick:!1,draggable:!0,closeButton:!0,className:"confirm-unlike-toast",toastId:"unlike-confirmation"})},i=async()=>{if(!y){b(!0);try{const o=await It(z);if(o.success){const h=o.liked;l(h),o.likesCount!==void 0&&(d(o.likesCount),m&&m(o.likesCount)),h?de.success(" Awesome! You liked this agent!",{position:"bottom-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,icon:"",toastId:"like-added"}):de.success(" Removed your like",{position:"bottom-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,icon:"",toastId:"like-removed"})}else de.error(o.error||"Failed to update like",{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,icon:"",toastId:"like-error"})}catch(o){console.error("Error toggling like for agent:",o),de.error("Failed to update like",{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,icon:"",toastId:"like-error"})}finally{b(!1)}}},u=async()=>{if(!R){s("info"," Please sign in to like this agent",{icon:""});return}if(!(y||!g)){if(t){p();return}i()}};return a.jsxs("button",{className:`like-button ${t?"liked":""} ${y?"loading":""} ${x?"dark-mode":""}`,onClick:u,disabled:y||!g,title:t?"Remove like":"Like this agent",children:[t?a.jsx(rt,{className:"heart-icon"}):a.jsx(it,{className:"heart-icon"}),a.jsx("span",{className:"like-count",children:n})]})},Ut=({category:z,onClick:ee})=>a.jsxs("button",{className:"category-badge",style:{backgroundColor:Ot(z)},onClick:()=>ee&&ee(z),title:`Explore all ${z} agents`,children:[a.jsx(ft,{className:"category-icon"}),z]}),Lt=({businessValue:z,darkMode:ee})=>z?a.jsxs("div",{className:`business-value-section ${ee?"dark-mode":""} fade-in`,children:[a.jsxs("div",{className:"business-value-header",children:[a.jsx(vt,{className:"value-icon"}),a.jsx("h3",{children:"Why This Agent is Perfect for You"})]}),a.jsx("div",{className:"business-value-content",children:a.jsx("p",{children:z.replace(/"/g,"")})})]}):a.jsxs("div",{className:`business-value-section ${ee?"dark-mode":""} fade-in`,children:[a.jsxs("div",{className:"business-value-header",children:[a.jsx(Ye,{className:"value-icon"}),a.jsx("h3",{children:"Why Choose This Professional Solution?"})]}),a.jsx("div",{className:"business-value-content",children:a.jsx("p",{children:"This carefully crafted agent represents hours of expert development and testing. You're investing in a proven solution that delivers immediate value, saves precious time, and provides the competitive edge your business needs to succeed in today's fast-paced digital landscape."})})]}),Wt=({deliverables:z,darkMode:ee,isFreeAgent:m})=>!z||!Array.isArray(z)||z.length===0?a.jsxs("div",{className:`deliverables-section ${ee?"dark-mode":""} slide-in-right`,children:[a.jsxs("div",{className:"deliverables-header",children:[a.jsx(Ue,{className:"deliverables-icon"}),a.jsx("h3",{children:"What You'll Receive"})]}),a.jsxs("div",{className:"deliverables-list",children:[a.jsx("div",{className:"deliverable-item",children:a.jsx("div",{className:"deliverable-info",children:a.jsxs("div",{className:"deliverable-icon-name",children:[a.jsx(st,{className:"file-icon json"}),a.jsxs("div",{className:"deliverable-details",children:[a.jsx("h4",{className:"deliverable-filename",children:"Complete Agent Configuration"}),a.jsx("p",{className:"deliverable-description",children:"Fully configured and ready-to-use agent with optimized settings"}),a.jsx("span",{className:"deliverable-size",children:"Professional Setup"})]})]})})}),a.jsx("div",{className:"deliverable-item",children:a.jsx("div",{className:"deliverable-info",children:a.jsxs("div",{className:"deliverable-icon-name",children:[a.jsx(Ve,{className:"file-icon txt"}),a.jsxs("div",{className:"deliverable-details",children:[a.jsx("h4",{className:"deliverable-filename",children:"Implementation Guide"}),a.jsx("p",{className:"deliverable-description",children:"Step-by-step instructions for seamless integration"}),a.jsx("span",{className:"deliverable-size",children:"Quick Start"})]})]})})})]}),!m&&a.jsx("div",{className:"delivery-info",children:a.jsx("p",{className:"delivery-note",children:" All files will be delivered instantly to your email after purchase"})})]}):a.jsxs("div",{className:`deliverables-section ${ee?"dark-mode":""} slide-in-right`,children:[a.jsxs("div",{className:"deliverables-header",children:[a.jsx(Me,{className:"deliverables-icon"}),a.jsx("h3",{children:"What You Get"})]}),a.jsx("div",{className:"deliverables-list",children:z.map((R,x)=>a.jsx("div",{className:"deliverable-item",children:a.jsx("div",{className:"deliverable-info",children:a.jsxs("div",{className:"deliverable-icon-name",children:[Tt(R.fileName,R.contentType),a.jsxs("div",{className:"deliverable-details",children:[a.jsx("h4",{className:"deliverable-filename",children:R.fileName}),a.jsx("p",{className:"deliverable-description",children:R.description}),a.jsx("span",{className:"deliverable-size",children:Pt(R.size)})]})]})})},x))}),!m&&a.jsx("div",{className:"delivery-info",children:a.jsx("p",{className:"delivery-note",children:" Files will be sent to your email after successful payment"})})]}),$t=({darkMode:z})=>a.jsxs("div",{className:"description-intro",children:[a.jsxs("h3",{children:[a.jsx(nt,{}),"Premium AI Solution"]}),a.jsx("p",{children:"This agent has been carefully crafted and optimized for real-world applications. Built with industry best practices and designed to deliver consistent, reliable results for professionals who demand excellence."})]}),Mt=({user:z,darkMode:ee})=>a.jsxs("div",{className:"no-reviews-encouragement",children:[a.jsx("h3",{className:"encouragement-title",children:"Be the First to Share Your Experience!"}),a.jsx("p",{className:"encouragement-text",children:"This amazing agent is waiting for its first review. Your feedback helps other users discover great solutions and helps us improve our offerings."}),z?a.jsxs("button",{className:"encouragement-cta",children:[a.jsx(Ke,{style:{marginRight:"8px"}}),"Write the First Review"]}):a.jsxs("div",{className:"auth-prompt-buttons",style:{gap:"12px",marginTop:"16px"},children:[a.jsx("button",{className:"signin-button",onClick:()=>{typeof window.openSignInModal=="function"?window.openSignInModal():document.dispatchEvent(new CustomEvent("open-signin-modal"))},children:"Sign In to Review"}),a.jsx("button",{className:"signup-button",onClick:()=>{typeof window.openSignUpModal=="function"?window.openSignUpModal():document.dispatchEvent(new CustomEvent("open-signup-modal"))},children:"Sign Up & Review"})]})]}),Zt=({agentId:z,existingReviews:ee=[],onReviewsLoaded:m,skipExternalFetch:R=!1,onReviewAdded:x=()=>{},onReviewDeleted:t=()=>{}})=>{const[l,n]=ne.useState([]),[d,y]=ne.useState(""),[b,g]=ne.useState(5),[v,s]=ne.useState(null),[p,i]=ne.useState(!1),[u,o]=ne.useState(!0),[h,_]=ne.useState(!1),[A,k]=ne.useState(!1),[T,D]=ne.useState(!1),[$,F]=ne.useState(""),{user:O}=ne.useContext(Je),{darkMode:te}=Qe(),[w,P]=ne.useState(!1),[r,U]=ne.useState(!1),oe=ne.useMemo(()=>O?O.roles?.includes("admin")||O.isAdmin||O.role==="admin"||O.email?.endsWith("@aiwaverider.com")||O.uid==="0pYyiwNXvSZdoRa1Smgj3sWWYsg1":!1,[O]);ne.useEffect(()=>((async()=>{try{if(o(!0),ee&&Array.isArray(ee)){const Q=[...ee].sort((Y,G)=>new Date(G.createdAt||0)-new Date(Y.createdAt||0));n(Q),m&&m(Q.length),O&&_(!!Q.find(Y=>Y.userId===O.uid))}else n([]),m&&m(0)}catch(Q){console.error("Error processing comments:",Q),s("Failed to load comments")}finally{o(!1)}})(),()=>{}),[z,O,ee,m]),ne.useEffect(()=>{U(!!O)},[O,r]),ne.useEffect(()=>{if(!O){k(!1),D(!0),F("Please sign in to share your experience");return}if(O.roles?.includes("admin")||O.isAdmin||O.role==="admin"||O.email?.endsWith("@aiwaverider.com")||O.uid==="0pYyiwNXvSZdoRa1Smgj3sWWYsg1"){k(!0),D(!0),F("Admin user");return}if(ee&&Array.isArray(ee)&&ee.some(Y=>Y.userId===O.uid)){k(!1),D(!0),F("You have already reviewed this agent");return}try{const Q=`agent_download_${z}_${O.uid}`;if(localStorage.getItem(Q)){k(!0),D(!0),F("You have downloaded this agent");return}}catch{}k(!1),D(!0),F("Only users who downloaded or purchased can review")},[O,z,ee]);const Z=async S=>{if(S&&typeof S.preventDefault=="function"&&S.preventDefault(),!O){s("Please sign in to leave a review");return}if(!d.trim()){s("Please share your thoughts about this agent");return}i(!0),s("");try{const Q=await jt(z,{content:d.trim(),rating:b});if(!Q?.success){const fe=Q?.error||"Failed to add review";s(fe),de.error(fe,{position:"bottom-right"});return}const Y=Q.review||{id:Q.reviewId||`temp-${Date.now()}`,content:d.trim(),rating:b,createdAt:new Date().toISOString(),userId:O.uid,userName:O.displayName||O.email?.split("@")[0]||"User"};n(fe=>[...fe,Y].sort((ue,pe)=>new Date(pe.createdAt||0)-new Date(ue.createdAt||0)));const G=Le.getState().addReviewToAgent;G(z,Y),x(Y,Q.reviewCount,Q.averageRating),m&&m(Q.reviewCount||l.length+1),y(""),g(5),_(!0),de.success("Thank you for your review!",{position:"bottom-right"})}catch(Q){console.error("Error adding comment:",Q),s("An error occurred while adding your review"),de.error("An error occurred while adding your review",{position:"bottom-right"})}finally{i(!1)}},le=S=>{try{return new Date(S).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch(Q){return console.error("Error formatting date:",Q),"Invalid date"}},H=async S=>{const Q=Le.getState().removeReviewFromAgent;if(!oe){de.error("Only admins can delete reviews",{position:"bottom-right",autoClose:3e3,icon:""});return}if(window.confirm("Are you sure you want to delete this review?")){P(!0);try{const Y=await Nt(z,S);if(!Y?.success){const G=Y?.status??0;G===404?(de.info("Review not found. It might have been deleted already.",{position:"bottom-right"}),n(fe=>fe.filter(we=>we.id!==S&&we._id!==S)),Q(z,S)):G===400?de.error("Bad request while deleting review.",{position:"bottom-right"}):G===401?de.error("You must be signed in to delete reviews.",{position:"bottom-right"}):G===403?de.error("You are not allowed to delete this review.",{position:"bottom-right"}):de.error(Y?.error||"Failed to delete review",{position:"bottom-right"}),P(!1);return}n(G=>G.filter(fe=>fe.id!==S&&fe._id!==S)),Q(z,S),t(S,Y.reviewCount,Y.averageRating),m&&m(Y.reviewCount??Math.max(0,l.length-1)),de.success("Review deleted",{position:"bottom-right"})}catch(Y){console.error("Error deleting comment:",Y),de.error("An unexpected error occurred while deleting the review",{position:"bottom-right"})}finally{P(!1)}}},ae=()=>a.jsx("div",{className:`eligibility-prompt ${te?"dark-mode":""}`,children:a.jsxs("div",{className:`eligibility-prompt-content ${te?"dark-bg":""}`,children:[a.jsx("div",{className:"eligibility-prompt-icon",children:a.jsx(At,{className:`comment-icon ${te?"text-gray-300":""}`})}),a.jsx("h3",{children:"Want to Share Your Experience?"}),a.jsx("p",{children:$}),a.jsx("p",{children:"We value authentic feedback from users who have actually used our agents. This ensures high-quality reviews for everyone!"})]})}),I=()=>a.jsx("div",{className:`auth-prompt ${te?"dark-mode":""}`,children:a.jsxs("div",{className:`auth-prompt-content ${te?"dark-bg":""}`,children:[a.jsx("div",{className:"auth-prompt-icon",children:a.jsx(Et,{className:`comment-icon ${te?"text-gray-300":""}`})}),a.jsx("h3",{children:"Join the Community!"}),a.jsx("p",{children:"Sign in to share your experience and help others discover amazing AI agents."}),a.jsx("div",{className:"auth-prompt-buttons",style:{justifyContent:"center"},children:a.jsx("button",{className:`auth-button signup-button ${te?"dark-button":""}`,onClick:()=>{typeof window.openSignUpModal=="function"?window.openSignUpModal():document.dispatchEvent(new CustomEvent("open-signup-modal"))},style:{whiteSpace:"nowrap",padding:"0.5rem 1rem",display:"inline-flex",alignItems:"center",justifyContent:"center"},children:"Sign In / Sign Up"})})]})});return a.jsxs("div",{className:`comments-section ${te?"dark-mode":""}`,children:[a.jsx("h3",{className:`section-heading ${te?"text-gray-200":"text-gray-800"}`,children:"Reviews & Ratings"}),O&&!h&&A?a.jsxs("form",{onSubmit:Z,className:"comment-form",children:[a.jsxs("div",{className:"rating-input",children:[a.jsx("label",{className:te?"text-white font-medium":"text-gray-700",children:"Your Rating:"}),a.jsx(Xe,{rating:b,onRatingChange:g,interactive:!0})]}),a.jsx("textarea",{value:d,onChange:S=>y(S.target.value),placeholder:"Share your experience with this agent... What did you love about it? How did it help you?",className:`comment-textarea ${te?"dark-input":""}`,rows:4}),v&&a.jsx("div",{className:"comment-error",children:v}),a.jsx("button",{type:"submit",className:"submit-comment-btn",disabled:p,children:p?"Submitting Your Review...":"Share Your Review "})]}):O&&h?a.jsx("div",{className:`already-reviewed-message ${te?"text-gray-300":"text-gray-700"}`,children:a.jsx("p",{className:`section-heading-paragraph ${te?"text-gray-300":"text-gray-700"}`,children:" Thank you for your valuable feedback! You've already shared your experience with this agent."})}):O&&T&&!A?a.jsx(ae,{}):a.jsx(I,{}),a.jsx("div",{className:"comments-list",children:u?a.jsx("div",{className:`loading-comments ${te?"text-gray-300":"text-gray-700"}`,children:"Loading reviews... "}):l.length>0?l.map(S=>a.jsxs("div",{className:`comment-item ${te?"dark-mode":""}`,children:[a.jsxs("div",{className:"comment-header",children:[a.jsxs("div",{className:"comment-user",children:[a.jsxs("span",{className:`user-name ${te?"text-gray-200":""}`,children:[S.userName||"Anonymous",S.verificationStatus==="verified_purchase"&&" ",S.verificationStatus==="verified_download"&&" "]}),a.jsx("span",{className:`comment-date ${te?"text-gray-400":""}`,children:le(S.createdAt)})]}),a.jsxs("div",{className:"rating-actions",children:[a.jsx(Xe,{rating:S.rating,size:"small"}),oe&&a.jsx("button",{className:"delete-review-btn",onClick:()=>H(S.id),disabled:w,title:"Delete review",style:{marginLeft:"12px",padding:"4px 8px",background:"var(--error-color)",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:a.jsx(yt,{className:"delete-icon"})})]})]}),a.jsx("div",{className:`comment-content ${te?"text-gray-300":""}`,children:S.content})]},S.id)):a.jsx(Mt,{user:O,darkMode:te})})]})},qt=()=>{const{agentId:z}=ot(),ee=lt(),{user:m}=ne.useContext(Je),{darkMode:R}=Qe(),{addToCart:x}=ct(),[t,l]=ne.useState(null),[n,d]=ne.useState(!0),[y,b]=ne.useState(null),[g,v]=ne.useState(!1),[s,p]=ne.useState(!1),[i,u]=ne.useState("overview"),[o,h]=ne.useState(""),[_,A]=ne.useState(0),[k,T]=ne.useState(""),[D,$]=ne.useState(0),[F,O]=ne.useState(!1),[te,w]=ne.useState(null),[P,r]=ne.useState(0),[U,oe]=ne.useState(0),[Z,le]=ne.useState(!1);ne.useRef(null);const H=ne.useRef(!1),ae=ne.useRef(0),{allAgents:I,isStoreLoading:S,loadInitialData:Q,setAllAgents:Y}=Le(),G=ne.useRef(null),fe=ne.useRef(null),we=j=>{if(!j||j.priceDetails&&(j.priceDetails.isFree===!0||j.priceDetails.basePrice===0)||j.isFree===!0||j.price===0||j.price==="0"||j.price==="Free"||j.price==="free"||j.price==="$0"||j.price===void 0||j.price===null||j.price===""||typeof j.price=="string"&&(j.price.toLowerCase().includes("free")||j.price==="$0"||j.price==="0"||j.price.trim()==="")||j.priceDetails&&(j.priceDetails.basePrice===0||j.priceDetails.basePrice==="0"||j.priceDetails.basePrice===void 0||j.priceDetails.discountedPrice===0||j.priceDetails.discountedPrice==="0"))return!0;if(typeof j.price=="object"){const L=j.price;if(L.basePrice===0||L.basePrice==="0"||L.basePrice===void 0||L.amount===0||L.amount==="0"||L.value===0||L.value==="0")return!0}return!1},ue=j=>{ee(`/agents?category=${encodeURIComponent(j)}`)},pe=ne.useMemo(()=>t?t.title||t.name||"Professional AI Agent":"",[t]),ke=ne.useMemo(()=>t?t.description||"A powerful AI agent designed to streamline your workflow and boost productivity.":"",[t]);ne.useMemo(()=>{if(!t)return"Price unavailable";if(we(t))return"Free";if(t.priceDetails){const{basePrice:j,discountedPrice:L,currency:J}=t.priceDetails,K=J==="EUR"?"":J==="GBP"?"":"$";if(L!==void 0&&L<j)return`${K}${L.toFixed(2)} (was ${K}${j.toFixed(2)})`;if(j!==void 0)return`${K}${j.toFixed(2)}`}return Be(t.price)},[t]);const ye=ne.useMemo(()=>t?t.rating&&t.rating.average?typeof t.rating.average=="number"?t.rating.average:parseFloat(t.rating.average)||0:t.reviews&&Array.isArray(t.reviews)&&t.reviews.length>0?t.reviews.reduce((L,J)=>{const K=parseFloat(J.rating)||0;return L+K},0)/t.reviews.length:0:0,[t]);ne.useMemo(()=>ye.toFixed(1),[ye]);const Ae=ne.useMemo(()=>t?t.categories&&Array.isArray(t.categories)?t.categories:t.category&&typeof t.category=="string"?[t.category]:["AI/ML"]:[],[t]),Ee=ne.useMemo(()=>t?t.businessValue||"This professionally crafted AI agent delivers exceptional value through cutting-edge automation and intelligent optimization, designed to transform your workflow efficiency and drive measurable results.":null,[t]),e=ne.useMemo(()=>t?t.deliverables||[]:[],[t]),B=2,N=(j,L,J={})=>{const X={...{position:"bottom-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:R?"dark":"light",style:{background:R?"var(--background-card)":"#ffffff",color:R?"var(--text-primary)":"#333333",borderRadius:"12px",border:`1px solid ${R?"var(--border-color)":"#e2e8f0"}`,boxShadow:R?"var(--shadow-lg)":"0 10px 25px rgba(0, 0, 0, 0.15)",fontSize:"14px",fontWeight:"600",fontFamily:"var(--font-family)"}},...J};switch(j){case"success":de.success(L,X);break;case"error":de.error(L,X);break;case"warning":de.warning(L,X);break;case"info":de.info(L,X);break;default:de(L,X)}},f=(j,L,J,K)=>{},c=ne.useRef(!1),C=ne.useRef(!1);ne.useEffect(()=>{if(Z||!z||ae.current>=B||c.current)return;c.current=!0,(!I||I.length===0)&&!S&&(ae.current>0||!z)&&Q(!1).catch(J=>{console.error("Failed to load initial store data:",J)}),(async()=>{try{if(d(!0),b(null),await new Promise(ie=>setTimeout(ie,300)),!z){b("Invalid agent ID provided."),d(!1);return}if(I&&Array.isArray(I)&&I.length>0){const ie=I.find(ce=>ce.id===z||ce._id===z);if(ie&&!ae.current){const ce=ie.reviews&&Array.isArray(ie.reviews)&&ie.reviews.length>0;l(ie),ie.likes&&(Array.isArray(ie.likes)?r(ie.likes.length):typeof ie.likes=="number"&&r(ie.likes)),ce&&(oe(ie.reviews.length),H.current=!0),$(ie.downloadCount||0),v(ie.isWishlisted||!1),ie.priceDetails&&ie.priceDetails.basePrice!==void 0?h(ie.priceDetails.basePrice.toString()):typeof ie.price=="number"?h(ie.price.toString()):typeof ie.price=="string"&&!isNaN(parseFloat(ie.price))?h(parseFloat(ie.price).toString()):h("0"),f(z,l,r,$),d(!1),le(!0);return}}const L=new AbortController,J=setTimeout(()=>{L.abort("Initial load timeout"),b("Request timed out. Please try again later."),d(!1),le(!0)},1e4);ae.current+=1;let K;try{await new Promise(ce=>setTimeout(ce,300)),C.current&&await new Promise(ce=>setTimeout(ce,500)),C.current=!0;const ie=window.location.search.includes("refresh=true");if(K=await Ze(z,{signal:L.signal,skipCache:!0,includeReviews:!!m,timestamp:Date.now()}),K){const ce=Le.getState().updateAgentReviews;K.reviews&&Array.isArray(K.reviews)&&(ce(z,K.reviews),H.current=!0,localStorage.setItem(`last_reviews_fetch_${z}`,Date.now().toString()))}C.current=!1,clearTimeout(J)}catch(ie){console.error("Error fetching agent data:",ie),clearTimeout(J),C.current=!1,ie.name==="AbortError"?b("Request timed out. Please try again later."):err.response&&err.response.status===400?b("Invalid agent ID. Please check the URL and try again."):ie.message&&ie.message.includes("Network")?(b("Network error. Please check your connection and try again."),de.error("Network error while loading agent. Please try again.",{position:"bottom-right"})):(b("There was a problem loading this product. Please try again later."),de.error("Unexpected error while loading agent.",{position:"bottom-right"})),d(!1),le(!0);return}if(!K)throw new Error("No agent data returned from API");try{localStorage.setItem(`agent_${z}`,JSON.stringify(K)),(I||[]).find(ce=>ce.id===z||ce._id===z)||Y([...I||[],K])}catch(ie){console.warn("Failed to cache agent data:",ie)}const X={...K,title:K.title||K.name||"Professional AI Agent",description:K.description||"A powerful AI solution designed to enhance your productivity and streamline complex workflows.",price:K.price!==void 0?K.price:"Contact for pricing",creator:K.creator||{name:"AI Waverider Team"},downloadCount:K.downloadCount||0,categories:K.categories||(K.category?[K.category]:["AI/ML"]),businessValue:K.businessValue||"This professionally crafted AI agent delivers exceptional value through cutting-edge automation and intelligent optimization."};if(K.priceDetails)X.priceDetails={...K.priceDetails,basePrice:typeof K.priceDetails.basePrice=="number"?K.priceDetails.basePrice:parseFloat(K.priceDetails.basePrice)||0,discountedPrice:typeof K.priceDetails.discountedPrice=="number"?K.priceDetails.discountedPrice:parseFloat(K.priceDetails.discountedPrice)||null,currency:K.priceDetails.currency||"USD"};else if(typeof K.price=="number"||typeof K.price=="string"&&!isNaN(parseFloat(K.price))){const ie=typeof K.price=="number"?K.price:parseFloat(K.price);X.priceDetails={basePrice:ie,discountedPrice:ie,currency:"USD"}}!X.imageUrl&&X.image&&X.image.url?X.imageUrl=X.image.url:!X.imageUrl&&X.images&&X.images.length>0?X.imageUrl=X.images[0]:!X.imageUrl&&X.iconUrl?X.imageUrl=X.iconUrl:X.imageUrl||(X.imageUrl=`data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="300" viewBox="0 0 400 300"%3E%3Cdefs%3E%3ClinearGradient id="grad" x1="0%25" y1="0%25" x2="100%25" y2="100%25"%3E%3Cstop offset="0%25" style="stop-color:%23667eea;stop-opacity:1" /%3E%3Cstop offset="100%25" style="stop-color:%23764ba2;stop-opacity:1" /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width="400" height="300" fill="url(%23grad)"/%3E%3Ctext x="200" y="150" font-family="Arial" font-size="18" text-anchor="middle" fill="white" font-weight="bold"%3E${encodeURIComponent(X.title)}%3C/text%3E%3C/svg%3E`),(!X.images||!Array.isArray(X.images))&&(X.images=[]),X.imageUrl&&!X.images.includes(X.imageUrl)&&X.images.unshift(X.imageUrl),X.gallery&&Array.isArray(X.gallery)&&X.gallery.forEach(ie=>{const ce=typeof ie=="string"?ie:ie&&ie.url;ce&&!X.images.includes(ce)&&X.images.push(ce)}),X.iconUrl&&!X.images.includes(X.iconUrl)&&X.images.push(X.iconUrl),l(X),X.reviews&&Array.isArray(X.reviews)&&oe(X.reviews.length),X.likes&&(Array.isArray(X.likes)?r(X.likes.length):typeof X.likes=="number"&&r(X.likes)),$(X.downloadCount||0),X.priceDetails&&X.priceDetails.basePrice!==void 0?h(X.priceDetails.basePrice.toString()):typeof X.price=="number"?h(X.price.toString()):typeof X.price=="string"&&!isNaN(parseFloat(X.price))?h(parseFloat(X.price).toString()):h("0"),v(X.isWishlisted||!1),f(z,l,r,$),d(!1),le(!0),c.current=!1}catch(L){if(console.error("Error loading agent:",L),c.current=!1,L.name==="AbortError"||L.message&&L.message.includes("aborted"))try{const J=await Ze(z,{skipCache:!1,forceCache:!0});if(J){l(J),d(!1),le(!0),c.current=!1,f(z,l,r,$);return}}catch(J){console.error("Failed to load from cache after abort:",J)}L.response&&L.response.status===404?b(`Agent with ID "${z}" not found. It may have been removed or doesn't exist.`):L.response&&L.response.status===400?b("Invalid agent ID. Please check the URL and try again."):L.message&&L.message.includes("Network")?(b("Network error. Please check your connection and try again."),de.error("Network error while loading agent. Please try again.",{position:"bottom-right"})):(b("There was a problem loading this product. Please try again later."),de.error("Unexpected error while loading agent.",{position:"bottom-right"})),d(!1),le(!0),c.current=!1,C.current=!1,N("error",`Error loading agent: ${L.message||"Unknown error"}`,{icon:""})}})(),z&&!F&&O(!0)},[z,F]),ne.useEffect(()=>{let j=0;const L=3;let J=null,K=!0;const X=()=>{document.hidden?K=!1:K=!0};document.addEventListener("visibilitychange",X);const ie=async()=>{if(!K)return;if(j>=L){J&&clearInterval(J);return}const ce="backend_error_until",ge=parseInt(localStorage.getItem(ce)||"0"),xe=Date.now();if(!(ge>xe))try{const _e=new AbortController;let Ce=null;try{Ce=setTimeout(()=>{_e.abort("Timeout")},15e3);const Ie=parseInt(localStorage.getItem(`last_poll_${z}`))||0,Re=xe-Ie>3600*1e3;Re&&localStorage.setItem(`last_poll_${z}`,xe.toString());const ve=await Ze(z,{skipCache:Re,includeReviews:!1,signal:_e.signal});if(j=0,!ve){console.warn("No agent data returned from API");return}l(Se=>Se&&{...Se,...ve,imageUrl:ve.imageUrl||Se.imageUrl,images:ve.images&&ve.images.length>0?ve.images:Se.images,likes:ve.likes||Se.likes,rating:ve.rating||Se.rating,downloadCount:ve.downloadCount||Se.downloadCount,reviews:ve.reviews&&ve.reviews.length>0?ve.reviews:Se.reviews}),ve.likes&&(Array.isArray(ve.likes)?r(ve.likes.length):typeof ve.likes=="number"&&r(ve.likes)),ve.downloadCount&&$(ve.downloadCount)}finally{Ce&&clearTimeout(Ce)}}catch(_e){j++,_e.name==="AbortError"||_e.code==="ERR_CANCELED"||_e.message&&(_e.message.includes("aborted")||_e.message.includes("canceled"))||_e.code==="ERR_NETWORK"||(_e.response&&_e.response.status===404?(console.error("Agent not found (404) - stopping periodic updates"),J&&clearInterval(J)):_e.response&&_e.response.status===500?(console.error("Server error (500) during agent poll - pausing polls temporarily"),localStorage.setItem(ce,(xe+600*1e3).toString())):console.error("Error polling agent data:",_e))}};return setTimeout(ie,1e3),J=setInterval(ie,3600*1e3),()=>{document.removeEventListener("visibilitychange",X),J&&clearInterval(J)}},[z]),ne.useEffect(()=>{if(!z||n)return;Le.getState().updateAgentReviews,(async()=>{try{H.current=!0,sessionStorage.getItem(`last_active_tab_${z}`)!==i&&i==="reviews"&&sessionStorage.setItem(`last_active_tab_${z}`,i),t&&t.reviews&&Array.isArray(t.reviews)?(oe(t.reviews.length),localStorage.setItem(`last_reviews_fetch_${z}`,Date.now().toString())):t&&(oe(0),t.reviews||l(J=>J&&{...J,reviews:[],rating:{average:0,count:0}}),localStorage.setItem(`last_reviews_fetch_${z}`,Date.now().toString()))}catch(L){console.error("Error processing reviews:",L)}})()},[z,n,i,m]);const W=async()=>{if(!m){de.error(" Please sign in to save your favorite agents to wishlist",{icon:""});return}try{const j=await wt(z);j.success?(v(j.isInWishlist),de.success(j.isInWishlist?" Added to your wishlist - find it in your profile!":" Removed from your wishlist",{icon:j.isInWishlist?"":""})):(console.error("Error updating wishlist:",j.error),de.error("Error updating wishlist. Please try again later.",{icon:""}))}catch(j){console.error("Error updating wishlist:",j),de.error("Error updating wishlist. Please try again later.",{icon:""})}},M=()=>{const j=window.location.href;navigator.clipboard.writeText(j).then(()=>{T("Link copied!"),N("success"," Link copied! Share this amazing agent with others!",{icon:"",autoClose:2e3}),setTimeout(()=>T(""),2e3)}).catch(L=>{console.error("Could not copy link:",L),N("error"," Could not copy link",{icon:""})})},E=j=>{if(we(j))return a.jsxs("div",{className:"price-value-container free",children:[a.jsx(mt,{className:"price-check"}),a.jsx("span",{className:"price-value free",children:"Free"})]});if(j.priceDetails){const{basePrice:L,discountedPrice:J,currency:K}=j.priceDetails,X=K==="EUR"?"":"$";if(J!==void 0&&J<L)return a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"price-value discount-price",children:[X,J.toFixed(2)]}),a.jsxs("span",{className:"original-price",children:[X,L.toFixed(2)]}),a.jsxs("span",{className:"discount-badge",children:[Math.round((1-J/L)*100),"% OFF"]})]});if(L!==void 0)return a.jsxs("span",{className:"price-value",children:[X,L.toFixed(2)]})}return a.jsx("span",{className:"price-value",children:Be(j.price)})},q=()=>{const j=be();return(parseFloat(o)||0)>=j},re=j=>j==null?"0.0":typeof j=="string"?j:typeof j=="number"?j.toFixed(1):"0.0",V=()=>t?t.fileType==="pdf"||t.fileDetails&&t.fileDetails.type==="pdf"?` ${t.fileDetails?.pageCount||t.pageCount||50} pages (PDF)`:t.fileType==="audio"||t.fileDetails&&t.fileDetails.type==="audio"?` ${t.fileDetails?.duration||t.duration||"30 mins"} (Audio)`:t.fileType==="video"||t.fileDetails&&t.fileDetails.type==="video"?` ${t.fileDetails?.duration||t.duration||"15 mins"} (Video)`:t.fileType==="template"||t.fileDetails&&t.fileDetails.type==="template"?" Ready-to-use template":" Premium digital solution":null,se=()=>{if(!t)return[null];const j=[];if(t.image&&typeof t.image=="object"&&t.image.url&&!j.includes(t.image.url)&&j.push(t.image.url),t.iconUrl&&!j.includes(t.iconUrl)&&j.push(t.iconUrl),j.length===0){const J=t.title||t.name||"Professional AI Agent",K=`data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="300" viewBox="0 0 400 300"%3E%3Cdefs%3E%3ClinearGradient id="grad" x1="0%25" y1="0%25" x2="100%25" y2="100%25"%3E%3Cstop offset="0%25" style="stop-color:%23667eea;stop-opacity:1" /%3E%3Cstop offset="100%25" style="stop-color:%23764ba2;stop-opacity:1" /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width="400" height="300" fill="url(%23grad)"/%3E%3Ctext x="200" y="150" font-family="Arial" font-size="18" text-anchor="middle" fill="white" font-weight="bold"%3E${encodeURIComponent(J)}%3C/text%3E%3C/svg%3E`;j.push(K)}return[...new Set(j)]},me=()=>{if(!q()){N("warning"," Please enter a valid price amount",{icon:""});return}try{const j={id:t.id,title:t.title,price:parseFloat(o),imageUrl:t.imageUrl||se()[0],quantity:1};x(j),de.success(" Added to cart! Ready to unlock this amazing agent!",{autoClose:3e3,position:"bottom-right",theme:R?"dark":"light",style:{background:R?"var(--background-card)":"#ffffff",color:R?"var(--text-primary)":"#333333",borderRadius:"12px",border:`1px solid ${R?"var(--border-color)":"#e2e8f0"}`,boxShadow:R?"var(--shadow-lg)":"0 10px 25px rgba(0, 0, 0, 0.15)",fontSize:"14px",fontWeight:"600",fontFamily:"var(--font-family)"}})}catch(j){console.error("Error adding to cart:",j),N("error"," Could not add item to cart. Please try again.",{icon:""})}},he=()=>{if(fe.current){const{naturalWidth:j,naturalHeight:L}=fe.current,J=j/L;w(J<1?"portrait":"landscape")}},je=j=>{r(j),l(L=>L&&{...L,likes:typeof L.likes=="number"?j:Array.isArray(L.likes)?[...Array(j)].map(()=>({})):j})},ze=()=>{de.dismiss(),de(({closeToast:j})=>a.jsxs("div",{className:"signin-required-toast",children:[a.jsxs("div",{className:"signin-header",children:[a.jsx("span",{role:"img","aria-label":"signin",children:""}),a.jsx("h4",{children:"Sign in to Download"})]}),a.jsxs("div",{className:"signin-message",children:[a.jsx("p",{children:"Please sign in to download this amazing free agent!"}),a.jsx("p",{children:"Join thousands of users who are already using our AI agents."})]}),a.jsxs("div",{className:"signin-actions",children:[a.jsxs("button",{className:"signin-toast-button signin-btn",onClick:()=>{j(),typeof window.openSignInModal=="function"?window.openSignInModal():document.dispatchEvent(new CustomEvent("open-signin-modal"))},children:[a.jsx("span",{role:"img","aria-label":"signin",children:""}),"Sign In"]}),a.jsxs("button",{className:"signin-toast-button signup-btn",onClick:()=>{j(),typeof window.openSignUpModal=="function"?window.openSignUpModal():document.dispatchEvent(new CustomEvent("open-signup-modal"))},children:[a.jsx("span",{role:"img","aria-label":"signup",children:""}),"Sign Up"]})]}),a.jsx("div",{className:"signin-note",children:a.jsx("small",{children:" Free to join  Instant access  No credit card required"})})]}),{position:"bottom-center",autoClose:!1,closeOnClick:!1,draggable:!0,closeButton:!0,className:"signin-required-toast",toastId:"signin-required"})},Ne=async(j,L,J)=>{try{const K=new Dt;if(J&&J.jsonFileContent)try{const ge=t.jsonFile?.originalName||"workflow.json";K.file(ge,J.jsonFileContent)}catch(ge){console.warn("[ZIP] Error adding JSON from response:",ge.message)}else if(console.warn("[ZIP] No JSON file content available in free-download response"),j)try{const ge=`/api/agents/${encodeURIComponent(z)}/download?url=${encodeURIComponent(j)}`,xe=await fetch(ge,{method:"GET",mode:"cors",credentials:"omit"});if(xe.ok){const _e=await xe.text(),Ce=t.jsonFile?.originalName||"workflow.json";K.file(Ce,_e)}else console.warn(`[ZIP] Proxy fallback failed: ${xe.status} ${xe.statusText}`)}catch(ge){console.warn("[ZIP] Proxy fallback error:",ge.message)}if(t.deliverables&&Array.isArray(t.deliverables))for(let ge=0;ge<t.deliverables.length;ge++){const xe=t.deliverables[ge];if(xe.fileName&&xe.fileName.endsWith(".txt"))try{const _e=`# ${t.title||z} - Setup Guide

${xe.description||"Step-by-step installation and configuration instructions"}

## Prerequisites
- n8n instance (self-hosted or cloud)
- Required credentials configured in n8n
- Basic understanding of n8n workflows

## Installation Steps
1. Import the JSON workflow file into your n8n instance
2. Configure the required credentials in n8n
3. Test the workflow with sample data
4. Set up any necessary webhooks or triggers
5. Deploy the workflow for production use

## Configuration
- Review all nodes in the workflow
- Update any hardcoded values as needed
- Test each step individually before running the full workflow

## Support
If you need help, please contact support@aiwaverider.com

Generated on: ${new Date().toISOString()}
`;K.file(xe.fileName,_e)}catch(_e){console.warn(`[ZIP] Failed to add deliverable ${xe.fileName}:`,_e.message)}}const X=await K.generateAsync({type:"blob"}),ie=window.URL.createObjectURL(X),ce=document.createElement("a");ce.href=ie,ce.download=`${z}.zip`,ce.style.display="none",document.body.appendChild(ce),ce.click(),setTimeout(()=>{document.body.contains(ce)&&document.body.removeChild(ce),window.URL.revokeObjectURL(ie)},100),N("success"," Download completed! Check your downloads folder for the ZIP file.",{autoClose:4e3})}catch(K){console.error("[ZIP] ZIP creation failed:",K);try{await navigator.clipboard.writeText(j),N("warning"," Download URL copied to clipboard. Paste it in a new tab to download.",{autoClose:8e3})}catch{N("error"," Download failed. Please try again or contact support.",{autoClose:5e3})}}},Fe=async()=>{if(!m){ze();return}try{d(!0);const j=await pt(z);if(j.success){if(j.agent){l(J=>({...J,...j.agent,images:J.images||[],imageUrl:j.agent.imageUrl||J.imageUrl,downloadCount:j.agent.downloadCount||J.downloadCount+1})),j.agent.downloadCount?$(j.agent.downloadCount):$(J=>J+1);try{const J=`agent:${z}:no_reviews`,K=`agent:${z}:with_reviews`;if(localStorage.removeItem(J),localStorage.removeItem(K),window.useAgentStore){const X=window.useAgentStore.getState();X&&X.agents&&X.refreshAgents()}}catch(J){console.warn("[CACHE] Error clearing localStorage cache:",J)}j.agent.likes&&(Array.isArray(j.agent.likes)?r(j.agent.likes.length):typeof j.agent.likes=="number"&&r(j.agent.likes))}else $(J=>J+1);de.success(" Download successful! Check your email for the files.",{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:R?"dark":"light",icon:"",style:{background:R?"var(--background-card)":"#ffffff",color:R?"var(--text-primary)":"#333333",borderRadius:"12px",border:`1px solid ${R?"var(--border-color)":"#e2e8f0"}`,boxShadow:R?"var(--shadow-lg)":"0 10px 25px rgba(0, 0, 0, 0.15)",fontSize:"14px",fontWeight:"600",fontFamily:"var(--font-family)"}}),setTimeout(()=>{typeof window.openSkoolModal=="function"&&window.openSkoolModal("download")},2e3);let L=j.downloadUrl||j.agent?.downloadUrl||j.agent?.fileUrl||j.agent?.jsonFile?.url;if(L&&typeof L=="string"&&L.trim()!=="")try{let J;try{if(J=new URL(L),!["https:"].includes(J.protocol))throw new Error("Only HTTPS URLs are allowed for security");!J.hostname.includes("storage.googleapis.com")&&!J.hostname.includes("firebasestorage.app")&&console.warn("Non-Google Storage URL detected, may have CORS issues")}catch(Ce){throw console.error("Invalid download URL format:",L,Ce),new Error(`Invalid download URL format: ${Ce.message}`)}const K=(Ce,Ie)=>{const Re=Ie.toLowerCase().replace(/[^\w\s]/g,"").split(" ").filter(ve=>ve.length>3).slice(0,3);return Re.length>0?Re.join("-")+"-workflow.json":Ce.replace(/^\d+_/,"").replace(/_/g,"-").replace(/\s+/g,"-").toLowerCase().replace(/[^a-z0-9\-\.]/g,"").replace(/\.json$/,"")+".json"},X=L.split("/");let ie=X[X.length-1];ie.includes("?")&&(ie=ie.split("?")[0]);const ce=t.jsonFile?.originalName||ie||"workflow.json",ge=K(ce,t.title||z),xe=L.includes("storage.googleapis.com")||L.includes("firebasestorage.app"),_e=L.includes("GoogleAccessId")||L.includes("Signature");if(xe)try{const Ce=`/api/agents/${encodeURIComponent(z)}/download?url=${encodeURIComponent(L)}`;await Ne(L,ge,j)}catch(Ce){if(console.error("Backend proxy download failed:",Ce),_e)try{const Ie=await fetch(L,{method:"GET",mode:"cors",credentials:"omit",headers:{Accept:"application/json, application/octet-stream, */*"}});if(!Ie.ok)throw new Error(`HTTP error! status: ${Ie.status} - ${Ie.statusText}`);const Re=await Ie.text(),ve=new Blob([Re],{type:"application/octet-stream"}),Se=window.URL.createObjectURL(ve),Pe=document.createElement("a");Pe.href=Se,Pe.download=ge,Pe.style.display="none",document.body.appendChild(Pe),Pe.click(),setTimeout(()=>{document.body.removeChild(Pe),window.URL.revokeObjectURL(Se)},100),N("success"," File downloaded successfully via direct method!",{autoClose:3e3});return}catch(Ie){console.error("Direct download also failed:",Ie)}throw N("error"," Download failed: Server proxy error. Please try again or contact support.",{autoClose:5e3}),new Error("Backend proxy download failed")}else{const Ce=await fetch(L,{method:"GET",mode:"cors",credentials:"omit",headers:{Accept:"application/json, application/octet-stream, */*"}});if(!Ce.ok)throw new Error(`HTTP error! status: ${Ce.status} - ${Ce.statusText}`);const Ie=await Ce.text(),Re=new Blob([Ie],{type:"application/octet-stream"}),ve=window.URL.createObjectURL(Re),Se=document.createElement("a");Se.href=ve,Se.download=ge,Se.style.display="none",document.body.appendChild(Se),Se.click(),setTimeout(()=>{document.body.removeChild(Se),window.URL.revokeObjectURL(ve)},100),N("success"," File downloaded successfully!",{autoClose:3e3})}}catch(J){console.error("Primary download method failed:",J);let K=" Download failed";J.message.includes("HTTP error")?K=" Network error: Unable to download file. Please try again.":J.message.includes("CORS")?K=" CORS error: Using fallback download method.":K=` Download error: ${J.message}`,N("warning",K,{autoClose:5e3}),console.error("All download methods failed"),N("error"," Download failed. Please try again or contact support if the issue persists.",{autoClose:5e3})}else console.warn("No valid download URL provided in response"),console.warn("Download result:",j),N("error"," No download file found. The agent might not have a file attached. Please contact support.",{autoClose:8e3})}else{const L=j.error||j.message||"Download failed";console.error("Download API returned error:",L);let J=" Download failed",K="error";throw L.includes("not free")?(J=" This agent requires purchase. Please buy it first.",K="warning"):L.includes("not found")?(J=" Agent not found. Please refresh the page and try again.",K="error"):L.includes("Network error")?(J=" Network error. Please check your connection and try again.",K="error"):L.includes("Server error")?(J=" Server error. Please try again in a few moments.",K="error"):(J=` ${L}`,K="error"),N(K,J,{autoClose:6e3}),new Error(L)}}catch(j){console.error("Error downloading free agent:",j);let L=" Download failed. ";j.message.includes("CORS")?L+="Cross-origin request blocked. Please try again or contact support.":j.message.includes("Network")?L+="Network error. Please check your connection and try again.":j.message.includes("404")?L+="File not found. Please contact support.":j.message.includes("403")?L+="Access denied. Please ensure you are signed in and try again.":L+=j.message||"Unknown error occurred.",N("error",L,{icon:"",autoClose:8e3})}finally{d(!1)}},be=()=>{if(!t)return 0;if(t.priceDetails){if(t.priceDetails.minimumPrice!==void 0)return t.priceDetails.minimumPrice;if(t.priceDetails.basePrice!==void 0)return t.priceDetails.basePrice;if(t.priceDetails.discountedPrice!==void 0)return t.priceDetails.discountedPrice}return typeof t.price=="number"?t.price:typeof t.price=="string"?t.price==="Free"||t.price==="free"||t.price==="$0"||t.price==="0"?0:parseFloat(t.price.replace(/[^0-9.]/g,""))||0:t.price&&typeof t.price=="object"&&t.price.basePrice!==void 0?t.price.basePrice:0};if(n)return a.jsx("div",{className:`agent-detail-container ${R?"dark-mode":""}`,children:a.jsxs("div",{className:"loading-container fade-in",children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("h3",{children:"Loading Amazing Agent..."}),a.jsx("p",{children:"Preparing something special for you "})]})});if(y||!t)return a.jsx("div",{className:`agent-detail-container ${R?"dark-mode":""}`,children:a.jsxs("div",{className:"error-container fade-in",children:[a.jsx("h2",{children:"Oops! Agent Not Found"}),a.jsx("p",{children:y||"We couldn't find the agent you're looking for. It might have been moved or doesn't exist."}),a.jsx("p",{children:"Don't worry - we have many other amazing agents waiting for you!"}),a.jsxs(Te,{to:"/agents",className:"back-button",children:[a.jsx(Ye,{style:{marginRight:"8px"}}),"Explore All Agents"]})]})});se();const De=be(),Oe=V();return a.jsxs("div",{className:`agent-detail-container ${R?"dark-mode":""}`,children:[a.jsxs("div",{className:"agent-detail-breadcrumb",children:[a.jsx(Te,{to:"/",children:"Home"})," / ",a.jsx(Te,{to:"/agents",children:"Agents"})," / ",a.jsx("span",{children:t.title})]}),a.jsxs("div",{className:"agent-detail-content",children:[a.jsxs("div",{className:"left-column slide-in-left",children:[a.jsx("div",{className:"image-slider-section",children:a.jsx("div",{className:"image-slider",ref:G,children:a.jsx("div",{className:"slider-container",children:a.jsx("div",{className:"slide",children:a.jsx("img",{ref:fe,src:He,alt:t.title,className:"slide-image",onLoad:he,"data-aspect":te})})})})}),a.jsxs("div",{className:`agent-description-section ${R?"dark-mode":""}`,children:[a.jsx($t,{darkMode:R}),a.jsx("div",{className:"agent-description",children:a.jsx("div",{className:"description-details",style:{whiteSpace:"pre-line"},children:ke})})]})]}),a.jsxs("div",{className:"agent-info-section slide-in-right",children:[a.jsxs("div",{className:"agent-header",children:[a.jsx("h1",{className:"agent-title",children:pe}),Ae.length>0&&a.jsx("div",{className:"agent-categories",children:Ae.map(j=>a.jsx(Ut,{category:j,onClick:ue},j))})]}),a.jsxs("div",{className:`price-purchase-container ${R?"dark-mode":""}`,children:[we(t)?a.jsxs("div",{className:"free-download-container",children:[a.jsxs("div",{className:"free-agent-notice",children:[a.jsx("span",{className:"free-label",children:" Free"}),a.jsx("p",{className:"free-description",children:"This premium agent is available at no cost!"})]}),a.jsx("button",{className:"download-now-btn",onClick:Fe,disabled:n,children:n?a.jsxs(a.Fragment,{children:[a.jsx(Me,{style:{marginRight:"8px",animation:"spin 1s linear infinite"}}),"Processing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Me,{style:{marginRight:"8px"}}),"Download Now"]})})]}):a.jsxs("div",{className:"fixed-price-container",children:[a.jsx("div",{className:"price-display-section",children:a.jsx("div",{className:"price-value-container paid",children:E(t)})}),t?.downloadProtected&&t?.entitled?a.jsxs("div",{style:{marginTop:8,fontSize:14,fontWeight:700,color:"var(--success-color)"},children:["Included with your AllAccess subscription  Regular price ",Be(De)]}):a.jsx("button",{className:"buy-now-btn",onClick:me,disabled:n,children:n?a.jsxs(a.Fragment,{children:[a.jsx(et,{style:{marginRight:"8px"}}),"Processing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(et,{style:{marginRight:"8px"}}),"Buy for ",Be(De)]})}),a.jsx("div",{style:{marginTop:"12px"},children:t?.downloadProtected&&!t?.entitled?a.jsxs("div",{className:"allaccess-cta",children:[a.jsx("div",{className:"allaccess-cta-title",children:"Included in AllAccess"}),a.jsx("div",{className:"allaccess-cta-subtitle",children:"Unlock every premium agent for just 50/month"}),a.jsx(Te,{to:"/subscribe",className:"allaccess-cta-button",children:"Get AllAccess (50/mo)"})]}):t?.downloadProtected&&t?.entitled?a.jsx("div",{style:{marginTop:8},children:a.jsx("button",{className:"download-now-btn",onClick:async()=>{try{const j=await dt(t.id);if(j?.success&&j.downloadUrl){const L=document.createElement("a");L.href=j.downloadUrl,L.target="_blank",document.body.appendChild(L),L.click(),setTimeout(()=>document.body.removeChild(L),100)}else de.error(j?.error||"Could not generate download link")}catch(j){de.error(j?.response?.data?.error||j.message||"Failed to start download")}},children:"Download (Subscriber)"})}):null}),t.priceDetails&&t.priceDetails.basePrice>0&&t.priceDetails.discountedPrice<t.priceDetails.basePrice&&a.jsxs("p",{className:"discount-note",children:[a.jsxs("span",{className:"discount-badge",children:[" ",Math.round((1-t.priceDetails.discountedPrice/t.priceDetails.basePrice)*100),"% OFF"]}),a.jsxs("span",{className:"original-price-text",children:["Was $",t.priceDetails.basePrice.toFixed(2)]})]})]}),a.jsxs("div",{className:"downloads-info",children:[a.jsx(Me,{className:"download-icon"}),a.jsxs("span",{className:"download-count",children:[D.toLocaleString()," downloads"]})]})]}),a.jsxs("div",{className:"agent-meta-row",children:[a.jsxs("div",{className:"creator-info",children:[a.jsx("span",{className:"by-text",children:"Created by "}),a.jsx("a",{href:"#",className:"creator-name",children:t.creator?.username||t.creator?.name||t.creator?.role||"AI Wave Rider Team"})]}),a.jsxs("div",{className:"rating-display",children:[a.jsx("div",{className:"stars",children:a.jsx(Xe,{rating:ye})}),a.jsx("span",{className:"rating-count",children:U>0?`(${U})`:"(Be the first to review!)"}),a.jsx(Bt,{agentId:z,initialLikes:P,onLikeUpdate:je})]})]}),a.jsx(Wt,{deliverables:e,darkMode:R,isFreeAgent:we(t)}),a.jsx(Lt,{businessValue:Ee,darkMode:R}),a.jsx("div",{className:"file-details-section",children:a.jsx("div",{className:"file-info",children:a.jsx("span",{className:"file-detail",children:Oe})})}),a.jsxs("div",{className:"agent-actions",children:[a.jsxs("button",{className:`wishlist-btn ${g?"active":""}`,onClick:W,disabled:s,title:g?"Remove from wishlist":"Add to wishlist",children:[g?a.jsx(rt,{}):a.jsx(it,{}),a.jsx("span",{children:g?"In Wishlist":"Add to Wishlist"})]}),a.jsxs("button",{className:"copy-link-btn",onClick:M,title:"Copy link",children:[a.jsx(ut,{}),a.jsx("span",{children:k||"Copy Link"})]}),a.jsxs("button",{className:"share-btn",onClick:()=>{navigator.share?navigator.share({title:t.title,text:`Check out this amazing AI agent: ${t.description}`,url:window.location.href}).then(()=>{N("success"," Successfully shared this amazing agent!",{icon:"",autoClose:2500})}).catch(j=>{console.error("Error sharing:",j),M()}):M()},title:"Share this agent",children:[a.jsx(ht,{}),a.jsx("span",{children:"Share"})]})]})]})]}),a.jsxs("div",{className:"agent-detail-tabs",children:[a.jsxs("button",{className:`tab-button ${i==="overview"?"active":""}`,onClick:()=>u("overview"),children:[a.jsx(nt,{style:{marginRight:"6px"}}),"Overview"]}),a.jsxs("button",{className:`tab-button ${i==="reviews"?"active":""}`,onClick:()=>u("reviews"),children:[a.jsx(qe,{style:{marginRight:"6px"}}),"Reviews (",U,")"]}),a.jsxs("button",{className:`tab-button ${i==="related"?"active":""}`,onClick:()=>u("related"),children:[a.jsx(Ue,{style:{marginRight:"6px"}}),"Related Items"]})]}),a.jsxs("div",{className:"tab-content fade-in",children:[i==="overview"&&a.jsx("div",{className:"overview-tab",children:a.jsx("div",{className:"overview-content",children:t.longDescription?a.jsxs("div",{className:"overview-item",children:[a.jsxs("div",{className:"overview-header",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"overview-title",children:[a.jsx(Ke,{style:{marginRight:"8px"}}),"About This Premium Agent"]}),a.jsx("div",{className:"overview-meta",children:"Premium AI Solution"})]}),a.jsx("div",{className:"overview-actions",children:a.jsx(Ue,{style:{color:"var(--primary-color)"}})})]}),a.jsx("div",{className:"overview-text",children:a.jsx("div",{dangerouslySetInnerHTML:{__html:Rt.sanitize(t.longDescription)}})})]}):a.jsxs("div",{className:"overview-item",children:[a.jsxs("div",{className:"overview-header",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"overview-title",children:[a.jsx(Ke,{style:{marginRight:"8px"}}),"About This Premium Agent"]}),a.jsx("div",{className:"overview-meta",children:"Premium AI Solution"})]}),a.jsx("div",{className:"overview-actions",children:a.jsx(Ue,{style:{color:"var(--primary-color)"}})})]}),a.jsxs("div",{className:"overview-text",children:[a.jsx("p",{children:t.description||"This carefully crafted AI agent represents the pinnacle of automation technology. Designed with precision and tested extensively, it delivers exceptional performance and reliability that exceeds industry standards."}),a.jsxs("p",{children:[a.jsx("strong",{children:" Perfect for:"})," Professionals seeking to automate complex workflows, enhance productivity, and achieve superior results with cutting-edge AI technology."]})]})]})})}),i==="reviews"&&a.jsx("div",{className:"reviews-tab",children:a.jsx(Zt,{agentId:z,existingReviews:t.reviews||[],onReviewsLoaded:j=>oe(j),skipExternalFetch:!0,onReviewAdded:(j,L,J)=>{l(K=>{const ie=[...Array.isArray(K?.reviews)?K.reviews:[],j];return{...K,reviews:ie,reviewCount:typeof L=="number"?L:ie.length,rating:{...K?.rating||{},average:typeof J=="number"?J:ie.reduce((ce,ge)=>ce+(Number(ge.rating)||0),0)/ie.length}}})},onReviewDeleted:(j,L,J)=>{l(K=>{const ie=(Array.isArray(K?.reviews)?K.reviews:[]).filter(xe=>xe.id!==j&&xe._id!==j),ce=typeof L=="number"?L:ie.length,ge=typeof J=="number"?J:ce>0?ie.reduce((xe,_e)=>xe+(Number(_e.rating)||0),0)/ce:0;return{...K,reviews:ie,reviewCount:ce,rating:{...K?.rating||{},average:ge}}})}})}),i==="related"&&a.jsxs("div",{className:"related-tab",children:[a.jsxs("h3",{className:`section-heading ${R?"text-gray-200":"text-gray-800"}`,children:[a.jsx(Ue,{style:{marginRight:"12px"}}),"More Amazing Agents"]}),t.relatedAgents&&t.relatedAgents.length>0?a.jsx("div",{className:"related-agents-grid",children:t.relatedAgents.map(j=>a.jsxs(Te,{to:`/agents/${j.id}`,className:"related-agent-card",children:[a.jsx("div",{className:"related-image-container",children:a.jsx("img",{src:j.imageUrl||He,alt:j.title||"Related Agent",onError:L=>{L.target.src=He}})}),a.jsxs("div",{className:"related-info",children:[a.jsx("h4",{children:j.title}),a.jsxs("div",{className:"related-meta",children:[a.jsx("div",{className:"related-price",children:Be(j.price)}),a.jsxs("div",{className:"related-rating",children:[a.jsx(qe,{className:"star-icon"}),a.jsx("span",{children:re(j.rating?.average||0)})]})]})]})]},j.id))}):a.jsxs("div",{className:"no-related",children:[a.jsx(Ye,{style:{fontSize:"48px",marginBottom:"16px",color:"var(--text-light)"}}),a.jsxs("p",{children:[" This agent is so unique, we're still finding its perfect companions!",a.jsx("br",{}),"Check back soon for related recommendations."]}),a.jsx(Te,{to:"/agents",className:"back-button",style:{marginTop:"16px"},children:"Explore All Agents"})]})]})]})]})};export{qt as default};
