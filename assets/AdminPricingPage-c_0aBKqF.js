import{r as n,j as e,F as g,x as M,ag as q,Y as f,b$ as I}from"./index-CDuOHj3I.js";import{A as O}from"./AdminLayout-B2_HOb6I.js";const L=()=>{const[c,o]=n.useState([]),[v,p]=n.useState(!0),[h,x]=n.useState(null),[a,l]=n.useState(null),[b,u]=n.useState(!1),[y,d]=n.useState(!1),[m,j]=n.useState("create");n.useEffect(()=>{N()},[]);const N=async()=>{p(!0);try{await new Promise(i=>setTimeout(i,1e3)),o([{id:1,name:"Basic",description:"Essential features for individuals",price:9.99,billingCycle:"monthly",features:["Access to basic agents","10 requests per day","Email support"],isPopular:!1,isActive:!0},{id:2,name:"Pro",description:"Advanced features for professionals",price:19.99,billingCycle:"monthly",features:["Access to all agents","Unlimited requests","Priority support","Custom agent creation"],isPopular:!0,isActive:!0},{id:3,name:"Enterprise",description:"Complete solution for businesses",price:49.99,billingCycle:"monthly",features:["Access to all agents","Unlimited requests","Dedicated support","Custom agent creation","API access","Team collaboration"],isPopular:!1,isActive:!0},{id:4,name:"Lifetime",description:"One-time payment for lifetime access",price:299.99,billingCycle:"one-time",features:["Access to all current agents","Unlimited requests","Standard support","Future updates for 2 years"],isPopular:!1,isActive:!1}]),x(null)}catch(s){console.error("Error fetching pricing plans:",s),x("Failed to load pricing plans. Please try again later.")}finally{p(!1)}},P=()=>{j("create"),l({name:"",description:"",price:0,billingCycle:"monthly",features:[""],isPopular:!1,isActive:!0}),d(!0)},C=s=>{j("edit"),l({...s,features:[...s.features]}),d(!0)},F=s=>{l(s),u(!0)},A=()=>{o(c.filter(s=>s.id!==a.id)),u(!1),l(null)},t=(s,i)=>{l({...a,[s]:i})},k=(s,i)=>{const r=[...a.features];r[s]=i,l({...a,features:r})},D=()=>{l({...a,features:[...a.features,""]})},E=s=>{const i=[...a.features];i.splice(s,1),l({...a,features:i})},S=s=>{if(s.preventDefault(),m==="create"){const i={...a,id:Date.now()};o([...c,i])}else o(c.map(i=>i.id===a.id?a:i));d(!1),l(null)},w=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(s);return e.jsx(O,{children:e.jsxs("div",{className:"pricing-page",children:[e.jsxs("header",{className:"page-header",children:[e.jsx("h1",{children:"Manage Pricing Plans"}),e.jsxs("button",{className:"btn-primary",onClick:P,children:[e.jsx(g,{}),e.jsx("span",{children:"Add New Plan"})]})]}),h&&e.jsxs("div",{className:"error-message",children:[e.jsx(M,{}),e.jsx("span",{children:h})]}),v?e.jsx("div",{className:"loading-message",children:"Loading pricing plans..."}):e.jsx("div",{className:"pricing-plans-grid",children:c.length===0?e.jsx("div",{className:"no-plans-message",children:'No pricing plans found. Click "Add New Plan" to create one.'}):c.map(s=>e.jsxs("div",{className:`pricing-plan-card ${s.isPopular?"popular":""} ${s.isActive?"":"inactive"}`,children:[s.isPopular&&e.jsx("div",{className:"popular-badge",children:"Popular"}),!s.isActive&&e.jsx("div",{className:"inactive-badge",children:"Inactive"}),e.jsxs("div",{className:"plan-header",children:[e.jsx("h2",{children:s.name}),e.jsx("p",{className:"plan-description",children:s.description})]}),e.jsxs("div",{className:"plan-price",children:[e.jsx("span",{className:"price",children:w(s.price)}),e.jsx("span",{className:"billing-cycle",children:s.billingCycle==="monthly"?"/month":" one-time"})]}),e.jsxs("div",{className:"plan-features",children:[e.jsx("h3",{children:"Features"}),e.jsx("ul",{children:s.features.map((i,r)=>e.jsx("li",{children:i},r))})]}),e.jsxs("div",{className:"plan-actions",children:[e.jsxs("button",{className:"btn-edit",onClick:()=>C(s),title:"Edit plan",children:[e.jsx(q,{}),e.jsx("span",{children:"Edit"})]}),e.jsxs("button",{className:"btn-delete",onClick:()=>F(s),title:"Delete plan",children:[e.jsx(f,{}),e.jsx("span",{children:"Delete"})]})]})]},s.id))}),b&&a&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h2",{children:"Confirm Deletion"}),e.jsxs("p",{children:["Are you sure you want to delete the ",e.jsx("strong",{children:a.name})," plan?"]}),e.jsx("p",{children:"This action cannot be undone."}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>u(!1),children:"Cancel"}),e.jsx("button",{className:"btn-danger",onClick:A,children:"Delete"})]})]})}),y&&a&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content plan-form-modal",children:[e.jsx("h2",{children:m==="create"?"Add New Plan":"Edit Plan"}),e.jsxs("form",{onSubmit:S,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"planName",children:"Plan Name"}),e.jsx("input",{type:"text",id:"planName",value:a.name,onChange:s=>t("name",s.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"planDescription",children:"Description"}),e.jsx("textarea",{id:"planDescription",value:a.description,onChange:s=>t("description",s.target.value),rows:"2",required:!0})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"planPrice",children:"Price"}),e.jsxs("div",{className:"price-input",children:[e.jsx(I,{}),e.jsx("input",{type:"number",id:"planPrice",value:a.price,onChange:s=>t("price",parseFloat(s.target.value)),min:"0",step:"0.01",required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"billingCycle",children:"Billing Cycle"}),e.jsxs("select",{id:"billingCycle",value:a.billingCycle,onChange:s=>t("billingCycle",s.target.value),children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"}),e.jsx("option",{value:"one-time",children:"One-time"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Features"}),a.features.map((s,i)=>e.jsxs("div",{className:"feature-input",children:[e.jsx("input",{type:"text",value:s,onChange:r=>k(i,r.target.value),placeholder:"Enter a feature",required:!0}),e.jsx("button",{type:"button",className:"btn-remove-feature",onClick:()=>E(i),disabled:a.features.length<=1,children:e.jsx(f,{})})]},i)),e.jsxs("button",{type:"button",className:"btn-add-feature",onClick:D,children:[e.jsx(g,{}),e.jsx("span",{children:"Add Feature"})]})]}),e.jsxs("div",{className:"form-row checkboxes",children:[e.jsxs("div",{className:"form-group checkbox",children:[e.jsx("input",{type:"checkbox",id:"isPopular",checked:a.isPopular,onChange:()=>t("isPopular",!a.isPopular)}),e.jsx("label",{htmlFor:"isPopular",children:"Mark as Popular"})]}),e.jsxs("div",{className:"form-group checkbox",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:a.isActive,onChange:()=>t("isActive",!a.isActive)}),e.jsx("label",{htmlFor:"isActive",children:"Active"})]})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>d(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary",children:m==="create"?"Create Plan":"Update Plan"})]})]})]})})]})})};export{L as default};
