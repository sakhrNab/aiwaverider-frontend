import{r as h,j as e,x as S,aM as M,bu as k,bY as F,aB as T}from"./index-CDuOHj3I.js";import{A as C}from"./AdminLayout-B2_HOb6I.js";const P=()=>{const[i,m]=h.useState("week"),[r,b]=h.useState({totalSales:0,totalUsers:0,newUsers:0,activeAgents:0,salesData:[],userGrowthData:[],topAgents:[]}),[D,j]=h.useState(!0),[v,u]=h.useState(null);h.useEffect(()=>{y(i)},[i]);const y=async s=>{j(!0);try{await new Promise(c=>setTimeout(c,1e3));const a=f(s);b(a),u(null)}catch(a){console.error("Error fetching analytics data:",a),u("Failed to load analytics data. Please try again later.")}finally{j(!1)}},f=s=>{let a=[],c=[],n=0,l=0,t=0;const d=s==="week"?7:s==="month"?30:12,N=A(s,d);for(let o=0;o<d;o++){const w=Math.floor(Math.random()*1e3)+500;a.push({label:N[o],value:w}),n+=w;const p=Math.floor(Math.random()*20)+5;c.push({label:N[o],value:p}),t+=p}return l=150+t,{totalSales:n,totalUsers:l,newUsers:t,activeAgents:42,salesData:a,userGrowthData:c,topAgents:[{id:1,name:"AI Writing Assistant",sales:2450,growth:15},{id:2,name:"Design Helper Pro",sales:1980,growth:8},{id:3,name:"Code Reviewer",sales:1540,growth:12},{id:4,name:"Data Analyzer",sales:1350,growth:-3},{id:5,name:"Language Translator",sales:1120,growth:5}]}},A=(s,a)=>{const c=[],n=new Date;if(s==="week"){const l=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(let t=0;t<a;t++){const d=new Date(n);d.setDate(n.getDate()-t),c.unshift(l[d.getDay()])}}else if(s==="month")for(let l=0;l<a;l++){const t=new Date(n);t.setDate(n.getDate()-l),c.unshift(`${t.getMonth()+1}/${t.getDate()}`)}else{const l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(let t=0;t<a;t++)c.unshift(l[t])}return c},x=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),g=s=>Math.max(...s.map(a=>a.value))*1.2;return e.jsx(C,{children:e.jsxs("div",{className:"analytics-page",children:[e.jsxs("header",{className:"page-header",children:[e.jsx("h1",{children:"Analytics Dashboard"}),e.jsxs("div",{className:"time-range-selector",children:[e.jsx("button",{className:i==="week"?"active":"",onClick:()=>m("week"),children:"Week"}),e.jsx("button",{className:i==="month"?"active":"",onClick:()=>m("month"),children:"Month"}),e.jsx("button",{className:i==="year"?"active":"",onClick:()=>m("year"),children:"Year"})]})]}),v&&e.jsxs("div",{className:"error-message",children:[e.jsx(S,{}),e.jsx("span",{children:v})]}),D?e.jsx("div",{className:"loading-message",children:"Loading analytics data..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"metrics-grid",children:[e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"metric-icon sales",children:e.jsx(M,{})}),e.jsxs("div",{className:"metric-content",children:[e.jsx("h3",{children:"Total Sales"}),e.jsx("div",{className:"metric-value",children:x(r.totalSales)}),e.jsxs("div",{className:"metric-label",children:["Last ",i]})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"metric-icon users",children:e.jsx(k,{})}),e.jsxs("div",{className:"metric-content",children:[e.jsx("h3",{children:"Total Users"}),e.jsx("div",{className:"metric-value",children:r.totalUsers}),e.jsxs("div",{className:"metric-label",children:[r.newUsers," new users"]})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"metric-icon agents",children:e.jsx(F,{})}),e.jsxs("div",{className:"metric-content",children:[e.jsx("h3",{children:"Active Agents"}),e.jsx("div",{className:"metric-value",children:r.activeAgents}),e.jsx("div",{className:"metric-label",children:"Generating revenue"})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"metric-icon date",children:e.jsx(T,{})}),e.jsxs("div",{className:"metric-content",children:[e.jsx("h3",{children:"Time Period"}),e.jsx("div",{className:"metric-value",children:i.charAt(0).toUpperCase()+i.slice(1)}),e.jsx("div",{className:"metric-label",children:"Current view"})]})]})]}),e.jsxs("div",{className:"charts-section",children:[e.jsxs("div",{className:"chart-container",children:[e.jsx("h2",{children:"Sales Trend"}),e.jsxs("div",{className:"chart",children:[e.jsx("div",{className:"chart-bars",children:r.salesData.map((s,a)=>e.jsx("div",{className:"chart-bar",style:{height:`${s.value/g(r.salesData)*100}%`},children:e.jsx("div",{className:"tooltip",children:x(s.value)})},a))}),e.jsx("div",{className:"chart-labels",children:r.salesData.map((s,a)=>e.jsx("div",{className:"chart-label",children:s.label},a))})]})]}),e.jsxs("div",{className:"chart-container",children:[e.jsx("h2",{children:"User Growth"}),e.jsxs("div",{className:"chart",children:[e.jsx("div",{className:"chart-bars",children:r.userGrowthData.map((s,a)=>e.jsx("div",{className:"chart-bar user-growth",style:{height:`${s.value/g(r.userGrowthData)*100}%`},children:e.jsxs("div",{className:"tooltip",children:[s.value," users"]})},a))}),e.jsx("div",{className:"chart-labels",children:r.userGrowthData.map((s,a)=>e.jsx("div",{className:"chart-label",children:s.label},a))})]})]})]}),e.jsxs("div",{className:"top-agents-section",children:[e.jsx("h2",{children:"Top Performing Agents"}),e.jsxs("table",{className:"top-agents-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Rank"}),e.jsx("th",{children:"Agent Name"}),e.jsx("th",{children:"Total Sales"}),e.jsx("th",{children:"Growth"})]})}),e.jsx("tbody",{children:r.topAgents.map((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{children:a+1}),e.jsx("td",{children:s.name}),e.jsx("td",{children:x(s.sales)}),e.jsx("td",{children:e.jsxs("span",{className:`growth-indicator ${s.growth>=0?"positive":"negative"}`,children:[s.growth>=0?"+":"",s.growth,"%"]})})]},s.id))})]})]})]})]})})};export{P as default};
