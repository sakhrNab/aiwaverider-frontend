import{r as t,j as e,F as R,ag as $,Y as U,v as f,bp as Y,bM as z}from"./index-CDuOHj3I.js";import{g as B,u as G,a as H,d as J}from"./aiToolsService-BmhsXtqf.js";import{A as Q}from"./AdminLayout-B2_HOb6I.js";const _=()=>{const[m,u]=t.useState([]),[n,r]=t.useState(!0),[y,o]=t.useState(null),[l,i]=t.useState(null),[N,g]=t.useState(!1),[k,x]=t.useState(!1),[j,b]=t.useState(null),[v,d]=t.useState(null),[T,c]=t.useState(null),A=["Free tools","Video Generator","Animation","Make money with AI","3D tools","Content","AI Coding","Digital Influencer","Video Editing","Viral Video Hacks","Organization"],C=["Productivity","AI Tools","Development","Design","Marketing","Content Creation","Video Editing","Audio","Automation","Education","Business","Entertainment"],I=["AI","Automation","Productivity","Coding","Development","Design","Video","Audio","Marketing","Content","Free","Paid","Online","Desktop","Mobile"],D={title:"",description:"",keyword:"",keywords:[],link:"",image:"",tags:[],category:[]};t.useEffect(()=>{F()},[]);const F=async()=>{r(!0);try{const s=await B();s&&s.length>0?(u(s),o(null)):o("No AI tools found. This could be due to missing database permissions. Please contact support if this issue persists.")}catch(s){console.error("Error fetching AI tools:",s),s.message&&s.message.includes("permission")?o("You do not have sufficient permissions to access AI tools data. Please contact your administrator."):o("Failed to load AI tools. Please try again or contact support.")}finally{r(!1)}},E=()=>{i({...D}),d(null),c(null),g(!0)},P=s=>{const a={...s,keywords:Array.isArray(s.keywords)?s.keywords:s.keyword?[s.keyword]:[],category:Array.isArray(s.category)?s.category:s.category?[s.category]:[]};i(a),d(s.image),c(null),g(!0)},w=()=>{g(!1),i(null),d(null),c(null)},p=s=>{const{name:a,value:h}=s.target;i({...l,[a]:h})},S=s=>{l.tags.includes(s)?i({...l,tags:l.tags.filter(a=>a!==s)}):i({...l,tags:[...l.tags,s]})},M=s=>{l.category.includes(s)?i({...l,category:l.category.filter(a=>a!==s)}):i({...l,category:[...l.category,s]})},O=s=>{l.keywords.includes(s)?i({...l,keywords:l.keywords.filter(a=>a!==s)}):i({...l,keywords:[...l.keywords,s]})},V=s=>{const a=s.target.files[0];if(a){c(a);const h=new FileReader;h.onloadend=()=>{d(h.result)},h.readAsDataURL(a)}},q=async()=>{if(!l.title||!l.description||!l.link){o("Please fill all required fields");return}if(!v&&!l.image){o("Please upload an image");return}if(l.tags.length===0){o("Please select at least one tag");return}r(!0);try{let s;l.id?(s=await G(l.id,l,T),u(m.map(a=>a.id===s.id?s:a))):(s=await H(l,T),u([...m,s])),g(!1),i(null),d(null),c(null),o(null)}catch(s){console.error("Error saving AI tool:",s),o("Failed to save tool. Please try again.")}finally{r(!1)}},K=s=>{b(s),x(!0)},L=async()=>{if(j?.id){r(!0);try{await J(j.id),u(m.filter(s=>s.id!==j.id)),x(!1),b(null)}catch(s){console.error("Error deleting AI tool:",s),o("Failed to delete tool. Please try again.")}finally{r(!1)}}};return e.jsx(Q,{children:e.jsxs("div",{className:"ai-tools-manager",children:[e.jsxs("div",{className:"manager-header",children:[e.jsx("h2",{children:"Manage AI Tools"}),e.jsxs("button",{className:"add-tool-btn",onClick:E,disabled:n,children:[e.jsx(R,{})," Add New Tool"]})]}),y&&e.jsx("div",{className:"error-message",children:y}),n&&!N&&!k?e.jsx("div",{className:"loading-state",children:"Loading AI tools..."}):e.jsx("div",{className:"tools-grid",children:m.length===0?e.jsx("div",{className:"no-tools",children:e.jsx("p",{children:'No AI tools found. Click "Add New Tool" to create your first tool.'})}):m.map(s=>e.jsxs("div",{className:"tool-card",children:[e.jsx("div",{className:"tool-image",children:e.jsx("img",{src:s.image,alt:s.title})}),e.jsxs("div",{className:"tool-content",children:[e.jsx("h3",{children:s.title}),e.jsx("p",{className:"tool-description",children:s.description}),s.keyword&&(!s.keywords||s.keywords.length===0)&&e.jsxs("div",{className:"tool-keyword",children:["Keyword: ",s.keyword]}),"c",e.jsx("div",{className:"tool-tags",children:s.tags.map(a=>e.jsx("span",{className:"tool-tag",children:a},a))})]}),e.jsxs("div",{className:"tool-actions",children:[e.jsx("button",{className:"edit-btn",onClick:()=>P(s),title:"Edit Tool",children:e.jsx($,{})}),e.jsx("button",{className:"delete-btn",onClick:()=>K(s),title:"Delete Tool",children:e.jsx(U,{})})]})]},s.id))}),N&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:l?.id?"Edit AI Tool":"Add New AI Tool"}),e.jsx("button",{className:"close-btn",onClick:w,children:e.jsx(f,{})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"title",children:"Title*"}),e.jsx("input",{type:"text",id:"title",name:"title",value:l?.title||"",onChange:p,placeholder:"Tool title",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"description",children:"Description*"}),e.jsx("textarea",{id:"description",name:"description",value:l?.description||"",onChange:p,placeholder:"Tool description",rows:3,required:!0})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"keyword",children:"Keyword*"}),e.jsx("input",{type:"text",id:"keyword",name:"keyword",value:l?.keyword||"",onChange:p,placeholder:"ex: ADS, MAP, etc.",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"link",children:"Link*"}),e.jsx("input",{type:"url",id:"link",name:"link",value:l?.link||"",onChange:p,placeholder:"https://...",required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Image*"}),e.jsx("div",{className:"image-uploader",children:v?e.jsxs("div",{className:"image-preview",children:[e.jsx("img",{src:v,alt:"Tool preview"}),e.jsx("button",{type:"button",className:"remove-image",onClick:()=>{d(null),c(null),l?.id&&i({...l,image:""})},children:e.jsx(f,{})})]}):e.jsxs("div",{className:"upload-placeholder",children:[e.jsx(Y,{}),e.jsx("p",{children:"Upload image"}),e.jsx("input",{type:"file",id:"image",name:"image",onChange:V,accept:"image/*"})]})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tags* (select at least one)"}),e.jsx("div",{className:"tags-selector",children:A.map(s=>e.jsx("div",{className:`tag-option ${l?.tags?.includes(s)?"selected":""}`,onClick:()=>S(s),children:s},s))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Categories (select one or more)"}),e.jsx("div",{className:"tags-selector",children:C.map(s=>e.jsx("div",{className:`tag-option ${l?.category?.includes(s)?"selected":""}`,onClick:()=>M(s),children:s},s))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Keywords (select one or more)"}),e.jsx("div",{className:"tags-selector",children:I.map(s=>e.jsx("div",{className:`tag-option ${l?.keywords?.includes(s)?"selected":""}`,onClick:()=>O(s),children:s},s))})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"cancel-btn",onClick:w,children:"Cancel"}),e.jsx("button",{className:"save-btn",onClick:q,disabled:n,children:n?"Saving...":e.jsxs(e.Fragment,{children:[e.jsx(z,{})," Save"]})})]})]})}),k&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal delete-modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Confirm Deletion"}),e.jsx("button",{className:"close-btn",onClick:()=>x(!1),children:e.jsx(f,{})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:["Are you sure you want to delete ",e.jsx("strong",{children:j?.title}),"?"]}),e.jsx("p",{className:"delete-warning",children:"This action cannot be undone."})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"cancel-btn",onClick:()=>x(!1),children:"Cancel"}),e.jsx("button",{className:"delete-confirm-btn",onClick:L,disabled:n,children:n?"Deleting...":"Delete"})]})]})})]})})};export{_ as default};
