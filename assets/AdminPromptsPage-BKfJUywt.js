import{s as z,r as l,j as e,v as B,bq as M,L as w,br as H,bs as Q,as as $,bt as q,N as J,aL as W,bu as X,aJ as Y,bg as C,bv as K,D as V,ad as Z,ae as F,bX as _,a9 as ee,F as P,c4 as se,c5 as ae,o as te,aC as le,G as re,aB as ne,ag as ie,Y as ce,y as o}from"./index-CDuOHj3I.js";import{r as oe,d as de}from"./promptsApi-BDedM9HX.js";import{u as me}from"./usePromptsStore-CaD82vRv.js";const xe=()=>{const d=z(),[t,r]=l.useState(!1),n=[{path:"/admin/dashboard",icon:e.jsx(Q,{}),label:"Dashboard"},{path:"/admin/agents",icon:e.jsx($,{}),label:"Manage Agents"},{path:"/admin/ai-tools",icon:e.jsx(q,{}),label:"AI Tools"},{path:"/admin/prompts",icon:e.jsx(J,{}),label:"Prompts"},{path:"/admin/users",icon:e.jsx(W,{}),label:"Manage Users"},{path:"/admin/analytics",icon:e.jsx(X,{}),label:"Analytics"},{path:"/admin/pricing",icon:e.jsx(Y,{}),label:"Pricing"},{path:"/admin/email",icon:e.jsx(C,{}),label:"Email Management"},{path:"/admin/email-composer",icon:e.jsx(C,{}),label:"Email Composer"},{path:"/admin/settings",icon:e.jsx(K,{}),label:"Settings"}],x=()=>{r(!t)};return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"mobile-menu-button",onClick:x,"aria-label":t?"Close menu":"Open menu",children:t?e.jsx(B,{}):e.jsx(M,{})}),e.jsxs("div",{className:`admin-sidebar ${t?"open":""}`,children:[e.jsx("div",{className:"sidebar-header",children:e.jsx("h1",{children:"Admin Panel"})}),e.jsx("nav",{className:"sidebar-nav",children:e.jsx("ul",{children:n.map(a=>e.jsx("li",{children:e.jsxs(w,{to:a.path,className:d.pathname===a.path?"active":"",onClick:()=>r(!1),children:[e.jsx("span",{className:"nav-icon",children:a.icon}),e.jsx("span",{className:"nav-text",children:a.label})]})},a.path))})}),e.jsx("div",{className:"sidebar-footer",children:e.jsxs(w,{to:"/signout",className:"signout-button",children:[e.jsx(H,{}),e.jsx("span",{children:"Sign Out"})]})})]})]})},Pe=()=>{const d=V(),{currentUser:t}=Z(),r=t||{name:"Admin User"},[n,x]=l.useState(""),[a,A]=l.useState("All"),[m,i]=l.useState(null),[u,g]=l.useState(!1),{prompts:S,isLoading:k,error:b,isLoaded:E,categories:he,totalCount:f,currentPage:ue,totalPages:ge,pageSize:be,searchQuery:fe,filters:je,startListening:j,stopListening:p,setSearchQuery:pe,setFilters:Ne,setPage:ye,setPageSize:ve,forceRefresh:N}=me(),L=["AI Prompts","ChatGPT Prompts","AI Art Generator","Coding Assistant","Business Plan","Creative Writing","Marketing","Productivity","Education","Content Creation"];l.useEffect(()=>(j(),()=>{p()}),[j,p]);const y=S.filter(s=>{const c=n.toLowerCase(),h=s.title.toLowerCase().includes(c)||s.description&&s.description.toLowerCase().includes(c)||s.keywords&&s.keywords.some(O=>O.toLowerCase().includes(c)),I=a==="All"||s.category===a;return h&&I}),v=()=>{d("/admin/prompts/new")},D=s=>{d(`/admin/prompts/${s}`)},T=s=>{i(s)},U=async()=>{if(m)try{const s=await de(m.id);s.success?(i(null),o.success("Prompt deleted successfully"),N()):(o.error(s.error||"Failed to delete prompt"),i(null))}catch(s){console.error("Error deleting prompt:",s),o.error("Failed to delete prompt"),i(null)}},R=()=>{i(null)},G=async()=>{try{g(!0),await oe(),await N(),o.success("Prompts cache refreshed successfully")}catch(s){console.error("Error refreshing cache:",s),o.error("Failed to refresh cache")}finally{g(!1)}};return k&&!E?e.jsx("div",{className:"admin-prompts-page p-6",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx(F,{className:"animate-spin text-3xl text-blue-600"}),e.jsx("span",{className:"ml-2",children:"Loading prompts..."})]})}):e.jsxs("div",{className:"admin-layout bg-gray-100 min-h-screen",children:[e.jsx(xe,{}),e.jsxs("main",{className:"content-area",children:[e.jsx("header",{className:"bg-white shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Manage Prompts"}),f>0&&e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:[f," total"]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:G,disabled:u,className:"text-gray-600 hover:text-gray-900 disabled:opacity-50",title:"Refresh cache",children:e.jsx(F,{className:u?"animate-spin":"",size:20})}),e.jsx("button",{className:"text-gray-600 hover:text-gray-900",children:e.jsx(_,{size:20})}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-300 flex items-center justify-center text-gray-600 font-medium",children:r?.name?.charAt(0)||"U"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:r?.name||"User"})]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(ee,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search prompts...",value:n,onChange:s=>x(s.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:a,onChange:s=>A(s.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"All",children:"All Categories"}),L.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs("button",{onClick:v,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(P,{className:"mr-2"}),"Create New Prompt"]})]})]})}),b&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6 rounded",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(se,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-700",children:b})})]})}),y.length===0?e.jsxs("div",{className:"text-center py-16 bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx(ae,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No prompts"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n||a!=="All"?"No prompts match your current filters.":"Get started by creating a new prompt."}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:v,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(P,{className:"-ml-1 mr-2 h-5 w-5"}),"New Prompt"]})})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(s=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow duration-200",children:[e.jsx("div",{className:"h-40 bg-gray-100 overflow-hidden",children:s.image?e.jsx("img",{src:s.image,alt:s.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-r from-purple-500 to-blue-600",children:e.jsx("span",{className:"text-white text-4xl font-bold",children:s.title?.charAt(0).toUpperCase()||"P"})})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 line-clamp-1",children:s.title}),s.isFeatured&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Featured"})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:s.category||"General"}),s.tags&&s.tags.slice(0,2).map((c,h)=>e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:c},h))]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 line-clamp-2",children:s.description||"No description available."}),e.jsx("div",{className:"mt-3 flex items-center justify-between text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[s.likeCount>0&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(te,{className:"mr-1 h-3 w-3 text-red-500"}),s.likeCount]}),s.viewCount>0&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(le,{className:"mr-1 h-3 w-3"}),s.viewCount]}),s.downloadCount>0&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(re,{className:"mr-1 h-3 w-3"}),s.downloadCount]})]})}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(ne,{className:"mr-1.5 h-4 w-4 text-gray-400"}),e.jsx("span",{children:s.createdAt?new Date(s.createdAt.seconds?s.createdAt.seconds*1e3:s.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Unknown"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>D(s.id),className:"text-gray-400 hover:text-blue-600 transition-colors duration-200","aria-label":"Edit prompt",children:e.jsx(ie,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>T(s),className:"text-gray-400 hover:text-red-600 transition-colors duration-200","aria-label":"Delete prompt",children:e.jsx(ce,{className:"h-4 w-4"})})]})]})]})]},s.id))}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Confirm Delete"}),e.jsxs("p",{className:"mb-6",children:['Are you sure you want to delete "',m.title,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:R,className:"px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:U,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]})]})]})};export{Pe as default};
